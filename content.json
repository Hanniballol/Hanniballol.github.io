{"pages":[{"title":"tags","text":"","link":"/tags/index.html"},{"title":"about","text":"I'm Hanniballol! All work and no play makes jack a dull boy. Resume Of Me ğŸ¤­å¹½ç„¶æ‹¿é“çœŸä»–å¨˜çš„å¥½å–ï¼","link":"/about/index.html"},{"title":"categories","text":"","link":"/categories/index.html"}],"posts":[{"title":"Android Unit Case","text":"Androidå•å…ƒæµ‹è¯•ç¼–å†™åŸåˆ™åŠç›¸å…³ä¸‰æ–¹åº“è¯¦è§£ æ¦‚å¿µå•å…ƒæµ‹è¯•åªæ˜¯æµ‹è¯•ä¸€ä¸ªæ–¹æ³•å•å…ƒï¼Œå®ƒä¸æ˜¯æµ‹è¯•ä¸€ä¸ªæ•´ä¸ªæµç¨‹ã€‚ä¸¾ä¸€ä¸ªğŸŒ° ä¸€ä¸ªLoginé¡µé¢ï¼Œä¸Šé¢æœ‰ä¸¤ä¸ªEditTextå’Œä¸€ä¸ªButtonã€‚ä¸¤ä¸ªEditTextåˆ†åˆ«ç”¨äºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚ç‚¹å‡»Buttonä»¥åï¼Œæœ‰ä¸€ä¸ªUserManagerä¼šå»æ‰§è¡Œperformloginæ“ä½œï¼Œç„¶åå°†ç»“æœè¿”å›ï¼Œæ›´æ–°é¡µé¢ã€‚é‚£ä¹ˆæˆ‘ä»¬ç»™è¿™ä¸ªä¸œè¥¿åšå•å…ƒæµ‹è¯•çš„æ—¶å€™ï¼Œä¸æ˜¯æµ‹è¿™ä¸ªloginæµç¨‹ã€‚è¿™ç§æ•´ä¸ªæµç¨‹çš„æµ‹è¯•ï¼šç»™ä¸¤ä¸ªè¾“å…¥æ¡†è®¾ç½®æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œç‚¹å‡»login buttonï¼Œæœ€åé¡µé¢å¾—åˆ°æ›´æ–°ï¼Œå«åš é›†æˆæµ‹è¯•ï¼Œè€Œä¸æ˜¯å•å…ƒæµ‹è¯•ã€‚å½“ç„¶ï¼Œé›†æˆæµ‹è¯•æ˜¯æœ‰å¿…è¦çš„ï¼Œä½†è¿™ä¸æ˜¯ç¨‹åºå‘˜åº”è¯¥èŠ±ç²¾åŠ›çš„åœ°æ–¹ã€‚ Test PyramidTest Pyramidç†è®ºåŸºæœ¬å¤§æ„æ˜¯ï¼Œå•å…ƒæµ‹è¯•æ˜¯åŸºç¡€ï¼Œæ˜¯æˆ‘ä»¬åº”è¯¥èŠ±ç»å¤§å¤šæ•°æ—¶é—´å»å†™çš„éƒ¨åˆ†ï¼Œè€Œé›†æˆæµ‹è¯•ç­‰åº”è¯¥æ˜¯å†°å±±ä¸Šé¢èƒ½çœ‹è§çš„é‚£ä¸€å°éƒ¨åˆ†ã€‚ ä¸ºä»€ä¹ˆæ˜¯è¿™æ ·å‘¢ï¼Ÿå› ä¸ºé›†æˆæµ‹è¯•è®¾ç½®èµ·æ¥å¾ˆéº»çƒ¦ï¼Œè¿è¡Œèµ·æ¥å¾ˆæ…¢ï¼Œå‘ç°çš„bugå°‘ï¼Œåœ¨ä¿è¯ä»£ç è´¨é‡ã€æ”¹å–„ä»£ç è®¾è®¡æ–¹é¢æ›´èµ·ä¸åˆ°ä»»ä½•ä½œç”¨ï¼Œå› æ­¤å®ƒçš„é‡è¦ç¨‹åº¦å¹¶ä¸æ˜¯é‚£ä¹ˆé«˜ï¼Œä¹Ÿæ— æ³•å°†å®ƒçº³å…¥æˆ‘ä»¬æ­£å¸¸çš„å·¥ä½œæµç¨‹ä¸­ã€‚è€Œå•å…ƒæµ‹è¯•åˆ™åˆšå¥½ç›¸åï¼Œå®ƒè¿è¡Œé€Ÿåº¦è¶…å¿«ï¼Œèƒ½å‘ç°çš„bugæ›´å¤šï¼Œåœ¨å¼€å‘æ—¶èƒ½å¼•å¯¼æ›´å¥½çš„ä»£ç è®¾è®¡ï¼Œåœ¨é‡æ„æ—¶èƒ½ä¿è¯é‡æ„çš„æ­£ç¡®æ€§ï¼Œå› æ­¤å®ƒèƒ½ä¿è¯æˆ‘ä»¬çš„ä»£ç åœ¨ä¸€ä¸ªæ¯”è¾ƒé«˜çš„è´¨é‡æ°´å¹³ä¸Šã€‚åŒæ—¶å› ä¸ºè¿è¡Œé€Ÿåº¦å¿«ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“æŠŠå®ƒçº³å…¥åˆ°æˆ‘ä»¬æ­£å¸¸çš„å¼€å‘æµç¨‹ä¸­ã€‚è‡³äºä¸ºä»€ä¹ˆé›†æˆæµ‹è¯•å‘ç°çš„bugå°‘ï¼Œè€Œå•å…ƒæµ‹è¯•å‘ç°çš„bugå¤šï¼Œè¿™é‡Œä¹Ÿç¨ä½œè§£é‡Šï¼Œå› ä¸ºé›†æˆæµ‹è¯•ä¸èƒ½æµ‹è¯•åˆ°å…¶ä¸­æ¯ä¸ªç¯èŠ‚çš„æ¯ä¸ªæ–¹é¢ï¼ŒæŸä¸€ä¸ªé›†æˆæµ‹è¯•è¿è¡Œæ­£ç¡®äº†ï¼Œä¸ä»£è¡¨å¦ä¸€ä¸ªé›†æˆæµ‹è¯•ä¹Ÿèƒ½è¿è¡Œæ­£ç¡®ã€‚è€Œå•å…ƒæµ‹è¯•ä¼šæ¯”è¾ƒå®Œæ•´çš„æµ‹è¯•æ¯ä¸ªå•å…ƒçš„å„ç§ä¸åŒçš„çŠ¶å†µã€ä¸´ç•Œæ¡ä»¶ç­‰ç­‰ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæ¯ä¸€ä¸ªç¯èŠ‚æ˜¯å¯¹çš„ï¼Œé‚£ä¹ˆåœ¨å¾ˆå¤§çš„æ¦‚ç‡ä¸Šï¼Œæ•´ä¸ªæµç¨‹å°±æ˜¯å¯¹çš„ã€‚è™½ç„¶ä¸èƒ½ä¿è¯æ•´ä¸ªæµç¨‹100%ä¸€å®šæ˜¯å¯¹çš„ã€‚æ‰€ä»¥ï¼Œé›†æˆæµ‹è¯•éœ€è¦æœ‰ï¼Œä½†åº”è¯¥æ˜¯å°‘é‡ï¼Œå•å…ƒæµ‹è¯•æ˜¯æˆ‘ä»¬åº”è¯¥èŠ±é‡ç‚¹å»åšçš„äº‹æƒ…ã€‚ ä¸ºä»€ä¹ˆå¦‚ä½•ä½ åœ¨ç¼–å†™å•å…ƒæµ‹è¯•çš„æ—¶å€™å‘ç°å½“å‰ç±»ä¸å¥½æµ‹ï¼Œè¯´æ˜è¯¥ç±»è®¾è®¡æœ‰é—®é¢˜ æå‡è½¯ä»¶è´¨é‡ æ–¹ä¾¿é‡æ„ èŠ‚çº¦æ—¶é—´ æå‡ä»£ç è®¾è®¡ å¤šç§å·¥å…·JUnitJUnit4æ˜¯Javaç•Œç”¨çš„æœ€å¹¿æ³›çš„ä¸€ä¸ªåŸºç¡€æ¡†æ¶ã€‚ ä¸€ä¸ªæµ‹è¯•æ–¹æ³•åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ï¼š setup æ‰§è¡Œæ“ä½œ éªŒè¯ç»“æœ ä¸¾ä¸€ä¸ªğŸŒ°: public class LoginTest { Calculator mCalculator; @Before public void setup(){ mCalculator = new Calculator(); } @Test public void addTest() throws Exception { int sum = mCalculator.add(1,2); assertEquals(3,sum); } @Test @Ignore(&quot;not implemented yet&quot;) public void multiplyTest() throws Exception { int product = mCalculator.multiply(2,4); assertEquals(8,product); } } @Before : æ¯ä¸ªæµ‹è¯•å‡½æ•°åœ¨è°ƒç”¨ä¹‹å‰éƒ½ä¼šå…ˆè°ƒç”¨@Beforeæ³¨è§£çš„å‡½æ•°ï¼Œæ¯”å¦‚ addTest è¿è¡Œå‰ä¼šæ‰§è¡Œ setup , multiplyTest è¿è¡Œå‰ä¼šæ‰§è¡Œ setup,ç±»ä¼¼é€»è¾‘çš„è¿˜æœ‰@Afterã€@BeforeClassã€@AfterClassã€‚å³åœ¨è·‘ä¸€ä¸ªæµ‹è¯•ç±»çš„æ‰€æœ‰æµ‹è¯•æ–¹æ³•ä¹‹å‰ï¼Œä¼šæ‰§è¡Œä¸€ä¸ªè¢«@BeforeClassä¿®é¥°çš„å‡½æ•°ã€‚ @Ignore : å¦‚æœéœ€è¦å¿½ç•¥æŸäº›æ–¹æ³•å¯ä»¥ä½¿ç”¨è¯¥æ³¨è§£ï¼Œä¾‹å¦‚æ­£å¼ä»£ç è¿˜æ²¡æœ‰å®ç° @Test(expected = IllegalArgumentException.class) : è¡¨ç¤ºéªŒè¯è¿™ä¸ªæµ‹è¯•æ–¹æ³•å°†æŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœæ²¡æœ‰æŠ›å‡ºçš„è¯ï¼Œåˆ™æµ‹è¯•å¤±è´¥ã€‚ public class Calculator { public double divide(double divident,double dividor) { if (dividor == 0) throw new IllegalArgumentException(&quot;Dividor can't be 0&quot;); return divident / dividor; } } @Test(expected = IllegalArgumentException.class) public void test () { mCalculator.dividor(4,0); } Mock/MockitoMockæ˜¯åˆ›å»ºä¸€ä¸ªç±»çš„è™šå‡å¯¹è±¡ï¼Œåœ¨æµ‹è¯•ç¯å¢ƒä¸­ï¼Œç”¨æ¥æ›¿æ¢çœŸå®å¯¹è±¡ï¼Œä»¥è¾¾åˆ°ä¸¤ä¸ªç›®çš„ï¼š éªŒè¯è¿™ä¸ªå¯¹è±¡çš„æŸäº›æ–¹æ³•çš„è°ƒç”¨æƒ…å†µï¼Œè°ƒç”¨äº†å¤šå°‘æ¬¡ï¼Œå‚æ•°æ˜¯ä»€ä¹ˆ æŒ‡å®šè¿™ä¸ªå¯¹è±¡çš„æŸäº›æ–¹æ³•çš„è¡Œä¸ºï¼Œè¿”å›ç‰¹å®šçš„å€¼ï¼Œæˆ–è€…æ˜¯æ‰§è¡Œç‰¹å®šçš„åŠ¨ä½œ Mockitoæ˜¯æœ€Javaç•Œä½¿ç”¨æœ€å¹¿æ³›çš„Mockæ¡†æ¶ 1.éªŒè¯æ–¹æ³•è°ƒç”¨ @Test public void testLogin() throws Exception { UserManager mockUserManager = Mockito.mock(UserManager.class); LoginPresenter loginPresenter = new LoginPresenter(); loginPresenter.setUserManager(mockUserManager); //&lt;== loginPresenter.login(&quot;xiaochuang&quot;, &quot;xiaochuang password&quot;); Mockito.verify(mockUserManager).performLogin(&quot;xiaochuang&quot;, &quot;xiaochuang password&quot;); } å¦‚æœéœ€è¦éªŒè¯mockUserManagerçš„performLogin()å¾—åˆ°äº†è°ƒç”¨ï¼ŒåŒæ—¶å‚æ•°æ˜¯â€usernameâ€,â€passwordâ€ Mockito.verify(mockUserManager).performLogin(&quot;username&quot;,&quot;password&quot;); å½“ç„¶ä¹Ÿå¯ä»¥éªŒè¯è¯¥å‡½æ•°è°ƒç”¨æ¬¡æ•° Mockito.verify(mockUserManager, Mockito.times(3)).performLogin(...); //éªŒè¯mockUserManagerçš„performLoginå¾—åˆ°äº†ä¸‰æ¬¡è°ƒç”¨ã€‚ Mockito.verify(mockUserManager, Mockito.atLeast(3)).performLogin(...); //éªŒè¯mockUserManagerçš„performLoginæœ€å°‘å¾—åˆ°äº†ä¸‰æ¬¡è°ƒç”¨ã€‚ Mockito.verify(mockUserManager).performLogin(Mockito.anyString(),Mockito.anyString()); //å¹¶ä¸å…³å¿ƒå‚æ•°ï¼Œä»»æ„å‚æ•°çš†å¯ 2.æŒ‡å®šmockå¯¹è±¡çš„æŸäº›æ–¹æ³•çš„è¡Œä¸ºä¸¾ä¸€ä¸ªğŸŒ°ï¼š public void login(String username, String password) { if (username == null || username.length() == 0) return; //å‡è®¾æˆ‘ä»¬å¯¹å¯†ç å¼ºåº¦æœ‰ä¸€å®šè¦æ±‚ï¼Œä½¿ç”¨ä¸€ä¸ªä¸“é—¨çš„validatoræ¥éªŒè¯å¯†ç çš„æœ‰æ•ˆæ€§ if (mPasswordValidator.verifyPassword(password)) return; //&lt;== mUserManager.performLogin(null, password); } è¿™é‡Œæˆ‘ä»¬éœ€è¦PasswordValidatoræ¥éªŒè¯å¯†ç çš„æœ‰æ•ˆæ€§ï¼Œä½†æ˜¯è¿™ä¸ªç±»çš„verifyPassword()æ–¹æ³•éœ€è¦è”ç½‘ï¼Œå…¶å®æˆ‘ä»¬åªéœ€è¦ç»™ä¸€äº›é˜ˆå€¼åˆ¤æ–­å³å¯ï¼Œå› ä¸ºæˆ‘ä»¬è¦æµ‹çš„æ˜¯login()ï¼Œè·ŸPasswordValidatorå†…éƒ¨é€»è¾‘æ²¡æœ‰å…³ç³»ï¼Œè¿™æ‰æ˜¯å•å…ƒæµ‹è¯•çœŸæ­£è¯¥æœ‰çš„é¢—ç²’åº¦ï¼Œæ¯”å¦‚å¯ä»¥è¿™ä¹ˆå†™ï¼š //å…ˆåˆ›å»ºä¸€ä¸ªmockå¯¹è±¡ PasswordValidator mockValidator = Mockito.mock(PasswordValidator.class); //å½“è°ƒç”¨mockValidatorçš„verifyPasswordæ–¹æ³•ï¼ŒåŒæ—¶ä¼ å…¥&quot;xiaochuang_is_handsome&quot;æ—¶ï¼Œè¿”å›true Mockito.when(mockValidator.verifyPassword(&quot;xiaochuang_is_handsome&quot;)).thenReturn(true); //å½“è°ƒç”¨mockValidatorçš„verifyPasswordæ–¹æ³•ï¼ŒåŒæ—¶ä¼ å…¥&quot;xiaochuang_is_not_handsome&quot;æ—¶ï¼Œè¿”å›false Mockito.when(validator.verifyPassword(&quot;xiaochuang_is_not_handsome&quot;)).thenReturn(false); åˆæ¯”å¦‚æœ‰å¦‚ä¸‹é€»è¾‘: public void loginCallbackVersion(String username, String password) { if (username == null || username.length() == 0) return; //å‡è®¾æˆ‘ä»¬å¯¹å¯†ç å¼ºåº¦æœ‰ä¸€å®šè¦æ±‚ï¼Œä½¿ç”¨ä¸€ä¸ªä¸“é—¨çš„validatoræ¥éªŒè¯å¯†ç çš„æœ‰æ•ˆæ€§ if (mPasswordValidator.verifyPassword(password)) return; //loginçš„ç»“æœå°†é€šè¿‡callbackä¼ é€’å›æ¥ã€‚ mUserManager.performLogin(username, password, new NetworkCallback() { //&lt;== @Override public void onSuccess(Object data) { //update view with data } @Override public void onFailure(int code, String msg) { //show error msg } }); } æƒ³è¿›ä¸€æ­¥æµ‹è¯•ä¼ ç»™mUserManager.performLoginçš„NetworkCallbacké‡Œé¢çš„ä»£ç ï¼ŒéªŒè¯viewå¾—åˆ°äº†æ›´æ–°ï¼Œæµ‹è¯•ç¯å¢ƒé‡Œï¼Œæˆ‘ä»¬å¹¶ä¸æƒ³ä¾èµ–mUserManager.performLoginçš„çœŸå®é€»è¾‘ï¼Œè€Œæ˜¯è®©mUserManagerç›´æ¥è°ƒç”¨ä¼ å…¥çš„NetworkCallbackçš„onSuccessæˆ–onFailureæ–¹æ³•ï¼Œè¿™ç§æŒ‡å®šmockå¯¹è±¡æ‰§è¡Œç‰¹å®šçš„åŠ¨ä½œçš„å†™æ³•å¦‚ä¸‹ï¼šMockito.doAnswer(desiredAnswer).when(mockObject).targetMethod(args);ä¸¾ä¸€ä¸ªğŸŒ°ï¼š Mockito.doAnswer(new Answer() { @Override public Object answer(InvocationOnMock invocation) throws Throwable { //è¿™é‡Œå¯ä»¥è·å¾—ä¼ ç»™performLoginçš„å‚æ•° Object[] arguments = invocation.getArguments(); //callbackæ˜¯ç¬¬ä¸‰ä¸ªå‚æ•° NetworkCallback callback = (NetworkCallback) arguments[2]; callback.onFailure(500, &quot;Server error&quot;); return 500; } }).when(mockUserManager).performLogin(anyString(), anyString(), any(NetworkCallback.class));","link":"/2019/08/06/Android-Unit-Case/"},{"title":"ADTå®ç°çŠ¶æ€æ¨¡å¼","text":"ADT(ä»£æ•°æ•°æ®ç±»å‹)æ˜¯å‡½æ•°å¼è¯­éŸ³ä¸­ä¸€ç§å¼ºå¤§çš„è¯­è¨€ç‰¹æ€§ï¼Œè¿™æ¬¡ç”¨å®ƒæ¥å®ç°çŠ¶æ€æ¨¡å¼ çŠ¶æ€æ¨¡å¼ä¸ç­–ç•¥æ¨¡å¼å­˜åœ¨æŸäº›ç›¸ä¼¼æ€§ï¼Œå®ƒä»¬éƒ½å¯ä»¥å®ç°æŸç§ç®—æ³•ã€ä¸šåŠ¡é€»è¾‘çš„åˆ‡æ¢ã€‚ä»¥ä¸‹æ˜¯çŠ¶æ€æ¨¡å¼çš„å®šä¹‰ï¼š çŠ¶æ€æ¨¡å¼å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜çš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥ä¼¼ä¹ä¿®æ”¹äº†å®ƒçš„ç±»ã€‚ çŠ¶æ€æ¨¡å¼å…·ä½“è¡¨ç°åœ¨ï¼š çŠ¶æ€å†³å®šè¡Œä¸ºï¼Œå¯¹è±¡çš„è¡Œä¸ºç”±å®ƒå†…éƒ¨çš„çŠ¶æ€å†³å®š å¯¹è±¡çš„çŠ¶æ€åœ¨è¿è¡ŒæœŸè¢«æ”¹å˜æ—¶ï¼Œå®ƒçš„è¡Œä¸ºä¹Ÿä¼šå› æ­¤è€Œæ”¹å˜ã€‚ä»è¡¨é¢ä¸Šçœ‹ï¼ŒåŒä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨ä¸åŒçš„è¿è¡Œæ—¶åˆ»ï¼Œè¡Œä¸ºæ˜¯ä¸ä¸€æ ·çš„ï¼Œå°±åƒæ˜¯ç±»è¢«ä¿®æ”¹äº†ä¸€æ · å†æ¬¡ä¸ç­–ç•¥æ¨¡å¼åšå¯¹æ¯”ï¼Œç­–ç•¥æ¨¡å¼é€šè¿‡åœ¨å®¢æˆ·ç«¯åˆ‡æ¢ä¸åŒçš„ç­–ç•¥å®ç°æ¥æ”¹å˜ç®—æ³•ï¼›è€Œåœ¨çŠ¶æ€æ¨¡å¼ä¸­ï¼Œå¯¹è±¡é€šè¿‡ä¿®æ”¹å†…éƒ¨çš„çŠ¶æ€æ¥åˆ‡æ¢ä¸åŒçš„è¡Œä¸ºæ–¹æ³•ã€‚ ç°åœ¨æˆ‘ä»¬ä¸¾ä¸€ä¸ªé¥®æ°´æœºçš„ä¾‹å­ï¼Œå‡å¦‚ä¸€ä¸ªé¥®æ°´æœºæœ‰3ç§å·¥ä½œçŠ¶æ€ï¼Œåˆ†åˆ«ä¸ºæœªå¯åŠ¨ã€åˆ¶å†·æ¨¡å¼ã€åˆ¶çƒ­æ¨¡å¼ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨å¯†å°ç±»æ¥å°è£…ä¸€ä¸ªä»£è¡¨ä¸åŒé¥®æ°´æœºçŠ¶æ€çš„ADTã€‚ sealed class WaterMachineState(open val machine: WaterMachine) { fun turnHeating() { if (this !is Heating) { print(&quot;turn heating&quot;) machine.state = machine.heating } else { print(&quot;The state is already heating mode.&quot;) } } fun turnCooling() { if (this !is Cooling) { print(&quot;turn cooling&quot;) machine.state = machine.cooling } else { print(&quot;The state is already cooling mode.&quot;) } } fun turnOff() { if (this !is Off) { print(&quot;turn off&quot;) machine.state = machine.off } else { print(&quot;The state is already off mode.&quot;) } } } class Off(override val machine: WaterMachine) : WatermachineState(machine) class Heating(override val machine: WaterMachine) : WatermachineState(machine) class Cooling(override val machine: WaterMachine) : WatermachineState(machine) ä»¥ä¸Šä»£ç åˆ†æï¼š WatermachineStateæ˜¯ä¸€ä¸ªå¯†å°ç±»ï¼Œæ‹¥æœ‰ä¸€ä¸ªæ„é€ å‚æ•°ä¸ºWaterMachineç±»å¯¹è±¡ åœ¨WatermachineStateç±»å¤–éƒ¨æˆ‘ä»¬åˆ†åˆ«å®šä¹‰äº†Off,Heating,Coolingæ¥ä»£è¡¨é¥®æ°´æœºçš„3ç§ä¸åŒçš„å·¥ä½œçŠ¶æ€ï¼Œå®ƒä»¬éƒ½ç»§æ‰¿äº†WaterMachineStateç±»çš„machineæˆå‘˜å±æ€§åŠ3ä¸ªçŠ¶æ€åˆ‡æ¢çš„æ–¹æ³• åœ¨æ¯ä¸ªåˆ‡æ¢çŠ¶æ€çš„æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æ”¹å˜machineå¯¹è±¡çš„stateï¼Œæ¥å®ç°åˆ‡æ¢é¥®æ°´æœºçŠ¶æ€çš„ç›®çš„ æ¥ç€çœ‹WaterMachineç±»ï¼š class WaterMachine { var state: WaterMachineState val off = Off(this) val heating = Heating(this) val cooling = Cooling(this) init { this.state = off } fun turnHeating() { this.state.turnHeating() } fun turnCooling() { this.state.turnCooling() } fun turnOff() { this.state.turnOff() } } WaterMachineå¾ˆç®€å•ï¼Œå†…éƒ¨ä¸»è¦åŒ…å«äº†ä¸€ä¸‹æˆå‘˜å±æ€§å’Œæ–¹æ³•ï¼š å¼•ç”¨å¯å˜çš„WaterMachineStateç±»å¯¹è±¡stateï¼Œç”¨æ¥è¡¨ç¤ºå½“å‰é¥®æ°´æœºæ‰€å¤„çš„å·¥ä½œçŠ¶æ€ åˆ†åˆ«è¡¨ç¤º3ç§ä¸åŒçŠ¶æ€çš„æˆå‘˜å±æ€§ï¼Œoffã€heatingã€coolingï¼Œå®ƒä»¬ä¹Ÿæ˜¯WaterMahineStateç±»çš„3ç§å­ç±»å¯¹è±¡ï¼›å®ƒä»¬é€šè¿‡ä¼ å…¥thisè¿›è¡Œæ„é€ ï¼Œä»è€Œå®ç°åœ¨WaterMachineStateçŠ¶æ€ç±»å†…éƒ¨ï¼Œæ”¹å˜WaterMachineç±»çš„stateå¼•ç”¨å€¼ï¼›å½“WaterMachineç±»å¯¹è±¡åˆå§‹åŒ–æ—¶ï¼Œstateé»˜è®¤ä¸ºoffï¼Œå³é¥®æ°´æœºå¤„äºæœªå¯åŠ¨çŠ¶æ€ 3ä¸ªç›´æ¥è°ƒç”¨çš„é¥®æ°´æœºæ“ä½œæ–¹æ³•ï¼Œåˆ†åˆ«æ‰§è¡Œå¯¹åº”stateå¯¹è±¡çš„3ç§æ“ä½œï¼Œä¾›å®¢æˆ·ç«¯è°ƒç”¨ å¦‚æœåŠå…¬å®¤çš„å°ä¼™ä¼´éƒ½å–œæ¬¢å–å†·æ°´ï¼Œæ—©ä¸Šä¸€æ¥å°±ä¼šæŠŠé¥®æ°´æœºè°ƒæ•´ä¸ºåˆ¶å†·æ¨¡å¼ï¼Œä½†Shawæœ‰åƒæ³¡é¢çš„ä¹ æƒ¯ï¼Œä»–æƒ³æ³¡é¢çš„æ—¶å€™ï¼Œå°±ä¼šæŠŠé¥®æ°´æœºå˜ä¸ºåˆ¶çƒ­ï¼Œæ‰€ä»¥æ¯æ¬¡ä»–åƒäº†æ³¡é¢ï¼Œä¸‹ä¸€ä¸ªå–æ°´çš„åŒäº‹å°±éœ€è¦å†åˆ‡æ¢å›åˆ¶å†·ã€‚æœ€åè¦ä¸‹ç­äº†ï¼ŒKimå°±ä¼šå…³é—­é¥®æ°´æœºçš„ç”µæºã€‚ ä¸ºäº†æ»¡è¶³è¿™ä¸€éœ€æ±‚ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªwaterMachineOpså‡½æ•°ï¼š enum class Moment { EARLY_MORNING, DRINKING_WATER, INSTANCE_NOODLES, AFTER_WORK } fun waterMachineOps(machine: WaterMachine,moment: Moment) { when(moment) { EARLY_MORNING, DRINKING_WATER -&gt; when(machine.state) { !is WatermachineState.Cooling -&gt;machine.turnCooling() } INSTANCE_NOODLES -&gt; when(machine.state) { !is WatermachineState.Heating -&gt; machine.turnHeating() } AFTER_WORK -&gt; when(machine.state) { !is WatermachineState.Off -&gt; machine.turnOff() } } } è¿™ä¸ªæ–¹æ³•å¾ˆå¥½åœ°å¤„ç†äº†ä¸åŒè§’è‰²åœ¨ä¸åŒéœ€æ±‚åœºæ™¯ä¸‹ï¼Œåº”è¯¥å¯¹é¥®æ°´æœºæ‰§è¡Œçš„ä¸åŒæ“ä½œã€‚æ­¤å¤–ï¼Œå½“ç”¨whenè¡¨è¾¾å¼å¤„ç†æšä¸¾ç±»æ—¶ï¼Œé»˜è®¤çš„æƒ…å†µå¿…é¡»ç”¨elseè¿›è¡Œå¤„ç†ã€‚ç„¶è€Œï¼Œç”±äºå¯†å°ç±»åœ¨ç±»å‹å®‰å…¨ä¸Šçš„é¢å¤–è®¾è®¡ï¼Œæˆ‘ä»¬åœ¨å¤„ç†machineå¯¹è±¡çš„stateå¯¹è±¡æ—¶ï¼Œåˆ™ä¸éœ€è¦è€ƒè™‘è¿™ä¸€ç»†èŠ‚ï¼Œåœ¨è¯­è¨€è¡¨è¾¾ä¸Šè¦ç®€æ´å¾—å¤šã€‚","link":"/2020/01/21/ADT%E5%AE%9E%E7%8E%B0%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/"},{"title":"Filamentå®ç°ç®€æ˜“Animoji","text":"Animojiæ˜¯é¦–å…ˆç”±è‹¹æœæå‡ºçš„å¢å¼ºç°å®è¡¨æƒ…åŒ…ï¼Œåˆ©ç”¨æ‘„åƒå¤´æ•æ‰åˆ°çš„é¢éƒ¨ç‰¹å¾ç‚¹ï¼ŒåŠéº¦å…‹é£è®°å½•çš„å£°éŸ³ï¼Œæœ€ç»ˆç”Ÿæˆçš„3DåŠ¨ç”»è¡¨æƒ…ã€‚æˆ‘ä»¬å°è¯•åœ¨Androidä¸Šå®ç°ç±»ä¼¼çš„æ•ˆæœï¼Œäºæ˜¯æœ‰äº†è¿™ç¯‡æ–‡ç« è®°å½•æŠ€æœ¯é‡ç‚¹ã€‚ ç‰¹å¾ç‚¹æ•æ‰æ¨¡å‹é€‰ç”¨Face meshï¼ˆå¦‚æœå¯¹çœ¼çƒè½¬åŠ¨æœ‰æ•æ‰è¦æ±‚å¯ä»¥ä½¿ç”¨Irisï¼‰ï¼Œè°·æ­Œç»™å‡ºäº†å…¶æ•æ‰çš„468ä¸ªç‰¹å¾ç‚¹åæ ‡å›¾ï¼Œæˆ‘ä»¬åœ¨æ‰¾åˆ°éœ€è¦çš„ç‰¹å¾ç‚¹åï¼Œé€šè¿‡å‡æ³•å¾—åˆ°è¡¨æƒ…å€¼å¤§å°ï¼Œä»è€Œè®¡ç®—å‡ºåŠ æƒé¡¶ç‚¹åæ ‡ä½ç½®å¯¹åº”çš„æ¨¡å‹æ•ˆæœã€‚ åœ¨ç¥ç»ç½‘ç»œæ¨ç†æ¡†æ¶çš„é€‰æ‹©ä¸Šï¼Œncnnç›¸å¯¹äºMediaPipeæœ‰æ›´é«˜çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œä½†æ˜¯å…¶cameraç›¸å…³åŠŸèƒ½ä½¿ç”¨camera2NDKï¼Œéƒ¨åˆ†æœºå‹åº•å±‚å¹¶ä¸æ”¯æŒä»¥è‡³äºå‡ºç°é»‘å±ç°è±¡ï¼Œæ‰€ä»¥è€ƒè™‘åˆ°demoçš„å®ç°æ•ˆç‡ï¼Œæˆ‘ä»¬é€‰ç”¨mediapipeï¼Œè‹¥æƒ³æŠŠæ­¤åŠŸèƒ½è¿ç”¨åœ¨å•†ä¸šäº§å“ä¸Šï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ncnnå¹¶æ›¿æ¢åˆ°cameraéƒ¨åˆ†å®ç°ã€‚ irisåœ¨face meshåŸºç¡€ä¸Šå¢åŠ äº†Irisåœ°æ ‡æ¨¡å‹ï¼Œå¦‚ä¸‹å›¾3dè¡¨æƒ…çœ¼ç çš„åŒºåˆ«ï¼š iris vs face_mesh 3Då¼•æ“æ¸²æŸ“å·¥å…·æˆ‘ä»¬é€‰æ‹©Filamentä½œä¸º3Dæ¨¡å‹æ¸²æŸ“åº“ï¼Œä¸€æ˜¯å…¶ç”¨äºAndroidè®¾å¤‡ä¸Šçš„Sceneformåº“ä¸­å®ç°ARCoreï¼ŒäºŒæ˜¯å…¶ä¼˜ç§€çš„3Dæ¸²æŸ“æ•ˆæœåŠä½è€—èƒ½ã€‚å½“ç„¶æˆ‘ä»¬å› ä¸ºä¸å¯æŠ—æ‹’å› ç´ æ— æ³•ç›´æ¥ä½¿ç”¨ARCoreï¼Œå¯¹Filamentçš„å­¦ä¹ åŠ¿åœ¨å¿…è¡Œã€‚ Filamentä¸ä»…æœ‰è‡ªå·±çš„æ¨¡å‹æ ¼å¼ï¼Œä¸”æ”¯æŒglb/gltfï¼Œå¹¶ä¸”æä¾›apiæ“ä½œèŠ‚ç‚¹ï¼Œåœ¨åˆæ­¥äº†è§£å…‰ç…§ã€å¤©ç©ºç›’ç­‰æ¦‚å¿µåï¼Œå¼€å§‹ç¼–å†™demoã€‚ ä»æ‘„åƒå¤´è·å–é¢éƒ¨æ¨¡å‹Mediapipeå·²ç»æŠŠcameraæ•°æ®è½¬æ¢æˆäº†textureFrameï¼Œè¿›è€Œè§¦å‘filamentæ¸²æŸ“æ¨¡å‹ã€‚filament demoæä¾›çš„Choreographerè§¦å‘æ–¹å¼åœ¨æ­¤æ˜¯è¡Œä¸é€šçš„ï¼Œå‚ç›´åŒæ­¥æ—¶é—´æˆ³å·²ç»æ˜¯æœ€å°åˆ·æ–°é—´éš”ï¼ŒåŒæ—¶ä½¿ç”¨ä¼šå‡ºç°ä¸¥é‡çš„å¡é¡¿é—®é¢˜ã€‚ ä»ç‰¹å¾ç‚¹åˆ°3Dæ¨¡å‹é‚£ä¹ˆå¦‚ä½•æŠŠæ¨¡å‹æ•æ‰åˆ°çš„ç‰¹å¾ç‚¹è½¬åŒ–ä¸º3Dè¡¨æƒ…å‘¢ï¼Ÿè¿™é‡Œä»¥å¼ å˜´ä¸ºä¾‹ï¼Œè®¾è®¡ç»™å‡ºçš„GLBæ–‡ä»¶å·²ç»å®šä¹‰å¥½å˜´éƒ¨åŠ¨ä½œçš„æƒé‡ï¼Œå¦‚â€weightsâ€ { &quot;extras&quot;: { &quot;targetNames&quot;: [ &quot;xx&quot; ] }, &quot;name&quot;: &quot;mouth&quot;, &quot;primitives&quot;: [ { &quot;attributes&quot;: { &quot;POSITION&quot;: 0, &quot;NORMAL&quot;: 1 }, &quot;indices&quot;: 2, &quot;material&quot;: 0, &quot;targets&quot;: [ { &quot;POSITION&quot;: 3, &quot;NORMAL&quot;: 4 } ] } ], &quot;weights&quot;: [ 1 ] }, å¯ä»¥çœ‹åˆ°â€weightsâ€æƒé‡é»˜è®¤ä¸º1ï¼Œæˆ‘ä»¬é€šè¿‡è·å–ç‰¹å¾ç‚¹åæ ‡17ã€0å¤„yè½´åæ ‡å€¼ï¼Œè½¬æ¢ndcåæ ‡åï¼Œåšå‡æ³•å¾—å‡ºå˜´å·´å¼ å¼€åº¦ï¼Œä»ä½•è·å–å…¶æƒé‡ val landmarkList = faceMeshResult.multiFaceLandmarks()[0] (landmarkList.getLandmark(17).y - 1) * PROJECTION_SCALE - (landmarkList.getLandmark(0).y - 1) * PROJECTION_SCALE Filamentè°ƒç”¨setMorphWeightsè®¾ç½®mouthèŠ‚ç‚¹æƒé‡ï¼Œä»è€Œå®ç°å˜´éƒ¨çš„å¼€é—­ã€‚ modelViewer.engine.renderableManager.setMorphWeights( modelViewer.engine.renderableManager.getInstance(modelViewer.asset!!.getFirstEntityByName(&quot;mouth&quot;)), floatArrayOf(1 - 5f * mouthHeight, 0f, 0f, 0f), 0 ) åœ¨é•œå¤´å‰éœ€è¦ç§»åŠ¨å¤´éƒ¨æ¨¡å‹ï¼Œé‚£ä¹ˆå¦‚ä½•å®ç°æ¨¡å‹çš„ç§»åŠ¨å‘¢ï¼Œæˆ‘ä»¬å†³å®šé€‰ç”¨é¼»å­é¡¶éƒ¨åæ ‡æ¥æ˜ å°„æ¨¡å‹ç§»åŠ¨,å³94å¤„åæ ‡ã€‚ Matrix.setIdentityM(transformMatrix, 0) Matrix.rotateM(transformMatrix, 0, 180f, 0f, 4f, 0f) Matrix.translateM(transformMatrix, 0, 0f, 0f, 4f) Matrix.translateM( transformMatrix, 0, -(noseCoord.x - ratio) * PROJECTION_SCALE, -(noseCoord.y - ratio) * PROJECTION_SCALE, 0f ) Filamentä½¿ç”¨setTransformå³å¯å®ç°æ¨¡å‹ç§»åŠ¨ï¼Œå¦‚ä¸Šå¯å®ç°ç®€æ˜“çš„animojiæ•ˆæœã€‚","link":"/2022/07/25/Filament%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93Animoji/"},{"title":"Espresso","text":"Androidå•å…ƒæµ‹è¯•å®˜æ–¹supportåŒ…Espressoä½¿ç”¨ ä¸å‡†å¤‡åšç³»ç»ŸåŒ–çš„Apiæ¢³ç†å®˜æ–¹æ–‡æ¡£é‡Œé¢å·²ç»å¾ˆè¯¦ç»†è¯´æ˜äº†Espressoï¼Œè¿™é‡Œä¼šç´¯è®¡ä¸€äº›å‘æˆ–è€…ç»†èŠ‚ã€‚ intended/intendingintended Asserts that the given matcher matches one and only one intent sent by the application under test. This is an equivalent of verify(mock, times(1)) in Mockito. Verification does not have to occur in the same order as the intents were sent. Intents are recorded from the time that Intents.init is called. æ–­è¨€åªä¼šç»™matcheråŒ¹é…ä¸€ä¸ªä¸”åªæœ‰ä¸€ä¸ªç”±applicationå‘æ¥çš„intentã€‚ç±»ä¼¼äºMockitoä¸­çš„verify(mock,times(1))å‡½æ•°,éªŒè¯è¿‡ç¨‹ä¸éœ€è¦æŒ‰ç…§å‘é€intentçš„ç›¸åŒé¡ºåºè¿›è¡Œï¼Œä»Intent.initå¼€å§‹è®°å½•ã€‚ intending Enables stubbing intent responses. This method is similar to Mockito.when and is particularly useful when the activity launching the intent expects data to be returned (and especially in the case when the destination activity is external). In this case, the test author can call intending(matcher).thenRespond(myResponse) and validate that the launching activity handles the result correctly. Note: the destination activity will not be launched. æ‰“å¼€stubbing Intentå“åº”,ç±»ä¼¼äºMockitoã€‚å½“æ‹‰èµ·Activityï¼Œå¹¶é¢„è®¡æœ‰Intentè¿”å›æ—¶ï¼ˆç‰¹åˆ«æ˜¯å½“ç›®æ ‡Acticityæ˜¯å¤–éƒ¨Acticityæ—¶ï¼‰ï¼Œç‰¹åˆ«æœ‰ç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæµ‹è¯•è€…å¯ä»¥è°ƒç”¨intending(matcher).thenRespond(myResponse)å¹¶éªŒè¯æ‹‰èµ·Activityæ˜¯å¦æ­£ç¡®å¤„ç†ç»“æœã€‚Note:ç›®æ ‡Activityå°†ä¸ä¼šå¯åŠ¨ã€‚","link":"/2019/08/07/Espresso/"},{"title":"Dive Into Flutter","text":"é¦–å…ˆä»è¿‡å»çš„CRTæ˜¾ç¤ºå™¨åŸç†è¯´èµ·ã€‚CRTçš„ç”µå­æªæŒ‰ç…§ä¸Šé¢æ–¹å¼ï¼Œä»ä¸Šåˆ°ä¸‹ä¸€è¡Œè¡Œæ‰«æï¼Œæ‰«æå®Œæˆåæ˜¾ç¤ºå™¨å°±å‘ˆç°ä¸€å¸§ç”»é¢ï¼Œéšåç”µå­æªå›åˆ°åˆå§‹ä½ç½®ç»§ç»­ä¸‹ä¸€æ¬¡æ‰«æã€‚ä¸ºäº†æŠŠæ˜¾ç¤ºå™¨çš„æ˜¾ç¤ºè¿‡ç¨‹å’Œç³»ç»Ÿçš„è§†é¢‘æ§åˆ¶å™¨è¿›è¡ŒåŒæ­¥ï¼Œæ˜¾ç¤ºå™¨ï¼ˆæˆ–å…¶ä»–ç¡¬ä»¶ï¼‰ä¼šç”¨ç¡¬ä»¶æ—¶é’Ÿäº§ç”Ÿä¸€ç³»åˆ—çš„å®šæ—¶ä¿¡å·ã€‚å½“ç”µå­æªæ¢åˆ°æ–°çš„ä¸€è¡Œï¼Œå‡†å¤‡è¿›è¡Œæ‰«ææ—¶ï¼Œæ˜¾ç¤ºå™¨ä¼šå‘å‡ºä¸€ä¸ªæ°´å¹³åŒæ­¥ä¿¡å·ï¼ˆhorizonal synchronizationï¼‰ï¼Œç®€ç§°HSyncï¼›è€Œå½“ä¸€å¸§ç”»é¢ç»˜åˆ¶å®Œæˆåï¼Œç”µå­æªå›å¤åˆ°åŸä½ï¼Œå‡†å¤‡ç”»ä¸‹ä¸€å¸§å‰ï¼Œæ˜¾ç¤ºå™¨ä¼šå‘å‡ºä¸€ä¸ªå‚ç›´åŒæ­¥ä¿¡å·ï¼ˆvertial synchronizationï¼‰ï¼Œç®€ç§°VSyncã€‚æ˜¾ç¤ºå™¨é€šå¸¸ä»¥å›ºå®šé¢‘ç‡è¿›è¡Œåˆ·æ–°ï¼Œè¿™ä¸ªåˆ·æ–°ç‡å°±æ˜¯VSyncä¿¡å·äº§ç”Ÿçš„é¢‘ç‡ã€‚å°½ç®¡ç°åœ¨çš„è®¾å¤‡å¤§éƒ½æ˜¯æ¶²æ™¶æ˜¾ç¤ºå±äº†ï¼Œä½†åŸç†ä»ç„¶æ²¡æœ‰å˜ã€‚ åŸç†å±å¹•æ˜¾ç¤ºå›¾ç‰‡çš„åŸç† é¦–å…ˆä»è¿‡å»çš„CRTæ˜¾ç¤ºå™¨åŸç†è¯´èµ·ã€‚CRTçš„ç”µå­æªæŒ‰ç…§ä¸Šé¢æ–¹å¼ï¼Œä»ä¸Šåˆ°ä¸‹ä¸€è¡Œè¡Œæ‰«æï¼Œæ‰«æå®Œæˆåæ˜¾ç¤ºå™¨å°±å‘ˆç°ä¸€å¸§ç”»é¢ï¼Œéšåç”µå­æªå›åˆ°åˆå§‹ä½ç½®ç»§ç»­ä¸‹ä¸€æ¬¡æ‰«æã€‚ä¸ºäº†æŠŠæ˜¾ç¤ºå™¨çš„æ˜¾ç¤ºè¿‡ç¨‹å’Œç³»ç»Ÿçš„è§†é¢‘æ§åˆ¶å™¨è¿›è¡ŒåŒæ­¥ï¼Œæ˜¾ç¤ºå™¨ï¼ˆæˆ–å…¶ä»–ç¡¬ä»¶ï¼‰ä¼šç”¨ç¡¬ä»¶æ—¶é’Ÿäº§ç”Ÿä¸€ç³»åˆ—çš„å®šæ—¶ä¿¡å·ã€‚å½“ç”µå­æªæ¢åˆ°æ–°çš„ä¸€è¡Œï¼Œå‡†å¤‡è¿›è¡Œæ‰«ææ—¶ï¼Œæ˜¾ç¤ºå™¨ä¼šå‘å‡ºä¸€ä¸ªæ°´å¹³åŒæ­¥ä¿¡å·ï¼ˆhorizonal synchronizationï¼‰ï¼Œç®€ç§°HSyncï¼›è€Œå½“ä¸€å¸§ç”»é¢ç»˜åˆ¶å®Œæˆåï¼Œç”µå­æªå›å¤åˆ°åŸä½ï¼Œå‡†å¤‡ç”»ä¸‹ä¸€å¸§å‰ï¼Œæ˜¾ç¤ºå™¨ä¼šå‘å‡ºä¸€ä¸ªå‚ç›´åŒæ­¥ä¿¡å·ï¼ˆvertial synchronizationï¼‰ï¼Œç®€ç§°VSyncã€‚æ˜¾ç¤ºå™¨é€šå¸¸ä»¥å›ºå®šé¢‘ç‡è¿›è¡Œåˆ·æ–°ï¼Œè¿™ä¸ªåˆ·æ–°ç‡å°±æ˜¯VSyncä¿¡å·äº§ç”Ÿçš„é¢‘ç‡ã€‚å°½ç®¡ç°åœ¨çš„è®¾å¤‡å¤§éƒ½æ˜¯æ¶²æ™¶æ˜¾ç¤ºå±äº†ï¼Œä½†åŸç†ä»ç„¶æ²¡æœ‰å˜ã€‚ é€šå¸¸æ¥è¯´ï¼Œè®¡ç®—æœºç³»ç»Ÿä¸­CPU,GPU,æ˜¾ç¤ºå™¨æ˜¯ä»¥ä¸Šé¢è¿™ç§æ–¹å¼ååŒå·¥ä½œçš„ã€‚CPUè®¡ç®—å¥½æ˜¾ç¤ºå†…å®¹æäº¤åˆ°GPU,GPUæ¸²æŸ“å®Œæˆåå°†æ¸²æŸ“ç»“æœæ”¾å…¥å¸§ç¼“å†²åŒºï¼Œéšåè§†é¢‘æ§åˆ¶å™¨ä¼šæŒ‰ç…§VSyncä¿¡å·é€è¡Œè¯»å–å¸§ç¼“å†²åŒºçš„æ•°æ®ï¼Œç»è¿‡å¯èƒ½çš„æ•°æ¨¡è½¬æ¢ä¼ é€’ç»™æ˜¾ç¤ºå™¨æ˜¾ç¤ºã€‚CPUå’ŒGPUçš„ä»»åŠ¡æ˜¯å„æœ‰åé‡çš„ï¼ŒCPUä¸»è¦ç”¨äºåŸºæœ¬æ•°å­¦å’Œé€»è¾‘è®¡ç®—ï¼Œè€ŒGPUä¸»è¦æ‰§è¡Œå’Œå›¾å½¢å¤„ç†ç›¸å…³çš„å¤æ‚çš„æ•°å­¦ï¼Œå¦‚çŸ©é˜µå˜åŒ–å’Œå‡ ä½•è®¡ç®—ï¼ŒGPUçš„ä¸»è¦ä½œç”¨å°±æ˜¯ç¡®å®šæœ€ç»ˆè¾“é€ç»™æ˜¾ç¤ºå™¨çš„å„ä¸ªåƒç´ ç‚¹çš„è‰²å€¼ã€‚ åœ¨æœ€ç®€å•çš„æƒ…å†µä¸‹ï¼Œå¸§ç¼“å­˜åŒºåªæœ‰ä¸€ä¸ªï¼Œè¿™æ—¶å¸§ç¼“å­˜åŒºçš„è¯»å–å’Œåˆ·æ–°éƒ½ä¼šæœ‰æ¯”è¾ƒå¤§çš„æ•ˆç‡é—®é¢˜ã€‚ä¸ºäº†è§£å†³æ•ˆç‡é—®é¢˜ï¼Œæ˜¾ç¤ºç³»ç»Ÿé€šå¸¸ä¼šå¼•å…¥ä¸¤ä¸ªç¼“å†²åŒºï¼Œè®©è§†é¢‘æ§åˆ¶å™¨è¯»å–ï¼Œå½“ä¸‹ä¸€å¸§æ¸²æŸ“å¥½åï¼ŒGPUä¼šç›´æ¥æŠŠè§†é¢‘æ§åˆ¶å™¨çš„æŒ‡é’ˆæŒ‡å‘ç¬¬äºŒä¸ªç¼“å†²å™¨ã€‚å¦‚æ­¤ä¸€æ¥æ•ˆç‡ä¼šæœ‰å¾ˆå¤§çš„æé«˜ã€‚ åŒç¼“å†²è™½ç„¶èƒ½è§£å†³æ•ˆç‡é—®é¢˜ï¼Œä½†ä¼šå¼•å…¥ä¸€ä¸ªæ–°çš„é—®é¢˜ã€‚å½“è§†é¢‘æ§åˆ¶å™¨è¿˜æœªè¯»å–å®Œæˆæ—¶ï¼Œå³å±å¹•å†…å®¹åˆšæ˜¾ç¤ºä¸€åŠæ—¶ï¼ŒGPUå°†æ–°çš„ä¸€å¸§å†…å®¹æäº¤åˆ°å¸§ç¼“å­˜åŒºå¹¶æŠŠä¸¤ä¸ªç¼“å†²åŒºè¿›è¡Œäº¤æ¢åï¼Œè§†é¢‘æ§åˆ¶å™¨å°±ä¼šæŠŠæ–°çš„ä¸€å¸§æ•°æ®çš„ä¸‹åŠæ®µæ˜¾ç¤ºåˆ°å±å¹•ä¸Šï¼Œé€ æˆç”»é¢æ’•è£‚ç°è±¡ï¼Œå¦‚ä¸‹å›¾ï¼š ![dive_into_flutter_vsync_off](/images/dive_into_flutter_vsync_off.jpg ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒGPUé€šå¸¸æœ‰ä¸€ä¸ªæœºåˆ¶å«åšå‚ç›´åŒæ­¥ï¼ˆç®€å†™ä¹Ÿæ˜¯V-Syncï¼‰ï¼Œå½“å¼€å¯å‚ç›´åŒæ­¥åï¼ŒGPUä¼šç­‰å¾…æ˜¾ç¤ºå™¨çš„VSyncä¿¡å·å‘å‡ºåï¼Œæ‰è¿›è¡Œæ–°çš„ä¸€å¸§æ¸²æŸ“å’Œç¼“å­˜åŒºæ›´æ–°ã€‚è¿™æ ·èƒ½è§£å†³ç”»é¢æ’•è£‚ç°è±¡ï¼Œä¹Ÿå¢åŠ äº†ç”»é¢æµç•…åº¦ï¼Œä½†éœ€è¦æ¶ˆè´¹æ›´å¤šçš„è®¡ç®—èµ„æºï¼Œä¹Ÿä¼šå¸¦æ¥éƒ¨åˆ†å»¶è¿Ÿã€‚ é‚£ä¹ˆç›®å‰ä¸»æµçš„ç§»åŠ¨è®¾å¤‡æ˜¯ä»€ä¹ˆæƒ…å†µï¼Ÿä»ç½‘ä¸ŠæŸ¥åˆ°çš„èµ„æ–™å¯ä»¥çŸ¥é“ï¼ŒiOSè®¾å¤‡ä¼šå§‹ç»ˆä½¿ç”¨åŒç¼“å­˜ï¼Œå¹¶å¼€å¯å‚ç›´åŒæ­¥ã€‚è€Œå®‰å“è®¾å¤‡åˆ°4.1ç‰ˆæœ¬ï¼ŒGoogleæ‰å¼€å§‹å¼•å…¥è¿™ç§æœºåˆ¶ï¼Œç›®å‰å®‰å“ç³»ç»Ÿæ˜¯ä¸‰ç¼“å­˜+å‚ç›´åŒæ­¥ã€‚ å½“VSyncä¿¡å·åˆ°æ¥åï¼Œç³»ç»Ÿå›¾å½¢æœåŠ¡ä¼šé€šè¿‡CADisplayLink(iOS),ViewTreeObserver(Android)ç­‰æœºåˆ¶é€šçŸ¥Appï¼ŒAppä¸»çº¿ç¨‹å¼€å§‹åœ¨CPUä¸­è®¡ç®—æ˜¾ç¤ºå†…å®¹ï¼Œæ¯”å¦‚è§†å›¾çš„åˆ›å»ºã€å¸ƒå±€è®¡ç®—ã€å›¾ç‰‡è§£ç ã€æ–‡æœ¬ç»˜åˆ¶ç­‰ã€‚éšåCPUä¼šå°†è®¡ç®—å¥½çš„å†…å®¹æäº¤åˆ°GPUå»ï¼Œç”±GPUè¿›è¡Œå˜åŒ–ã€åˆæˆã€æ¸²æŸ“ã€‚éšåGPUä¼šæŠŠæ¸²æŸ“ç»“æœæäº¤åˆ°å¸§ç¼“å†²åŒºå»ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡VSyncä¿¡å·åˆ°æ¥æ—¶æ˜¾ç¤ºåˆ°å±å¹•ä¸Šã€‚ç”±äºå‚ç›´åŒæ­¥çš„æœºåˆ¶ï¼Œå¦‚æœåœ¨ä¸€ä¸ªVSyncæ—¶é—´å†…ï¼ŒCPUæˆ–è€…GPUæ²¡æœ‰å®Œæˆå†…å®¹æäº¤ï¼Œåˆ™é‚£ä¸€å¸§å°±ä¼šè¢«ä¸¢å¼ƒï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡æœºä¼šå†æ˜¾ç¤ºï¼Œè€Œè¿™æ—¶æ˜¾ç¤ºå±ä¼šä¿ç•™ä¹‹å‰çš„å†…å®¹ä¸å˜ã€‚è¿™å°±æ˜¯ç•Œé¢å¡é¡¿çš„åŸå› ã€‚ å¡é¡¿äº§ç”Ÿçš„åŸå› å’Œè§£å†³æ–¹æ¡ˆå‚è€ƒ:iOSä¿æŒç•Œé¢æµç•…çš„æŠ€å·§","link":"/2019/08/09/Dive-Into-Flutter/"},{"title":"MAC adbæ— çº¿è¿æ¥AndroidçœŸæœº","text":"ä¸€ç›´æ‡’å¾—æï¼Œå› ä¸ºç”¨ä¸ä¸Šï¼Œæœ€è¿‘é…ç½®äº†åŒå±ï¼Œç¬é—´usbæ’å£ä¸å¤Ÿç”¨ï¼Œäºæ˜¯æœ‰äº†ä¸‹æ–‡ã€‚ ä¸€ç›´æ‡’å¾—æï¼Œå› ä¸ºç”¨ä¸ä¸Šï¼Œæœ€è¿‘é…ç½®äº†åŒå±ï¼Œç¬é—´usbæ’å£ä¸å¤Ÿç”¨äº†ï¼Œäºæ˜¯å°±æœ‰äº†ä¸‹æ–‡ã€‚ å‡†å¤‡å·¥ä½œ æ‰‹æœºå’Œç”µè„‘éœ€è¦å†åŒä¸€ä¸ªå±€åŸŸç½‘ ç”µè„‘ä¸Šå·²ç»å®‰è£…adbå·¥å…·ã€‚ å¼€å§‹æ‰“å¼€æ‰‹æœºç«¯å£è®©æ‰‹æœºåœ¨æŒ‡å®šçš„ç«¯å£å¯ä»¥æ¥æ”¶åˆ°TCP/IPè¿æ¥ ç¡®ä¿æ‰‹æœºå¼€å¯usbè°ƒè¯• ç”¨usbçº¿æŠŠæ‰‹æœºå’Œç”µè„‘è¿æ¥èµ·æ¥ æ‰§è¡Œå‘½ä»¤ï¼šâ€™adb tcpip 5555â€™ æ‰§è¡ŒæˆåŠŸåæ‹”æ‰usbçº¿ï¼Œç«¯å£å¯ä»¥ä¸ç”¨5555ï¼Œè¿™ä¸ªå®˜æ–¹é»˜è®¤ä½¿ç”¨çš„ã€‚ æ‰¾åˆ°æ‰‹æœºçš„IPåœ°å€ä¸€èˆ¬åœ¨ è®¾ç½®-æˆ‘å¾—è®¾å¤‡-å…¨éƒ¨å‚æ•°-çŠ¶æ€ä¿¡æ¯-IPåœ°å€ é€šè¿‡IPåœ°å€è¿æ¥æ‰‹æœºæ‰§è¡Œå‘½ä»¤ï¼š &gt; adb connect 192.168.26.58:5555 è‹¥ç«¯å£å·æ˜¯5555ï¼Œåˆ™å¯ä»¥çœç•¥ï¼Œç›´æ¥ï¼š &gt; adb connect 192.168.26.58 å¦‚æœæ²¡æœ‰è¿æ¥æˆåŠŸå¦‚æœç¡®å®šç½‘ç»œä¸ç«¯å£æ²¡æœ‰é—®é¢˜ï¼Œå¯ä»¥å°è¯•é‡å¯adbæœåŠ¡ï¼š &gt; adb kill-server è¿æ¥æˆåŠŸå¦‚æœè¿æ¥æˆåŠŸï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å½“å‰è¿æ¥çš„è®¾å¤‡åˆ—è¡¨ï¼š &gt; adb devices","link":"/2018/05/29/MAC-adb%E6%97%A0%E7%BA%BF%E8%BF%9E%E6%8E%A5Android%E7%9C%9F%E6%9C%BA/"},{"title":"MAC android studio3.1.2æ— æ¯”å¡ï¼Œè§£å†³æ–¹æ¡ˆ","text":"å‡çº§Android Studio3.1.2ä»¥åï¼ŒçœŸæ˜¯javaæ–‡ä»¶å†™ä¸€ä¸ªå­—å¡ä¸‰ä¸ªå­—ï¼Œxmlæ–‡ä»¶æ ¹æœ¬ä¸æ•¢æ‰“å¼€ã€‚åœ¨V2exæ‰¾åˆ°çš„è§£å†³åŠæ³•æ˜¯å¼ºåˆ¶ä½¿ç”¨ç‹¬æ˜¾ã€‚ä¼šæœ‰ä¸€å®šçš„æ•ˆæœï¼Œä¸è¿‡æ²»æ ‡ä¸æ²»æ ‡ï¼Œé•¿ä¹…çš„è·‘è¿˜æ˜¯ä¼šå¡ï¼Œå¹¶ä¸”ç”µé‡æ¶ˆè€—å¥‡å¿«ã€‚åˆ†äº«ä¸€ä¸ªä¸‹command line å‡çº§Android Studio3.1.2ä»¥åï¼ŒçœŸæ˜¯javaæ–‡ä»¶å†™ä¸€ä¸ªå­—å¡ä¸‰ä¸ªå­—ï¼Œxmlæ–‡ä»¶æ ¹æœ¬ä¸æ•¢æ‰“å¼€ã€‚åœ¨V2exæ‰¾åˆ°çš„è§£å†³åŠæ³•æ˜¯å¼ºåˆ¶ä½¿ç”¨ç‹¬æ˜¾ã€‚ä¼šæœ‰ä¸€å®šçš„æ•ˆæœï¼Œä¸è¿‡æ²»æ ‡ä¸æ²»æ ‡ï¼Œé•¿ä¹…çš„è·‘è¿˜æ˜¯ä¼šå¡ï¼Œå¹¶ä¸”ç”µé‡æ¶ˆè€—å¥‡å¿«ã€‚åˆ†äº«ä¸€ä¸ªä¸‹command line sudo pmset -a GPUSwitch 1 0 - å¼ºåˆ¶ä½¿ç”¨æ ¸æ˜¾ 1 - å¼ºåˆ¶ä½¿ç”¨ç‹¬æ˜¾ï¼ˆç›¸å½“äºåœ¨åå¥½è®¾ç½®-èŠ‚èƒ½ é‡Œå»æ‰è‡ªåŠ¨åˆ‡æ¢æ˜¾å¡è¿™ä¸ªé€‰é¡¹ï¼‰ 2 - è‡ªåŠ¨åˆ‡æ¢æ˜¾å¡ å…¶å®æ—¶é—´æ˜¯æœ€å¥½çš„è€å¸ˆï¼Œå…¬å¸èµ¶é¡¹ç›®ï¼Œåªèƒ½å¿ï¼Œä»Šå¤©å¿™å®Œæ‰¾äº†ä¸€ä¸‹ï¼Œå¦‚ä¸‹è§£å†³æ–¹æ¡ˆæ­£åˆé€‚ Help -&gt; Edit Custom VM Optionsâ€¦ ä¿®æ”¹å¦‚ä¸‹éƒ¨åˆ† -Xms956m -Xmx3280m -XX:ReservedCodeCacheSize=240m -XX:+UseConcMarkSweepGC -XX:SoftRefLRUPolicyMSPerMB=50 -Dsun.io.useCanonCaches=false -Djava.net.preferIPv4Stack=true -Djna.nosys=true -Djna.boot.library.path= -da Settings -&gt; Appearance -&gt; Show memory indicatorç„¶åä½ å°±å¯ä»¥åœ¨ideaå³ä¸‹è§’çœ‹åˆ°å†…å­˜ä½¿ç”¨æƒ…å†µäº† å‚è€ƒ:å®˜æ–¹æä¾›çš„å¼€å‘å·¥å…·è°ƒä¼˜ç­–ç•¥","link":"/2018/06/01/MAC-android-studio3-1-2%E6%97%A0%E6%AF%94%E5%8D%A1%EF%BC%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"},{"title":"Task :app:compileDebugJavaWithJavac Failedå¤„ç†","text":"ä»Šå¤©é‡åˆ°äº†Task :app:compileDebugJavaWithJavac FAILEDé—®é¢˜ï¼Œç½‘ä¸Šç­”æ¡ˆå¾ˆæ‚ï¼Œè§£å†³ä»¥åæ€»ç»“ä¸€ä¸‹ã€‚ è¯¥é—®é¢˜åŸºæœ¬ç”±äºgradleç¼–è¯‘å¯¼è‡´ï¼Œå¯ä»¥ç”¨ $ gradlew compileDebug --stacktrace æ¥è·Ÿè¸ªgradleç¼–è¯‘æ—¶çš„stacktraceä¿¡æ¯ï¼Œå¦‚æœå‡ºç°-bash: ./gradlew: Permission deniedé”™è¯¯ï¼Œå¯ä»¥è¾“å…¥ $ chmod +x gradlew æ¥è§£å†³æƒé™é—®é¢˜ï¼Œä¸è¿‡gradlew comileDebug å¹¶ä¸èƒ½çœ‹åˆ°æœ‰ä»·å€¼çš„ä¿¡æ¯ï¼Œæ ¹æ®æç¤ºï¼Œè¾“å…¥ $ gradlew compileDebugSources --stacktrace -info è§£å†³é—®é¢˜ï¼ŒåŸæ¥æ˜¯æŸä¸ª.javaæ–‡ä»¶æ²¡pushå¯¼è‡´ã€‚","link":"/2018/05/09/Task-app-compileDebugJavaWithJavac-Failed%E5%A4%84%E7%90%86/"},{"title":"Mixin","text":"å¯¹Dartä¸­Mixinçš„ç†è§£ Tipå½“ç„¶å¤šç»§æ‰¿ä¼šæœ‰å¾ˆå¤šä¸è¶³ä¹‹å¤„ï¼Œä¾‹å¦‚ï¼Œç»“æ„å¤æ‚åŒ–ï¼Œæœ‰é™é¡ºåºæ¨¡ç³Šï¼ŒåŠŸèƒ½å†²çªç­‰é—®é¢˜ï¼Œä¸¾ä¸€ä¸ªåˆ—å­ï¼š ä¸€ä¸ªç‰©ä½“çš„æœ¬è´¨åªèƒ½æœ‰ä¸€ä¸ªï¼Œä¸€ä¸ªåŠ¨ç‰©åªèƒ½æ˜¯ç‹—æˆ–è€…åªèƒ½æ˜¯çŒ«ï¼Œå¦‚æœä½ æƒ³åˆ›é€ ä¸€ä¸ªä¼šç©æ¯›çº¿çƒä¼šç©æ¿€å…‰çš„ç‹—ï¼Œé‚£ä¹ˆåªéœ€åˆ›é€ ä¸€ä¸ªæè¿°è¿™ç±»è¡Œä¸ºçš„æ¥å£ï¼Œç„¶ååœ¨è‡ªå·±çš„ç±»é‡Œé¢å®ç°â€ç©è€â€æ¥å£ï¼Œå…·ä½“å®ç°è¿™äº›ç©çš„è¡Œä¸ºï¼Œæœ€ç»ˆä½ åŒæ ·ä¼šå¾—åˆ°ä¸€ä¸ªæ—¢åƒç‹—åˆåƒçŒ«çš„åŠ¨ç‰©ã€‚å¦‚æœä½ æƒ³è®©è¿™ä¸ªåŠ¨ç‰©å«èµ·æ¥åƒçŒ«è€Œä¸æ˜¯ç‹—ï¼Œé‚£ä¹ˆé‡å†™å³å¯ï¼Œå­ç±»é‡Œé‡æ–°å®šä¹‰â€œå«â€è¿™ä¸ªè¡Œä¸ºå³å¯ã€‚ä½†æ— è®ºå¦‚ä½•ï¼Œè¿™æ ·å¾—åˆ°çš„ç±»æ˜¯ç»å¯¹ä¸ä¼šæœ‰å¤šé‡ç»§æ‰¿çš„å†²çªçš„ã€‚ å¯¹äºMixinå¹¶æ²¡æœ‰ä¸€ä¸ªå‡†ç¡®çš„æ¦‚å¿µï¼Œæœ‰äººç†è§£ä¸ºMix inæ··å…¥ã€‚å®ƒç±»ä¼¼äºå¤šç»§æ‰¿ï¼Œä½†é€šå¸¸æ··å…¥Mixinçš„ç±»å’ŒMixinç±»æœ¬èº«æ–Œé‚£ä¸ªä¸æ˜¯is-açš„å…³ç³»ã€‚å®è´¨ä¸ŠMixinæ˜¯é€šè¿‡è¯­è¨€ç‰¹æ€§ï¼Œæ¥æ›´ç®€æ´åœ°å®ç°ç»„åˆæ¨¡å¼ã€‚å› æ­¤ï¼ŒMixinå¯ä»¥çµæ´»åœ°æ·»åŠ æŸäº›åŠŸèƒ½ã€‚ä¼ ç»Ÿçš„æ¥å£æ¦‚å¿µä¸­ï¼Œå¹¶ä¸åŒ…å«å®ç°éƒ¨åˆ†ï¼Œè€ŒMixinåŒ…å«å®ç°ã€‚ åŸºæœ¬æ¦‚å¿µ Mixins in Strongtalkå»ºè®®äº†è§£ä¸€ä¸‹Mixinå­¦æœ¯æ–‡çŒ®èµ„æ–™ï¼Œå› ä¸ºå®ƒå®šä¹‰äº†é‡è¦æ¦‚å¿µå’Œæ³¨è§£ã€‚ æ³¨ï¼šSmalltalkè¢«å…¬è®¤å†å²ä¸Šç¬¬äºŒä¸ªé¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡è¯­è¨€å’Œç¬¬ä¸€ä¸ªçœŸæ­£çš„é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰ã€‚å¹¶ä¸”å®ƒå¯¹å…¶å®ƒä¼—å¤šçš„ç¨‹åºè®¾è®¡è¯­è¨€çš„äº§ç”Ÿèµ·åˆ°äº†æå¤§çš„æ¨åŠ¨ä½œç”¨ï¼Œä¸»è¦æœ‰ï¼šObjective-c,Actor,Javaå’ŒRubyç­‰ï¼Œ90å¹´ä»£çš„è®¸å¤šè½¯ä»¶å¼€å‘æ€æƒ³å¾—åˆ©äºSmalltalkï¼Œä¾‹å¦‚Design Patterns,Extreme Programming(XP)å’ŒRefactoringç­‰ã€‚Strongtalkçš„æœ€ç‹¬ç‰¹ä¹‹å¤„æ˜¯æ”¯æŒæ¸è¿›å¼çš„ç±»å‹æ³¨è§£ï¼Œè¿™ç§æ€æƒ³åœ¨Dart,PHP,Python 3å’ŒTypeScriptç­‰è¯­è¨€ä¸­éƒ½æœ‰ä½“ç°ã€‚Gilad Brachaæ˜¯Dartå¼€å‘å›¢é˜Ÿçš„ä¸€å‘˜ï¼Œåœ¨20ä¸–çºª90å¹´ä»£ï¼ŒGiladåŒUrs HÃ¶lzleå’ŒLars Bakç­‰äººä¸€èµ·åˆ›å»ºäº†è¯­è¨€Smalltalkçš„ä¸€ä¸ªé«˜æ€§èƒ½ç‰ˆæœ¬å³Strongtalkã€‚ä½†éšç€Javaçš„æµè¡Œï¼ŒSunåœæ­¢äº†Strongtalkçš„æŠ•å…¥ï¼Œå¹¶å°†å›¢é˜Ÿæˆå‘˜é‡æ–°åˆ†é…æ¥ä¼˜åŒ–Javaçš„æ€§èƒ½ï¼Œè€ŒStrongtalkæ¼”å˜æˆäº†å®˜æ–¹JVMå³Hotspot. â€“ ç»´åŸºç™¾ç§‘ ä½œä¸ºä¸€ä¸ªæ”¯æŒç±»å’Œç»§æ‰¿çš„è¯­è¨€ï¼Œç±»éšå¼åœ°å®šä¹‰äº†Mixinã€‚Mixinéšå¼åœ°é€šè¿‡ç±»ä¸»ä½“ï¼ˆClass Bodyï¼‰è¿›è¡Œå®šä¹‰ï¼Œå¹¶å»ºç«‹å­ç±»å’Œçˆ¶ç±»ä¹‹é—´çš„å˜é‡å¢é‡ï¼ˆDeltaï¼‰ã€‚è€ŒClassç±»å®é™…ä¸Šåˆ™æ˜¯ä¸€ä¸ªMixinåº”ç”¨ï¼Œå³æ˜¯é€šè¿‡éšå¼å®šä¹‰çš„Mixinåº”ç”¨äºçˆ¶ç±»çš„ç»“æœã€‚ Mixin Applicationæ··åˆåº”ç”¨ç±»ä¼¼äºFunction Applicationå‡½æ•°åº”ç”¨ã€‚åœ¨æ•°å­¦ä¸­ï¼Œæ··åˆç±»Må¯ä»¥è§†ä½œä»çˆ¶ç±»åˆ°å­ç±»æ–°å¢çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå°†Mæ³¨å…¥è¶…ç±»Sï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªSçš„å­ç±»ã€‚åœ¨ç ”ç©¶æ–‡çŒ®ä¸­ï¼Œè¿™é€šå¸¸å†™ä½œ M |&gt; Sã€‚ åŸºäºå‡½æ•°åº”ç”¨çš„æ¦‚å¿µï¼Œå¯ä»¥å®šä¹‰å¤åˆå‡½æ•°ï¼ˆå³å‡½æ•°ç»„åˆï¼‰ã€‚è¯¥æ¦‚å¿µè´¯ç©¿äºæ··åˆç»„åˆä¸­ã€‚æˆ‘ä»¬å®šä¹‰æ··åˆM1å’ŒM2çš„ç»„åˆï¼Œå†™ä½œM1*M2,å¦‚(M1 * M2) |&gt; S = M1 |&gt; (M2 |&gt; S)ã€‚ å‡½æ•°éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºä»–ä»¬å¯ä»¥åº”ç”¨äºä¸åŒçš„å‚æ•°ã€‚åŒæ ·ï¼ŒClasséšå¼å®šä¹‰çš„Mixinï¼Œé€šå¸¸ä»…åœ¨ç±»å£°æ˜ç»™å‡ºçš„çˆ¶ç±»ä¸­åº”ç”¨ä¸€æ¬¡ã€‚ä¸ºå…è®¸Mixinåº”ç”¨äºä¸åŒçš„çˆ¶ç±»ï¼Œæˆ‘ä»¬è¦ä¹ˆå£°æ˜Mixinä¸ä¾èµ–äºç‰¹å®šçš„çˆ¶ç±»ï¼Œè¦ä¹ˆè„±ç¦»äºClasséšå¼çš„Mixinï¼Œç„¶åé‡ç”¨å¤–éƒ¨çš„åŸå§‹å®šä¹‰ã€‚ è¯­æ³•å’Œè¯­ä¹‰ Mixiné€šè¿‡æ­£å¸¸çš„ç±»å£°æ˜è¢«éšå¼å®šä¹‰ã€‚åŸåˆ™ä¸Šï¼Œæ¯ä¸ªç±»éƒ½å®šä¹‰äº†ä¸€ä¸ªMixinï¼Œå¹¶å¯ä»¥ä»ç±»ä¸­æå–å‡ºæ¥ã€‚ç„¶è€Œï¼ŒMixinåªèƒ½ä»æœªå®šä¹‰æ„é€ å‡½æ•°çš„ç±»ä¸­æå–ã€‚ç”±äºæ²¿ç€ç»§æ‰¿é“¾ä¼ é€’æ„é€ å‡½æ•°å‚æ•°çš„éœ€è¦ï¼Œè¯¥çº¦æŸèƒ½é¿å…å‡ºç°æ–°çš„è¿é”é—®é¢˜ã€‚ ä¸¾ä¸€ä¸ªğŸŒ°: abstract class Collection&lt;E&gt; { Collection&lt;E&gt; newInstance(); void forEach(void f(E element)) { //body } void add(E element) { //body } //... } abstract class DOMElementList&lt;E&gt; = DOMList with Collection&lt;E&gt;; abstract class DOMElementSet&lt;E&gt; = DOMSet with Collection&lt;E&gt;; Collectionæ˜¯ä¸€ä¸ªæ ‡å‡†ç±»ï¼Œå¹¶ç”¨æ¥å£°æ˜ä¸€ä¸ªMixinã€‚å¦å¤–ï¼ŒDOMElementListå’ŒDOMElementSetä¹Ÿæ˜¯æ··åˆåº”ç”¨ã€‚è¿™ä¸¤ä¸ªMixinåœ¨ç±»å£°æ˜çš„æ—¶å€™ï¼Œé€šè¿‡ç‰¹æ®Šçš„å½¢å¼æ¥å®šä¹‰ã€‚åœ¨ç±»å£°æ˜ä¸­åŒ…å«ä¸€ä¸ªåå­—ï¼Œå¹¶ç”¨withè¯­å¥æ¥å£°æ˜ä»–ä»¬ä¸çˆ¶ç±»ä¸­çš„æ··åˆåº”ç”¨ç›¸åŒã€‚**Collectionæ˜¯æŠ½è±¡ç±»ï¼Œå› ä¸ºå®ƒå¹¶æ²¡æœ‰å®ç°ç±»ä¸­å¹´å®šä¹‰çš„æŠ½è±¡æ–¹æ³•newInstance()**ã€‚ ä¸Šè¿°ä¸­ï¼Œäº‹å®ä¸ŠDOMElementListæ··åˆCollection mixin |&gt; DOMListï¼Œè€ŒDOMElementSetåˆ™æ˜¯Collection mixin |&gt; DOMSetã€‚ è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼ŒCollectionä¸­çš„ä»£ç å¯ä»¥åœ¨ç±»çš„å¤šä¸ªç»§æ‰¿å±‚æ¬¡ä¸­è¢«å…±äº«ã€‚å› æ­¤ï¼Œæ— è®ºDOMListè¿˜æ˜¯DOMSetï¼Œéƒ½ä¸éœ€è¦é‡å¤ã€å¤åˆ¶Collectionä¸­çš„ä»£ç ï¼Œå¹¶ä¸”ä»»ä½•å˜åŒ–éƒ½ä¼šä½¿Collectionä¼ é€’åˆ°è¿™ä¸¤ä¸ªç»§æ‰¿ç»“æ„ä¸­ï¼Œå¤§å¤§ç®€åŒ–äº†ç»´æŠ¤ä»£ç ã€‚ä¸Šé¢çš„ä»£ç ä»‹ç»äº†Mixinåº”ç”¨çš„ä¸€ç§æ–¹å¼ï¼šæ··åˆåº”ç”¨æŒ‡å®šåº”ç”¨çš„Mixinå’Œçˆ¶ç±»ï¼Œä»¥åŠæ··åˆåº”ç”¨çš„åç§°ã€‚ å¦å¤–ä¸€ç§æƒ…å†µï¼Œæ··åˆåº”ç”¨å‡ºç°åœ¨ç±»å£°æ˜çš„withè¯­å¥ä¸­ï¼Œä»¥é€—å·æ¥åˆ†éš”æ ‡è¯†ç¬¦åˆ—è¡¨çš„æ—¶å€™ã€‚æ­¤æ—¶ï¼Œæ‰€æœ‰çš„æ ‡è¯†ç¬¦ä»£è¡¨Classã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¤šæ··åˆåœ¨extendsè¯­å¥ä¸­å¯ä»¥æ„æˆåŠåº”ç”¨äºçˆ¶ç±»åç§°ï¼Œç”Ÿæˆä¸€ä¸ªåŒ¿åçš„çˆ¶ç±»ã€‚å†ä»¥åŒæ ·çš„ğŸŒ°ï¼š class DOMElementList&lt;E&gt; extends DOMList with Collection&lt;E&gt; { DOMElementList&lt;E&gt; newInstance() =&gt; new DOMElementList&lt;E&gt;(); } class DOMElementList&lt;E&gt; extends DOMSet with Collection&lt;E&gt; { DOMElementSet&lt;E&gt; newInstance() =&gt; new DOMElementSet&lt;E&gt;(); } è¿™é‡Œï¼ŒDOMElementListå¹¶ä¸æ˜¯åº”ç”¨Collection mixin |&gt; DOMListã€‚ç›¸åï¼Œå®ƒæ˜¯ä¸€ä¸ªçˆ¶ç±»ä¸ºåº”ç”¨çš„æ–°å®šä¹‰çš„ç±»ï¼ˆæ³¨æ„extendså…³é”®å­—ï¼‰ï¼ŒDOMElementSetåŒæ ·å¦‚æ­¤ã€‚æ³¨æ„ï¼Œåœ¨æ¯ä¸€ç§æƒ…å†µä¸‹ï¼ŒæŠ½è±¡å‡½æ•°newInstance()å¿…é¡»å•ç‹¬å®ç°ï¼Œä»¥ä¾¿èƒ½å¤Ÿç›´æ¥è¢«å®ä¾‹åŒ–ã€‚ æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœDOMListæœ‰ä¸€ä¸ªå¸¦å‚æ•°çš„æ„é€ å‡½æ•°ï¼š class DOMElementList&lt;E&gt; extends DOMList with Collection&lt;E&gt; { DOMElementList&lt;E&gt; newInstance() =&gt; new DOMElementList&lt;E&gt;(0); DOMElementList(size):super(size); } æ„é€ å‡½æ•°å¯ä»¥ä¸ºå„ä¸ªå­—æ®µä»¥åŠæ³›å‹å‚æ•°è®¾ç½®å€¼ã€‚æ¯ä¸ªMixinéƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ„é€ å‡½æ•°è¢«å•ç‹¬è°ƒç”¨ï¼Œçˆ¶ç±»ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å› ä¸ºMixinçš„æ„é€ å‡½æ•°ä¸èƒ½å¤Ÿè¢«å£°æ˜ï¼Œæ‰€ä»¥è°ƒç”¨å‡½æ•°å¯ä»¥çœç•¥ã€‚åœ¨åº•å±‚çš„å®ç°ä¸­ï¼Œè°ƒç”¨æ€»æ˜¯æ”¾åœ¨åˆå§‹åˆ—è¡¨ä¹‹å‰ã€‚ ç¬¬äºŒç§æ˜¯ä»¥æ–¹ä¾¿å®ç”¨çš„è¯­æ³•ç³–å½¢å¼ï¼Œå°†å¤šä¸ªMixinæ··å…¥ç±»ä¸­ï¼Œè€Œä¸éœ€è¦å¼•å…¥å¤šä¸ªä¸­é—´å£°æ˜ã€‚ä¸¾ä¸€ä¸ªğŸŒ°ï¼š class Person { String name; Person(this.name); } class Maestro extends Person with Musical, Aggressive, Demented { Maestro(name):super(name); } è¿™é‡Œï¼Œçˆ¶ç±»æ˜¯ä¸€ä¸ªæ··åˆåº”ç”¨ï¼šDemented mixin |&gt; Aggressive mixin |&gt; Musical mixin |&gt; Person å‡è®¾Personæœ‰å¸¦å‚æ•°çš„æ„é€ å‡½æ•°ï¼Œåˆ™Musical mixin |&gt; Personå°†ç»§æ‰¿Personçš„æ„é€ å‡½æ•°ã€‚ä»¥æ­¤ç±»æ¨ï¼Œä¸€ç›´åˆ°Maestroå®é™…çš„çˆ¶ç±»Personï¼Œå®ƒç”±ä¸€ç³»åˆ—çš„Mixinåº”ç”¨ç»„æˆã€‚ ç»†èŠ‚æè¿° Privacyç§æœ‰ ä¸€ä¸ªæ··åˆåº”ç”¨å¾ˆå¯èƒ½æ˜¯å’‹å¤–éƒ¨æœ€åˆå£°æ˜Classçš„åº“ä¸­è¢«å£°æ˜ï¼Œè¿™å¯¹è®¿é—®æ··åˆåº”ç”¨çš„æˆå‘˜æ²¡æœ‰ä»»ä½•å½±å“ã€‚æ ¹æ®æ··åˆåº”ç”¨çš„è¯­ä¹‰å¯çŸ¥ï¼Œè®¿é—®æˆå‘˜å–å†³äºåº“æœ€åˆå£°æ˜çš„ä½ç½®ã€‚è¿™ä¸æ™®é€šçš„ç»§æ‰¿ä¸€æ ·ï¼Œæ˜¯ç”±åº•å±‚è¯­æ³•ï¼ˆC++ï¼‰çš„ç»§æ‰¿è¯­ä¹‰å†³å®šçš„ã€‚ Staticsé™æ€ æ˜¯å¦å¯ä»¥é€šè¿‡æ··åˆåº”ç”¨ä½¿ç”¨æœ€åˆClassçš„é™æ€å€¼ï¼ŸåŒæ ·ï¼Œç”±ç»§æ‰¿çš„è¯­ä¹‰è¿›è¡Œåˆ†æï¼Œåœ¨Dartä¸­é™æ€æˆå‘˜ä¸ä¼šè¢«ç»§æ‰¿ã€‚ Typesç±»å‹ æ··åˆåº”ç”¨çš„å®ä¾‹æ˜¯ä»€ä¹ˆç±»å‹ï¼Ÿé€šå¸¸ï¼Œå®ƒæ˜¯çˆ¶ç±»çš„å­ç±»å‹ï¼Œä»¥åŠé€šè¿‡Mixinåç§°è¡¨ç¤ºçš„å­ç±»å‹ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒä¸æœ€åˆClassçš„ç±»å‹ç›¸åŒã€‚ æœ€åˆçš„Classæœ‰å®ƒè‡ªèº«çš„çˆ¶ç±»ã€‚ä¸ºç¡®ä¿ç‰¹å®šçš„æ··åˆåº”ç”¨ä¸æœ€åˆè¿›è¡Œæ··å…¥çš„Classå…¼å®¹ï¼Œéœ€è¦ä½¿ç”¨withè¯­å¥ã€‚ä¾‹å¦‚ï¼Œå¦‚æœé€šè¿‡withè¯­å¥å®šä¹‰äº†Class Aï¼Œå¹¶åº”ç”¨äº†ä¸€ä¸ªæ··åˆMï¼ŒMæºè‡ªClass Kï¼Œé‚£ä¹ˆAå¿…é¡»æ”¯æŒKå®šä¹‰çš„æ¥å£ã€‚","link":"/2019/07/25/Mixin/"},{"title":"cocoapodsç§æœ‰åº“å¤„ç†","text":"æŠ½ç¦»å·¥å…·ç±»å¹¶æäº¤cocoaPodsç§æœ‰åº“ æœ€è¿‘åœ¨æå–é¡¹ç›®ä¸­çš„éƒ¨åˆ†å·¥å…·ç±»ï¼Œæœ‰ç”¨åˆ°cocoaPodsç§æœ‰åº“ï¼Œæ‰€ä»¥æŠŠå®ƒè®°å½•ä¸‹æ¥ã€‚ ç§æœ‰åº“ä½¿ç”¨æµç¨‹ä¸ºç§æœ‰åº“æ·»åŠ repo$ pod repo add REPO_NAME git@github:artsy/Specs.git åˆ›å»ºç§æœ‰åº“$ pod repo add REPO_NAME SOURCE_URL æ£€æŸ¥repoå®‰è£…æˆåŠŸ$ cd ~/.cocoapods/repos/REPO_NAME $ pod repo lint . æŠŠå‡†å¤‡å¥½çš„ä»£ç åº“specåŠ å…¥åˆ°ç§æœ‰åº“ä¸­è¯¥å‘½ä»¤ä¼šæŠŠæ­¤ç‰ˆæœ¬çš„.podSpecæ‹·è´åˆ°ç§æœ‰åº“ä¸­å¹¶pushåˆ°è¿œç¨‹gitä»£ç åº“ $ pod repo push REPO_NAME SPEC_NAME.podspec .podSpecæ–‡ä»¶å¼•ç”¨å…¶ä»–ç§æœ‰åº“æƒ…å†µé¡¹ç›®ä¸­éœ€è¦å¼•ç”¨åˆ°ç§æœ‰åº“çš„library,è¿™ä¸ªæ—¶å€™éœ€è¦ç”¨åˆ° sources s.dependency 'THLTencentOpenAPI' $ pod lib lint --sources=https://xx/ThirdSDK.git $ pod repo push ThirdSDK --sources=https://xx/ThirdSDK.git åŒ…å«é™æ€åº“æƒ…å†µæ·»åŠ  --use-libraries å¿½ç•¥æ‰ç›¸å…³æ£€æŸ¥ éƒ¨åˆ†é—®é¢˜å¤„ç† The repo `MyRepo` at `../.cocoapods/repos/ThirdSDK` is not clean $ pod repo update ThirdSDK","link":"/2018/03/29/cocoapods%E7%A7%81%E6%9C%89%E5%BA%93%E5%A4%84%E7%90%86/"},{"title":"android studioæ”¯æŒç³»ç»Ÿç­¾å","text":"Androidæºç ç¯å¢ƒç¼–è¯‘è°ƒè¯• å¦‚æœæƒ³è®©apkæ‹¥æœ‰ç³»ç»Ÿæƒé™ï¼Œéœ€è¦å†AndroidManifest.xmlä¸­æ·»åŠ å…±äº«ç³»ç»Ÿè¿›ç¨‹å±æ€§ï¼š android:sharedUserId=&quot;android.uid.system&quot; android:sharedUserId=&quot;android.uid.shared&quot; android:sharedUserId=&quot;android.media&quot; è¿™æ—¶å€™apkçš„ç­¾åå°±éœ€è¦æ˜¯ç³»ç»Ÿç­¾å(platformã€sharedæˆ–media)æ‰èƒ½æ­£å¸¸ä½¿ç”¨ã€‚ å¸¸ç”¨ç³»ç»Ÿç­¾åæ–¹å¼Androidæºç ç¯å¢ƒä¸‹ç­¾åè¿™ç§æ–¹å¼æ¯”è¾ƒéº»çƒ¦ï¼Œä½ éœ€è¦æœ‰ç¼–è¯‘è¿‡çš„æºç ç¯å¢ƒï¼Œå¹¶æŒ‰å¦‚ä¸‹æ­¥éª¤ï¼š 1ã€æ‹·è´Appæºç åˆ°Androidæºç çš„packages/apps/ç›®å½•ä¸‹ï¼Œä¸”Appæºç æ˜¯æ™®é€š(Eclipse)æ ¼å¼çš„2ã€é…ç½®Android.mkï¼Œåœ¨å…¶ä¸­æ·»åŠ  LOCAL_CERTIFICATE := platform æˆ– shared æˆ– media 3ã€ä½¿ç”¨mmç¼–è¯‘Appï¼Œç”Ÿæˆçš„apkå³ç³»ç»Ÿç­¾å æ‰‹åŠ¨é‡æ–°ç­¾åè¿™ç§æ–¹å¼æ¯”åœ¨æºç ç¯å¢ƒä¸‹ç­¾åç®€å•ï¼ŒAppå¯ä»¥åœ¨Eclipseæˆ–Android Studioä¸‹ç¼–è¯‘ï¼Œç„¶åç»™apké‡æ–°ç­¾åå³å¯ã€‚ä½†è¿™ç§æ–¹å¼åœ¨é¢‘ç¹è°ƒè¯•çš„æ—¶å€™æ¯”è¾ƒç—›è‹¦ï¼Œå³ä½¿å†™æˆè„šæœ¬ï¼Œä¹Ÿéœ€è¦é‡å¤ä¸€æ ·çš„æ“ä½œã€‚ ç›¸å…³æ–‡ä»¶platform.x509.pemã€platform.pk8ã€signapk.jar æ–‡ä»¶ä½ç½®platform.x509.pemã€platform.pk8: ../build/target/product/security signapk.jar: ../out/host/linux-x86/framework signapkæºç è·¯å¾„: ../build/tools/signapk ç­¾åå‘½ä»¤java -jar signapk.jar platform.x509.pem platform.pk8 old.apk new.apk æ­¥éª¤1ã€å°†ç›¸å…³æ–‡ä»¶åŠæºapkæ–‡ä»¶ç½®äºåŒä¸€è·¯å¾„ä¸‹2ã€æ£€æŸ¥æºapkåŒ…ï¼Œå»æ‰META-INF/CERT.SF å’Œ META-INF/CERT.RSA æ–‡ä»¶3ã€æ‰§è¡Œç­¾åå‘½ä»¤å³å¯ Android Studioç³»ç»Ÿç­¾åè®©Android Studioé›†æˆç³»ç»Ÿç­¾åï¼Œéœ€è¦ç”¨åˆ°ä¸€ä¸ªå·¥å…·keytool-importkeypairï¼Œè¯¦è§ä¸‹æ–‡ã€‚ keytool-importkeypairkeytool-importkeypair â€“ A shell script to import key/certificate pairs into an existing Java keystore ç›¸å…³æ–‡ä»¶platform.x509.pemã€platform.pk8ã€keytool-importkeypairã€demo.jksã€signature.shæˆ‘çš„åšæ³•æ˜¯åœ¨Appæ ¹ç›®å½•æ–°å»ºSignatureæ–‡ä»¶å¤¹ä¸“é—¨å­˜æ”¾ç­¾åç›¸å…³æ–‡ä»¶ã€‚1.ç”Ÿæˆç­¾åæ–‡ä»¶xx.jks2.ç¼–å†™ç­¾åè„šæœ¬signature.shï¼Œå†…å®¹å¦‚ä¸‹: #!/bin/sh è½¬æ¢ç³»ç»Ÿç­¾åå‘½ä»¤./keytool-importkeypair -k demo.jks -p 123456 -pk8 platform.pk8 -cert platform.x509.pem -alias demo # demo.jks : ç­¾åæ–‡ä»¶ # 123456 : ç­¾åæ–‡ä»¶å¯†ç  # platform.pk8ã€platform.x509.pem : ç³»ç»Ÿç­¾åæ–‡ä»¶ # demo : ç­¾åæ–‡ä»¶åˆ«å ä¸ºè„šæœ¬æ–‡ä»¶æ·»åŠ å¯æ‰§è¡Œæƒé™ï¼š $ sudo chmod a+x signature.sh æ‰§è¡Œè„šæœ¬ï¼š $ ./signature.sh 3.é…ç½®builde.gradle signingConfigs { release { storeFile file(&quot;../signature/demo.jks&quot;) storePassword '123456' keyAlias 'demo' keyPassword '123456' } debug { storeFile file(&quot;../signature/demo.jks&quot;) storePassword '123456' keyAlias 'demo' keyPassword '123456' } } è¿™æ ·debugæˆ–release apkå°±å¸¦æœ‰ç³»ç»Ÿç­¾åäº†ã€‚","link":"/2018/05/21/android-studio%E6%94%AF%E6%8C%81%E7%B3%BB%E7%BB%9F%E7%AD%BE%E5%90%8D/"},{"title":"wake me up","text":"Feeling my way through the darkness Guided by a beating heart I can't tell where the journey will end But i know where to start Wake Me up -AviciiFeeling my way through the darkness Guided by a beating heart I canâ€™t tell where the journey will end But i know where to start They tell me Iâ€™m too young to understand They say Iâ€™m caught up in a dream Well life will pass me by if i donâ€™t open up my eyes Well thatâ€™s fine by me So wake me up when itâ€™s all over When Iâ€™m wiser and Iâ€™m older All this time I was finding myself And I didâ€™t know I was lost I tried carrying the weight of the world But I only hava two hands All this time I was finding myself And I didnâ€™t know I was lost I tried carrying the weight of the world But I only have two hands I hope I get the chance to travel the world But I donâ€™t have any plans I wish that I could stay forever this young Not afraid to close my eyes Lifeâ€™s a game made for everyone And love is the prize So wake me up when itâ€™s all over When Iâ€™m wiser and Iâ€™m older All this time I was finding myself And I didnâ€™t know I was lost So wake me up when itâ€™s all over When Iâ€™m wiser and Iâ€™m older All this time I was finding myself And I didnâ€™t know I was lost So wake me up when itâ€™s all over When Iâ€™m wiser and Iâ€™m older All this time I was finding myself And I didnâ€™t know I was lost I didnâ€™t know I was lost I didnâ€™t know I was lost I didnâ€™t know I was lost I didnâ€™t know I was lost I didnâ€™t know I was lost So wake me up when itâ€™s all over When Iâ€™m wiser and Iâ€™m older All this time I was finding myself And I didnâ€™t know I was lost","link":"/2019/03/07/wake-me-up/"},{"title":"kotlin inline","text":"ä½¿ç”¨é«˜é˜¶å‡½æ•°ä¼šå¸¦æ¥ä¸€äº›è¿è¡Œæ—¶çš„æ•ˆç‡æŸå¤±ï¼šæ¯ä¸€ä¸ªå‡½æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”ä¼šæ•è·ä¸€ä¸ªé—­åŒ…ã€‚å³é‚£äº›åœ¨å‡½æ•°ä½“å†…ä¼šè®¿é—®åˆ°çš„å˜é‡ã€‚å†…å­˜åˆ†é…å’Œè™šæ‹Ÿè°ƒç”¨ä¼šå¼•å…¥è¿è¡Œæ—¶é—´å¼€é”€ã€‚ å‰è¨€Kotlinåœ¨é›†åˆAPIä¸­å¤§é‡ä½¿ç”¨äº†Lambdaï¼Œè¿™ä½¿å¾—æˆ‘ä»¬åœ¨å¯¹é›†åˆè¿›è¡Œæ“ä½œçš„æ—¶å€™ä¼˜é›…äº†è®¸å¤šã€‚ä½†æ˜¯è¿™ç§æ–¹å¼çš„ä»£ä»·å°±æ˜¯ï¼Œåœ¨Kotlinä¸­ä½¿ç”¨Lambdaè¡¨è¾¾å¼ä¼šå¸¦æ¥ä¸€äº›é¢å¤–çš„å¼€é”€ï¼Œè€Œå†…è”å‡½æ•°åº”è¿è€Œç”Ÿï¼Œç”¨æ¥è§£å†³ä¼˜åŒ–Kotlinæ”¯æŒLambdaè¡¨è¾¾å¼ä¹‹åæ‰€å¸¦æ¥çš„å¼€é”€ã€‚ ä¼˜åŒ–Lambdaå¼€é”€Kotliné»˜è®¤é¢å‘JDK6ï¼Œè€ŒJDK8æ‰å¼•å…¥Lambdaè¡¨è¾¾å¼æ”¯æŒã€‚åœ¨Kotlinä¸­æ¯ç”³æ˜ä¸€ä¸ªLambdaè¡¨è¾¾å¼ï¼Œå°±ä¼šåœ¨å­—èŠ‚ç ä¸­äº§ç”Ÿä¸€ä¸ªåŒ¿åç±»ï¼Œè¯¥åŒ¿åç±»åŒ…å«äº†ä¸€ä¸ªinvokeæ–¹æ³•ï¼Œä½œä¸ºLambdaçš„è°ƒç”¨æ–¹æ³•ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¿…é¡»é‡‡ç”¨æŸç§æ–¹æ³•æ¥ä¼˜åŒ–Lambdaå¸¦æ¥çš„é¢å¤–å¼€é”€ï¼Œä¹Ÿå°±æ˜¯å†…è”å‡½æ•°ã€‚ invokedynamicä¸Kotlinè¿™ç§åœ¨ç¼–è¯‘æœŸé€šè¿‡ç¡¬ç¼–ç ç”ŸæˆLambdaè½¬æ¢ç±»çš„æœºåˆ¶ä¸åŒï¼ŒJavaåœ¨SE 7ä¹‹åé€šè¿‡invokedynamicæŠ€æœ¯å®ç°äº†åœ¨è¿è¡ŒæœŸæ‰äº§ç”Ÿç›¸åº”çš„ç¿»è¯‘ä»£ç ã€‚åœ¨invokedynamicè¢«é¦–æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘äº§ç”Ÿä¸€ä¸ªåŒ¿åç±»æ¥æ›¿æ¢ä¸­é—´ç invokedynamicï¼Œåç»­çš„è°ƒç”¨ä¼šç›´æ¥é‡‡ç”¨è¿™ä¸ªåŒ¿åç±»çš„ä»£ç ï¼Œè¿™æ ·åšçš„å¥½å¤„ä¸»è¦ä½“ç°åœ¨ï¼š ç”±äºå…·ä½“çš„è½¬æ¢å®ç°æ˜¯åœ¨è¿è¡Œæ—¶äº§ç”Ÿçš„ï¼Œåœ¨å­—èŠ‚ç ä¸­èƒ½çœ‹åˆ°çš„åªæœ‰ä¸€ä¸ªå›ºå®šçš„invokedynamicï¼Œæ‰€ä»¥éœ€è¦é™æ€ç”Ÿæˆçš„ç±»çš„ä¸ªæ•°åŠå­—èŠ‚ç å¤§å°éƒ½æ˜¾è‘—å‡å°‘ã€‚ ä¸ç¼–è¯‘æ—¶å†™æ­»åœ¨å­—èŠ‚ç ä¸­çš„ç­–ç•¥ä¸åŒï¼Œåˆ©ç”¨invokedynamicå¯ä»¥æŠŠå®é™…çš„ç¿»è¯‘ç­–ç•¥éšè—åœ¨JDKåº“çš„å®ç°ï¼Œè¿™æå¤§æé«˜äº†çµæ´»æ€§ï¼Œåœ¨ç¡®ä¿å‘åå…¼å®¹æ€§çš„åŒæ—¶ï¼ŒåæœŸå¯ä»¥ç»§ç»­å¯¹ç¿»è¯‘ç­–ç•¥ä¸æ–­ä¼˜åŒ–å‡çº§ã€‚ JVMå¤©ç„¶æ”¯æŒäº†é’ˆå¯¹è¯¥æ–¹å¼çš„Lambdaè¡¨è¾¾å¼çš„ç¿»è¯‘å’Œä¼˜åŒ–ï¼Œè¿™ä¹Ÿæ„å‘³ç€å¼€å‘è€…åœ¨ä¹¦å†™Lambdaè¡¨è¾¾å¼çš„åŒæ—¶ï¼Œå¯ä»¥å®Œå…¨ä¸ç”¨å…³å¿ƒè¿™ä¸ªé—®é¢˜ï¼Œè¿™æå¤§çš„æé«˜äº†å¼€å‘ä½“éªŒï¼ˆä½“éªŒå¾ˆé‡è¦ï¼‰ã€‚ å†…è”å‡½æ•°invokedynamicå›ºç„¶ä¸é”™ï¼Œä½†Kotlinä¸æ”¯æŒå®ƒçš„ç†ç”±ä¹Ÿå¾ˆå……åˆ†ã€‚æˆ‘ä»¬æœ‰è¶³å¤Ÿçš„ç†ç”±ç›¸ä¿¡ï¼Œå…¶æœ€å¤§çš„åŸå› æ˜¯Kotlinåœ¨ä¸€å¼€å§‹å°±éœ€è¦å…¼å®¹Androidæœ€ä¸»æµçš„Javaç‰ˆæœ¬SE 6ï¼Œè¿™å¯¼è‡´æ— æ³•é€šè¿‡invokedynamicæ¥è§£å†³Androidå¹³å°çš„Lambdaå¼€é”€é—®é¢˜ã€‚å› æ­¤ä½œä¸ºå¦å¤–ä¸€ç§ä¸»æµçš„è§£å†³æ–¹æ¡ˆï¼ŒKotlinæ‹¥æŠ±äº†å†…è”å‡½æ•°ï¼Œåœ¨C++ã€C#ç­‰è¯­è¨€ä¸­ä¹Ÿæ”¯æŒè¿™ç§ç‰¹æ€§ã€‚ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨inlineå…³é”®å­—æ¥ä¿®é¥°å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å°±æˆäº†å†…è”å‡½æ•°ã€‚å®ƒä»¬çš„å‡½æ•°ä½“åœ¨ç¼–è¯‘æœŸè¢«åµŒå…¥æ¯ä¸€ä¸ªè¢«è°ƒç”¨çš„åœ°æ–¹ï¼Œä»¥å‡å°‘é¢å¤–ç”Ÿæˆçš„åŒ¿åç±»æ•°ï¼Œä»¥åŠå‡½æ•°æ‰§è¡Œçš„æ—¶é—´å¼€é”€ã€‚ inlineè¯­æ³•æˆ‘ä»¬çœ‹ä¸€ä¸‹å†…è”å‡½æ•°å¦‚ä½•æ“ä½œ fun main(args:Array&lt;String&gt;) { foo { println(&quot;dive into kotlin...&quot;) } } fun foo(block: () -&gt; Unit) { block() } ç”³æ˜ä¸€ä¸ªé«˜é˜¶å‡½æ•°fooï¼Œæ¥æ”¶ä¸€ä¸ªç±»å‹ä¸º()-&gt;Unitçš„Lambdaï¼Œå¹¶åœ¨mainå‡½æ•°ä¸­è°ƒç”¨å®ƒã€‚ä»¥ä¸‹æ˜¯é€šè¿‡å­—èŠ‚ç åç¼–è¯‘å¾—åˆ°çš„Javaä»£ç : public static final void foo(@NotNull Function0 block) { Intrinsics.checkParameterIsNotNull(block, &quot;block&quot;); block.invoke(); } public static final void main(@NotNull String[] args) { Intrinsics.checkParameterIsNotNull(args, &quot;args&quot;); foo((Function0)null.INSTANCE); } è°ƒç”¨fooå°±ä¼šäº§ç”Ÿä¸€ä¸ªFunction0ç±»å‹çš„blockç±»ï¼Œç„¶åé€šè¿‡invokeæ–¹æ³•æ¥æ‰§è¡Œï¼Œè¿™ä¼šå¢åŠ é¢å¤–çš„ç”Ÿæˆç±»å’Œè°ƒç”¨å¼€é”€ï¼Œç°åœ¨æˆ‘ä»¬ç»™fooå‡½æ•°åŠ ä¸Šinlineä¿®é¥°ç¬¦ï¼Œå¦‚ä¸‹: inline fun foo(block:() -&gt; Unit) { block() } public static final void main(@NotNull String[] args) { Intrinsics.checkParameterIsNotNull(args, &quot;args&quot;); int $i$f$foo = false; int var2 = false; String var3 = &quot;xxxx&quot;; boolean var4 = false; System.out.print(var3); } æœç„¶ï¼Œfooå‡½æ•°ä½“ä»£ç åŠè¢«è°ƒç”¨çš„Lambdaä»£ç éƒ½ç²˜è´´åˆ°äº†ç›¸åº”è°ƒç”¨çš„ä½ç½®ï¼Œå¦‚æœè¿™æ˜¯ä¸€ä¸ªå·¥ç¨‹ä¸­çš„å…¬å…±çš„æ–¹æ³•ï¼Œæˆ–è€…è¢«åµŒå¥—åœ¨ä¸€ä¸ªå¾ªç¯è°ƒç”¨çš„é€»è¾‘ä½“ä¸­ï¼Œé€šè¿‡inlineè¯­æ³•ç³–ï¼Œæˆ‘ä»¬å¯ä»¥å½»åº•æ¶ˆé™¤è¿™ç§é¢å¤–è°ƒç”¨ï¼Œä»è€ŒèŠ‚çº¦å¼€é”€ã€‚ ä¸€äº›æƒ…å†µä¸‹åº”è¯¥é¿å…ä½¿ç”¨inline JVMå¯¹æ™®é€šçš„å‡½æ•°å·²ç»èƒ½å¤Ÿæ ¹æ®å®é™…æƒ…å†µæ™ºèƒ½åœ°åˆ¤æ–­æ˜¯å¦è¿›è¡Œå†…è”ä¼˜åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬å¹¶ä¸éœ€è¦å¯¹å…¶ä½¿ç”¨Kotlinçš„inlineè¯­æ³•ï¼Œé‚£åªä¼šè®©å­—èŠ‚ç å˜å¾—æ›´åŠ å¤æ‚ å°½é‡é¿å…å¯¹å…·æœ‰å¤§é‡å‡½æ•°ä½“çš„å‡½æ•°è¿›è¡Œå†…è”ï¼Œè¿™æ ·ä¼šå¯¼è‡´è¿‡å¤šçš„å­—èŠ‚ç æ•°é‡ ä¸€æ—¦ä¸€ä¸ªå‡½æ•°è¢«å®šä¹‰ä¸ºå†…è”å‡½æ•°ï¼Œä¾¿ä¸èƒ½è·å–é—­åŒ…ç±»çš„ç§æœ‰æˆå‘˜ï¼Œé™¤éè¢«å£°æ˜ä¸ºinternal é¿å…å‚æ•°è¢«å†…è”noinlineç°å®ä¸­æƒ…å†µå¾€å¾€ååˆ†å¤æ‚ï¼Œå¯èƒ½å¤šä¸ªå‚æ•°æ—¶ï¼Œæˆ‘ä»¬åªæƒ³å¯¹éƒ¨åˆ†Lambdaå‚æ•°å†…è”ï¼Œå…¶ä»–ä¸å†…è”ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦noinlineå…³é”®å­— inline fun foo (block1 () -&gt; Unit,noinline block2:()-&gt;Unit) { block1() block2() } éå±€éƒ¨è¿”å›Kotlinä¸­çš„å†…è”å‡½æ•°é™¤äº†ä¼˜åŒ–Lambdaå¼€é”€ä¹‹å¤–ï¼Œè¿˜å¸¦æ¥äº†å…¶ä»–æ–¹é¢çš„ç‰¹æ•ˆï¼Œå…¸å‹çš„å°±æ˜¯éå±€éƒ¨è¿”å›å’Œå…·ä½“åŒ–å‚æ•°ç±»å‹ã€‚ ä½¿ç”¨ fun main(args: Array&lt;String&gt;) { foo() } fun localReturn() { return } fun foo() { println(&quot;before local return&quot;) localReturn() println(&quot;after local return&quot;) return } //è¿è¡Œç»“æœ //before local return //after local return localReturnæ‰§è¡Œåï¼Œå…¶å‡½æ•°ä½“ä¸­çš„returnåªä¼šåœ¨è¯¥å‡½æ•°çš„å±€éƒ¨ç”Ÿæ•ˆï¼Œæ‰€ä»¥localReturn()ä¹‹åçš„printlnå‡½æ•°ä¾æ—§ç”Ÿæ•ˆã€‚æ¢æˆLambdaè¡¨è¾¾å¼çš„ç‰ˆæœ¬: fun main(args: Array&lt;String&gt;) { foo {return} } fun foo (returning: () -&gt; Unit) { println(&quot;before local return&quot;) returning() println(&quot;after local return&quot;) return } //è¿è¡Œç»“æœ // Error:(2,11) Kotlin: 'return' is not allowed here ç¼–è¯‘æŠ¥é”™ï¼Œæ­£å¸¸æƒ…å†µä¸‹Lambdaè¡¨è¾¾å¼ä¸å…è®¸å­˜åœ¨returnå…³é”®å­—ï¼Œè¿™æ—¶å€™å†…è”å‡½æ•°å°±æ´¾ä¸Šç”¨åœºäº†ï¼Œfooå‡½æ•°è¿›è¡Œå†…è”åï¼š //è¿è¡Œç»“æœ //before local return å†…è”å‡½æ•°fooçš„å‡½æ•°ä½“åŠå‚æ•°Lambdaä¼šç›´æ¥æ›¿ä»£å…·ä½“çš„è°ƒç”¨ï¼Œæ‰€ä»¥å®é™…äº§ç”Ÿçš„ä»£ç ä¸­ï¼Œreturnç›¸å½“äºç›´æ¥æš´éœ²åœ¨mainå‡½æ•°ä¸­ï¼Œæ‰€ä»¥returning()ä¹‹åçš„ä»£ç è‡ªç„¶ä¸ä¼šè¢«æ‰§è¡Œã€‚è¿™ä¸ªå°±æ˜¯æ‰€è°“çš„éå±€éƒ¨è¿”å›ã€‚ ä½¿ç”¨æ ‡ç­¾å®ç°Lambdaéå±€éƒ¨è¿”å›å¦å¤–ä¸€ç§ç­‰æ•ˆçš„æ–¹å¼ï¼Œæ˜¯é€šè¿‡æ ‡ç­¾åˆ©ç”¨@ç¬¦å·æ¥å®ç°Lambdaéå±€éƒ¨è¿”å›ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸ç”³æ˜inlineçš„æƒ…å†µä¸‹ï¼Œå®ç°åŒæ ·çš„æ•ˆæœï¼š fun main(args: Array&lt;String&gt;) { foo (return@foo) } fun foo(returning: () -&gt; Unit) { println(&quot;before local return&quot;) returning() println(&quot;after local return&quot;) return } //è¿è¡Œç»“æœ //before local return crossinlineæˆ‘ä»¬å†…è”å‡½æ•°æ‰€æ¥æ”¶çš„Lambdaå‚æ•°å¸¸å¸¸æ¥è‡ªäºä¸Šä¸‹æ–‡å…¶ä»–åœ°æ–¹ï¼Œä¸ºäº†é¿å…å¸¦æœ‰returnçš„Lambdaå‚æ•°äº§ç”Ÿç ´åï¼Œæˆ‘ä»¬å¯ä»¥æ˜¯crossinlineæ¥ä¿®é¥°è¯¥å‚æ•°ï¼Œä»è€Œæœç»è¯¥é—®é¢˜çš„å‘ç”Ÿã€‚ fun main(args:Array&lt;String&gt;) { foo {return}//returnä¼šæœ‰ä¸‹æ»‘æ³¢æµªçº¿ï¼ŒIDEAä¼šæŠ¥é”™ } inline fun foo(crossinline returning:()-&gt;Unit) { println(&quot;before&quot;) returning() println(&quot;after&quot;) return } å…·ä½“åŒ–å‚æ•°ç±»å‹é™¤äº†éå±€éƒ¨è¿”å›ä¹‹å¤–ï¼Œå†…è”å‡½æ•°è¿˜å¯ä»¥å¸®åŠ©Kotlinå®ç°å…·ä½“åŒ–å‚æ•°ç±»å‹ï¼ŒKotlinä¸Javaä¸€æ ·ï¼Œç”±äºè¿è¡Œæ—¶çš„ç±»å‹æ“¦æ‹­ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½ç›´æ¥è·å–ä¸€ä¸ªå‚æ•°çš„ç±»å‹ã€‚ç„¶è€Œï¼Œç”±äºå†…è”å‡½æ•°ä¼šç›´æ¥åœ¨å­—èŠ‚ç ä¸­ç”Ÿæˆç›¸åº”çš„å‡½æ•°ä½“å®ç°ï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬åè€Œå¯ä»¥è·å¾—å‚æ•°çš„å…·ä½“ç±»å‹ï¼Œå¯ä»¥ç”¨reifiedä¿®é¥°ç¬¦æ¥å®ç°è¿™ä¸€æ•ˆæœ fun main(args:Array&lt;String&gt;){ getType&lt;Int&gt;() } inline fun &lt;reified T&gt;getType() { print(T::class) } //è¿è¡Œç»“æœ //class Kotlin.Int è¿™ä¸€ç‰¹æ€§åœ¨Androidä¸­æ ¼å¤–æœ‰ç”¨ã€‚æ¯”å¦‚ï¼Œå½“æˆ‘ä»¬è¦è°ƒç”¨startActivityæ—¶ï¼Œé€šå¸¸éœ€è¦æŠŠå…·ä½“çš„ç›®æ ‡è§†å›¾ç±»ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œè€Œåœ¨Kotlinä¸­: inline fun &lt;reified T : Activity&gt; Activity.startActivity() { startActivity(Intent(this,T::class.java)) } //usage startActivity&lt;LoginActivity&gt;() END","link":"/2019/11/18/kotlin-inline/"},{"title":"WindowManagerçª—å£ç®¡ç†","text":"WindowManagerç›¸å…³å±æ€§æ±‡æ€» WindowManagerçª—å£ç®¡ç†WindowManageræ˜¯androidçš„çª—å£ç®¡ç†å™¨ï¼Œæ‰€æœ‰æ˜¾ç¤ºçª—å£éƒ½å¯ä»¥é€šè¿‡å®ƒæ¥æ§åˆ¶ WindowManager.addView(view,layoutParams) æ·»åŠ ä¸€ä¸ªviewåˆ°çª—å£ä¸­ WindowManager.updateView(view,layoutParams) æ›´æ–°çª—å£ä¸­çš„viewå±æ€§ WindowManager.removeView(view) åˆ é™¤çª—å£ä¸­çš„View WindowManager.LayoutParamsè·å–å¸ƒå±€å‚æ•° WindowManager.LayoutParams params = getWindow().getAttributes(); åˆ›å»ºå¸ƒå±€å‚æ•° WindowManager.LayoutParams params = new WindowManager.LayoutParams(); WindowManager.LayoutParams.typeç”¨äºç¡®å®šçª—å£åœ¨å±å¹•ä¸Šçš„æ˜¾ç¤ºå±‚æ¬¡ FIRST_APPLICATION_WINDOW æ™®é€šåº”ç”¨çš„ç¬¬ä¸€ä¸ªçª—å£ TYPE_BASE_APPLICATION ä½œä¸ºæ‰€æœ‰åº”ç”¨åŸºç¡€çš„çª—å£, å…¶ä»–åº”ç”¨çª—å£éƒ½åœ¨å…¶ä¸Š TYPE_APPLICATION æ™®é€šåº”ç”¨çª—å£. tokenå¿…é¡»ä¸ºActivityçš„token, æŒ‡æ˜è¯¥çª—å£å±äºè° TYPE_APPLICATION_STARTING åº”ç”¨å¯åŠ¨æ—¶æ˜¾ç¤ºçš„çª—å£. ç”¨äºç³»ç»Ÿåœ¨åº”ç”¨èƒ½å¤Ÿæ˜¾ç¤ºä¹‹å‰æ˜¾ç¤ºä¸€äº›ä¸œè¥¿ LAST_APPLICATION_WINDOW åº”ç”¨æœ€åä¸€ç§çª—å£ç±»å‹ FIRST_SUB_WINDOW å­çª—å£ TYPE_APPLICATION_PANEL åœ¨åº”ç”¨çª—å£ä¹‹ä¸Šçš„é¢æ¿çª—å£, å‡ºç°åœ¨æ‰€ä¾é™„çš„çª—å£ä¹‹ä¸Š TYPE_APPLICATION_MEDIA æ˜¾ç¤ºåª’ä½“(å¦‚è§†é¢‘)çš„çª—å£, åœ¨ä»–ä»¬ä¾é™„çš„çª—å£ä¹‹ä¸‹æ˜¾ç¤º TYPE_APPLICATION_SUB_PANEL åº”ç”¨çª—å£ä¹‹ä¸Šçš„å­é¢æ¿çª—å£, æ˜¾ç¤ºåœ¨æ‰€ä¾é™„çš„çª—å£å’Œå…¶ä»–é¢æ¿ä¹‹ä¸Š TYPE_APPLICATION_ATTACHED_DIALOG ç±»ä¼¼TYPE_APPLICATION_PANEL, ä½†ä¼šä½œä¸ºé¡¶å±‚çª—å£, è€Œä¸æ˜¯å®¹å™¨çš„å­çª—å£ TYPE_APPLICATION_MEDIA_OVERLAY éšè—åœ¨åª’ä½“çª—å£ä¸Šæ˜¾ç¤ºè¦†ç›–å±‚çš„çª—å£,æ˜¾ç¤ºåœ¨TYPE_APPLICATION_MEDIAå’Œåº”ç”¨çª—å£ä¹‹é—´ TYPE_APPLICATION_ABOVE_SUB_PANEL ä¸€ä¸ªå­é¢æ¿çª—å£, åœ¨åº”ç”¨çª—å£å’Œå­é¢æ¿çª—å£ä¹‹ä¸Š LAST_SUB_WINDOW æœ€åä¸€ä¸ªå­çª—å£ FIRST_SYSTEM_WINDOW ç¬¬ä¸€ä¸ªç³»ç»Ÿçª—å£ TYPE_STATUS_BAR çŠ¶æ€æ ,åªèƒ½æœ‰ä¸€ä¸ªçŠ¶æ€æ çª—å£. æ”¾ç½®åœ¨å±å¹•ä¸Šæ–¹, å…¶ä»–æ‰€æœ‰çª—å£éƒ½åœ¨å…¶ä¹‹ä¸‹ TYPE_SEARCH_BAR æœç´¢æ¡,åªèƒ½æœ‰ä¸€ä¸ªæœç´¢æ¡çª—å£, æ”¾ç½®åœ¨å±å¹•é¡¶å±‚ TYPE_PHONE ç”µè¯çª—å£,è¿™æ˜¯éåº”ç”¨çª—å£, ç”¨äºæ¥ç”µçš„ç•Œé¢,è¯¥çª—å£é€šå¸¸ç½®äºæ‰€æœ‰åº”ç”¨ä¹‹ä¸Š, ä½†åœ¨çŠ¶æ€æ ä¸‹ TYPE_SYSTEM_ALERT ç³»ç»Ÿçª—å£, ä¾‹å¦‚ä½ç”µé‡è­¦å‘Šå¼¹çª—, åœ¨åº”ç”¨çª—å£ä¹‹ä¸Š TYPE_KEYGUARD é”å±çª—å£ TYPE_TOAST é€æ˜é€šçŸ¥. ä¸ä¼šæ‹¦æˆªè§¦æ‘¸äº‹ä»¶, å¯ä»¥å‘ä¸‹é€ä¼  TYPE_SYSTEM_OVERLAY ç³»ç»Ÿè¦†ç›–çª—å£, åœ¨æ‰€æœ‰ä¸œè¥¿ä¹‹ä¸Š. è¯¥çª—å£å¿…é¡»ç¦æ­¢è·å–è¾“å…¥ç„¦ç‚¹, å¦åˆ™ä¼šå˜æˆé”å± TYPE_PRIORITY_PHONE ä¼˜å…ˆçº§ç”µè¯, å³ä½¿é”å±ä¹Ÿä¼šæ˜¾ç¤º,è¯¥çª—å£å¿…é¡»ç¦æ­¢è·å–è¾“å…¥ç„¦ç‚¹, å¦åˆ™ä¼šå˜æˆé”å± TYPE_SYSTEM_DIALOG çŠ¶æ€æ æ‹‰å‡ºçš„é¢æ¿ TYPE_KEYGUARD_DIALOG é”å± TYPE_SYSTEM_ERROR ç³»ç»Ÿé”™è¯¯çª—å£, åœ¨æ‰€æœ‰å†…å®¹ä¹‹ä¸Š TYPE_INPUT_METHOD è¾“å…¥æ³•çª—å£, åœ¨æ™®é€šUIä¹‹ä¸Šï¼Œå¯ä»¥ç¼©æ”¾ TYPE_INPUT_METHOD_DIALOG è¾“å…¥æ³•å¯¹è¯æ¡†çª—å£, åœ¨å½“å‰è¾“å…¥æ³•çª—å£ä¹‹ä¸Š TYPE_WALLPAPER å£çº¸çª—å£, åœ¨ä»»æ„çª—å£ä¹‹ä¸‹, å£çº¸ä¹‹ä¸Š TYPE_STATUS_BAR_PANEL çŠ¶æ€æ æ‹‰å‡ºçš„é¢æ¿ TYPE_SECURE_SYSTEM_OVERLAY å®‰å…¨çš„ç³»ç»Ÿè¦†ç›–çª—å£, åœ¨æ‰€æœ‰å†…å®¹ä¹‹ä¸Šï¼Œå¿…é¡»ç¦æ­¢è·å–è¾“å…¥ç„¦ç‚¹, å¦åˆ™ä¼šå˜æˆé”å±ï¼ŒåŒTYPE_SYSTEM_OVERLAYç±»ä¼¼, åŒºåˆ«æ˜¯åªå…è®¸ç³»ç»Ÿåˆ›å»ºè¿™ç§è¦†ç›–å±‚,ï¼Œåº”ç”¨æ— æ³•åˆ›å»º TYPE_DRAG æ‹–æ‹½çª—å£ï¼Œæœ€å¤šæœ‰ä¸€ä¸ª, åœ¨æ‰€æœ‰çª—å£ä¹‹ä¸Š TYPE_STATUS_BAR_SUB_PANEL çŠ¶æ€æ æ‹‰å‡ºçš„é¢æ¿, åœ¨çŠ¶æ€æ ä¹‹ä¸‹ TYPE_POINTER é¼ æ ‡æŒ‡é’ˆ TYPE_NAVIGATION_BAR å¯¼èˆªæ¡ TYPE_VOLUME_OVERLAY è°ƒæ•´éŸ³é‡æ—¶æ˜¾ç¤ºçš„éŸ³é‡çª—å£ TYPE_BOOT_PROGRESS éšè—ï¼Œå¯åŠ¨è¿›åº¦å¯¹è¯æ¡†, åœ¨å…¨å±€ä»»ä½•äº‹ç‰©ä¹‹ä¸Š TYPE_INPUT_CONSUMER æ¶ˆè´¹è¾“å…¥äº‹ä»¶çš„çª—å£ TYPE_DREAM éšè—ï¼Œå±ä¿çª—å£, åœ¨é”å±ä¹‹ä¸Š TYPE_NAVIGATION_BAR_PANEL å¯¼èˆªæ¡é¢æ¿ TYPE_DISPLAY_OVERLAY æ˜¾ç¤ºè¦†ç›–çª—å£, ç”¨äºæ¨¡æ‹Ÿç¬¬äºŒä¸ªæ˜¾ç¤ºè®¾å¤‡ TYPE_MAGNIFICATION_OVERLAY æ”¾å¤§è¦†ç›–çª—å£ï¼Œç”¨äºçªå‡ºæ”¾å¤§çš„éƒ¨åˆ† TYPE_KEYGUARD_SCRIM éšè—ï¼Œé”å±scrimçª—å£, å½“é”å±éœ€è¦é‡å¯æ—¶æ˜¾ç¤º TYPE_PRIVATE_PRESENTATION Presentationçª—å£ TYPE_VOICE_INTERACTION éšè—ï¼Œè¯­éŸ³äº’åŠ¨çª—å£ TYPE_ACCESSIBILITY_OVERLAY è¾…åŠ©åŠŸèƒ½è¦†ç›–å±‚ TYPE_VOICE_INTERACTION_STARTING éšè—ï¼Œè¯­éŸ³äº’åŠ¨å¼€å§‹çª—å£ TYPE_DOCK_DIVIDER éšè—ï¼Œæ‰˜ç›˜çª—å£, ä»…ç³»ç»Ÿè¿›ç¨‹æ‹¥æœ‰ TYPE_QS_DIALOG ç±»ä¼¼TYPE_APPLICATION_ATTACHED_DIALOG, ä½†ç”¨äºå¿«é€Ÿè®¾ç½® TYPE_SCREENSHOT éšè—ï¼ŒåŒTYPE_DREAMç±»ä¼¼, ä½†ç”¨äºæˆªå± WindowManager.LayoutParams.flagsç”¨äºç¡®å®šçª—å£çš„è¡Œä¸º FLAG_ALLOW_LOCK_WHILE_SCREEN_ON å½“çª—å£å¯¹ç”¨æˆ·å¯è§æ—¶, å…è®¸é”å±.å¯ä»¥å•ç‹¬ä½¿ç”¨, ä¹Ÿå¯ä»¥å’ŒFLAG_KEEP_SCREEN_ONå’ŒFLAG_SHOW_WHEN_LOCKEDç»“åˆä½¿ç”¨ FLAG_DIM_BEHIND è¯¥çª—å£ä»¥ä¸‹çš„å†…å®¹éƒ½ä¼šå˜æš—,å¯ä»¥ä½¿ç”¨dimAmountæ¥æ§åˆ¶å˜æš—çš„ç¨‹åº¦ FLAG_BLUR_BEHIND å¤±æ•ˆäº†, ä¸å†æ”¯æŒ,è¯¥çª—å£ä»¥ä¸‹çš„å†…å®¹éƒ½ä¼šæ¨¡ç³Š FLAG_NOT_FOCUSABLE è¯¥çª—å£ä¸å¯è·å–æŒ‰é”®è¾“å…¥ç„¦ç‚¹, å› æ­¤ç”¨æˆ·æ— æ³•å‘å…¶å‘é€æŒ‰é”®æˆ–æŒ‰é’®äº‹ä»¶. è¿™äº›äº‹ä»¶ä¼šè¢«çª—å£ä»¥ä¸‹çš„æ§ä»¶è·å–.,è¯¥flagåŒæ—¶ä¼šå¯åŠ¨FLAG_NOT_TOUCH_MODAL,æ— è®ºä½ æ˜¯å¦æ˜¾å¼çš„è®¾ç½®,è®¾ç½®è¯¥flagåŒæ—¶æš—ç¤ºç€,è¯¥çª—å£ä¸å†éœ€è¦åŒè¾“å…¥æ³•äº¤äº’,å› æ­¤è¯¥çª—å£å’Œè¾“å…¥æ³•çª—å£ä¼šä»¥Zè½´æ–¹å¼å æ”¾ä¸€èˆ¬è¯¥çª—å£ä¼šè¦†ç›–åœ¨è¾“å…¥æ³•çª—å£ä¹‹ä¸Š),å¯ä»¥ä½¿ç”¨FLAG_ALT_FOCUSABLE_IMæ¥ä¿®æ”¹è¿™ä¸ªè¡Œä¸º FLAG_NOT_TOUCHABLE è¯¥çª—å£ä¸å¯æ¥æ”¶ä»»ä½•è§¦æ‘¸äº‹ä»¶ FLAG_NOT_TOUCH_MODAL å…è®¸ä»»ä½•åœ¨è¯¥çª—å£ä¹‹å¤–çš„è§¦æ‘¸äº‹ä»¶ä¼ é€’åˆ°è¯¥çª—å£ä»¥ä¸‹çš„æ§ä»¶, å³ä½¿è¯¥çª—å£æ˜¯focusableçš„(å³æ²¡æœ‰è®¾ç½®FLAG_NOT_FOCUSABLE).å¦åˆ™è¯¥çª—å£ä¼šæ¶ˆè´¹æ‰€æœ‰çš„è§¦æ‘¸äº‹ä»¶, æ— è®ºè§¦æ‘¸æ˜¯å¦åœ¨çª—å£ä¹‹å†… FLAG_TOUCHABLE_WHEN_WAKING å·²ç»è¿‡æ—¶, ç°åœ¨æ²¡æœ‰ä»»ä½•æ•ˆæœ,å¦‚æœè®¾å¤‡å¤„äºç¡çœ ä¸­, æ­¤æ—¶ç¬¬ä¸€æ¬¡ç‚¹å‡»å±å¹•çš„äº‹ä»¶å°†ä¼šè¢«è¯¥çª—å£æ¥æ”¶,é€šå¸¸ç¬¬ä¸€æ¬¡è§¦æ‘¸äº‹ä»¶ä¼šè¢«ç³»ç»Ÿæ¶ˆè´¹,å› ä¸ºç”¨æˆ·æ— æ³•çœ‹è§ä»–ä»¬ç‚¹å‡»çš„æ˜¯ä»€ä¹ˆ FLAG_KEEP_SCREEN_ON å½“çª—å£å¯¹äºç”¨æˆ·å¯è§æ—¶, ä¿æŒè®¾å¤‡å±å¹•å¸¸äº® FLAG_LAYOUT_IN_SCREEN å°†çª—å£æ”¾ç½®åœ¨æ•´ä¸ªå±å¹•ä¸­,å¿½ç•¥çŠ¶æ€æ ç­‰å‘¨è¾¹è£…é¥°è¾¹æ¡†.,çª—å£å†…å®¹å¿…é¡»å®šä½æ­£ç¡®,æ‰èƒ½è·å–åˆ°è£…é¥°è¾¹æ¡†ä¿¡æ¯ FLAG_LAYOUT_NO_LIMITS å…è®¸çª—å£æ‰©å±•åˆ°å±å¹•ä¹‹å¤– FLAG_FULLSCREEN å½“è¯¥çª—å£æ˜¾ç¤ºæ—¶, éšè—æ‰€æœ‰å±å¹•è£…é¥°(å¦‚çŠ¶æ€æ ),å…è®¸çª—å£ä½¿ç”¨æ•´ä¸ªå±å¹•,å½“å¸¦æœ‰è¯¥flagçš„çª—å£æ˜¯é¡¶å±‚çª—å£æ—¶, çŠ¶æ€æ ä¼šè¢«éšè—,å…¨å±çª—å£ä¼šå¿½ç•¥SOFT_INPUT_ADJUST_RESIZEå¯¹äºsoftInputModeçš„å€¼,çª—å£ä¼šä¸€ç›´ä¿æŒå…¨å±, ä¸”ä¸èƒ½ç¼©æ”¾å¯ä»¥é€šè¿‡themeå±æ€§æ¥æ§åˆ¶, å¦‚Theme_Black_NoTitleBar_Fullscreenç­‰ FLAG_FORCE_NOT_FULLSCREEN è¦†ç›–FLAG_FULLSCREEN, å¹¶å¼ºåˆ¶æ˜¾ç¤ºå±å¹•è£…é¥°(å¦‚çŠ¶æ€æ ) FLAG_DITHER è¿‡æ—¶, ä¸å†ä½¿ç”¨,å¼€å¯å›¾åƒæŠ–åŠ¨ FLAG_SECURE å°†çª—å£å†…å®¹ä½œä¸ºå®‰å…¨å†…å®¹, é˜»æ­¢çª—å£å‡ºç°åœ¨æˆªå±, æˆ–æ˜¯è¢«ä¸å®‰å…¨çš„æ˜¾ç¤ºå™¨æ˜¾ç¤º FLAG_SCALED å¯ä»¥æ ¹æ®å¸ƒå±€å‚æ•°è¿›è¡Œæ‹‰ä¼¸ FLAG_IGNORE_CHEEK_PRESSES ç”¨äºåœ¨ç”¨æˆ·å°†å±å¹•è´´è¿‘è„¸éƒ¨æ—¶, é˜²æ­¢è¯¯æŒ‰ FLAG_LAYOUT_INSET_DECOR ä»…åŒFLAG_LAYOUT_IN_SCREENä¸€èµ·ä½¿ç”¨.çª—å£å¯èƒ½å‡ºç°åœ¨è£…é¥°ä¸‹é¢(å¦‚çŠ¶æ€æ ä¸‹é¢),ä½¿ç”¨è¿™ä¸ªflagå, çª—å£ä¼šç¡®ä¿ä¸ä¼šè¢«è£…é¥°ç‰©è¦†ç›– FLAG_ALT_FOCUSABLE_IM åè½¬FLAG_NOT_FOCUSABLEçš„äº¤äº’çŠ¶æ€.å³, å¦‚æœåŒæ—¶è®¾ç½®äº†æœ¬flagå’ŒFLAG_NOT_FOCUSABLE,åˆ™çª—å£è¡¨ç°ä¸ºéœ€è¦åŒè¾“å…¥æ³•äº¤äº’,åŒæ—¶ä¼šè¢«è‡³äºè¾“å…¥æ³•ä¹‹ä¸‹,å¦‚æœè®¾ç½®äº†æœ¬flagè€Œæ²¡æœ‰è®¾ç½®FLAG_NOT_FOCUSABLE, åˆ™çª—å£è¡¨ç°ä¸ºä¸éœ€è¦åŒè¾“å…¥æ³•äº¤äº’, åŒæ—¶ä¼šè¢«è‡³äºè¾“å…¥æ³•ä¹‹ä¸Š FLAG_WATCH_OUTSIDE_TOUCH å¦‚æœè®¾ç½®äº†FLAG_NOT_TOUCH_MODAL,é‚£ä¹ˆå¯ä»¥åŒæ—¶è®¾ç½®æ­¤flagæ¥æ¥æ”¶çª—å£ä¹‹å¤–å‘ç”Ÿçš„MotionEvent.ACTION_OUTSIDEäº‹ä»¶.æ³¨æ„, ä½ ä¸ä¼šæ¥æ”¶åˆ°å®Œæ•´çš„down/move/upæ‰‹åŠ¿,åªä¼šæ¥æ”¶åˆ°æŒ‰ä¸‹ä½ç½®çš„ACTION_OUTSIDEäº‹ä»¶ FLAG_SHOW_WHEN_LOCKED å½“é”å±æ—¶, å…è®¸çª—å£æ˜¾ç¤º,çª—å£ä¼˜å…ˆäºé”å±,å¯ä»¥åŒFLAG_KEEP_SCREEN_ONä¸€èµ·ä½¿ç”¨,æ¥ä¿æŒå±å¹•å¸¸äº®å¹¶åœ¨æ˜¾ç¤ºé”å±ä¹‹å‰æ˜¾ç¤ºè¯¥çª—å£,å¯ä»¥åŒFLAG_DISMISS_KEYGUARDä¸€èµ·ä½¿ç”¨,æ¥å–æ¶ˆéå®‰å…¨çš„é”å±,è¯¥flagåªèƒ½åº”ç”¨äºæœ€é¡¶å±‚çš„å…¨å±çª—å£ FLAG_SHOW_WALLPAPER è¦æ±‚ç³»ç»Ÿå£çº¸æ˜¾ç¤ºåœ¨çª—å£ä¹‹ä¸‹,çª—å£å¿…é¡»æ˜¯é€æ˜çš„, æ‰å¯ä»¥çœ‹åˆ°å£çº¸,è¯¥flagåªä¿è¯å£çº¸å­˜åœ¨,å¯ä»¥é€šè¿‡themeå±æ€§æ¥è®¾ç½®,å¦‚Theme_Wallpaper_NoTitleBarç­‰ FLAG_TURN_SCREEN_ON å½“çª—å£è¢«æ·»åŠ æˆ–ä»ä¸å¯è§åˆ°å¯è§çŠ¶æ€æ—¶, ä¼šç‚¹äº®å±å¹• FLAG_DISMISS_KEYGUARD ç¦ç”¨é”å±,é™¤éæ˜¯éå®‰å…¨é”å±,ä¸FLAG_SHOW_WHEN_LOCKEDæ­£ç›¸å,å¦‚æœé”å±å½“å‰æ˜¯æ¿€æ´»çš„,å¹¶ä¸”æ˜¯å®‰å…¨é”å±(éœ€è¦è§£é”çš„),é‚£ä¹ˆç”¨æˆ·ä»éœ€è¦è¿›è¡Œè§£é”æ‰èƒ½çœ‹åˆ°çª—å£,é™¤éè®¾ç½®äº†FLAG_SHOW_WHEN_LOCKED FLAG_SPLIT_TOUCH çª—å£ä¼šæ¥æ”¶çª—å£ä¹‹å¤–çš„å¤šç‚¹è§¦æ‘¸äº‹ä»¶ FLAG_HARDWARE_ACCELERATED å¯¹çª—å£å¯ç”¨ç¡¬ä»¶åŠ é€Ÿ FLAG_LAYOUT_IN_OVERSCAN å…è®¸çª—å£æ‰©å±•åˆ°overscanåŒºåŸŸ FLAG_TRANSLUCENT_STATUS è¦æ±‚çŠ¶æ€æ é€æ˜ FLAG_TRANSLUCENT_NAVIGATION è¦æ±‚å¯¼èˆªæ é€æ˜ FLAG_LOCAL_FOCUS_MODE å…è®¸ç‹¬ç«‹äºwindow manageræ¥æ§åˆ¶ç„¦ç‚¹äº‹ä»¶,é€šå¸¸è¯¥æ¨¡å¼çš„çª—å£ä¸èƒ½ä»window managerè·å–è§¦æ‘¸/æŒ‰é”®äº‹ä»¶, ä½†èƒ½å¤Ÿé€šè¿‡Window#injectInputEvent(InputEvent)æ¥è·å–æœ¬åœ°æ³¨å…¥äº‹ä»¶ FLAG_SLIPPERY éšè—,å…è®¸è§¦æ‘¸ä»ä¸€ä¸ªçª—å£åˆ’å‡ºåˆ°å¦ä¸€ä¸ªçª—å£,è¯¥flagä»…å¯¹å½“å‰çª—å£ç”Ÿæ•ˆ,è§¦æ‘¸å¯ä»¥åˆ’å‡º, ä½†æ— æ³•å†åˆ’å…¥ FLAG_LAYOUT_ATTACHED_IN_DECOR å½“å¸ƒå±€ä¾é™„äºçª—å£æ—¶, æ‰€ä¾é™„çš„çª—å£å¯èƒ½ä¼šè¦†ç›–åœ¨å±å¹•è£…é¥°ä¹‹ä¸Š, æ¯”å¦‚å¯¼èˆªæ .è®¾ç½®æ­¤flagå,windowmanagerå°†åœ¨decorçª—å£å†…å¯¹æ‰€ä¾é™„çš„çª—å£è¿›è¡Œå¸ƒå±€,è¿™æ ·ä¾¿ä¸ä¼šè¦†ç›–åœ¨å±å¹•è£…é¥°ä¸Š FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS æŒ‡ç¤ºè¯¥çª—å£ç”¨äºç»˜åˆ¶ç³»ç»ŸçŠ¶æ€æ çš„èƒŒæ™¯,å¦‚æœè®¾ç½®æ­¤flag, ç³»ç»ŸçŠ¶æ€æ ä¼šå˜ä¸ºé€æ˜èƒŒæ™¯, çª—å£ä¸­å“åº”çš„åŒºåŸŸä¼šè¢«Window#getStatusBarColor()å’ŒWindow#getNavigationBarColor()çš„é¢œè‰²æ‰€å¡«å…… WindowManager.LayoutParams.softInputModeç”¨äºç¡®å®šçª—å£å’Œè¾“å…¥æ³•ä¹‹é—´çš„å…³ç³» SOFT_INPUT_MASK_STATE æŒ‡å®šè¾“å…¥æ³•çš„è¦†ç›–å±‚, ç¡®å®šè¾“å…¥æ³•åŒºåŸŸæ˜¯å¦å¯è§çš„ä»£ç  SOFT_INPUT_STATE_UNSPECIFIED è¾“å…¥æ³•çš„å¯è§çŠ¶æ€ä¸º: æœªæŒ‡å®šçŠ¶æ€ SOFT_INPUT_STATE_UNCHANGED è¾“å…¥æ³•çš„å¯è§çŠ¶æ€ä¸º: ä¸æ”¹å˜è¾“å…¥æ³•å½“å‰çŠ¶æ€ SOFT_INPUT_STATE_HIDDEN è¾“å…¥æ³•çš„å¯è§çŠ¶æ€ä¸º: ç”¨æˆ·è¿›å…¥çª—å£æ—¶, éšè—æ‰€æœ‰è¾“å…¥æ³• SOFT_INPUT_STATE_ALWAYS_HIDDEN è¾“å…¥æ³•çš„å¯è§çŠ¶æ€ä¸º: çª—å£è·å–ç„¦ç‚¹æ—¶, éšè—æ‰€æœ‰è¾“å…¥æ³• SOFT_INPUT_STATE_VISIBLE è¾“å…¥æ³•çš„å¯è§çŠ¶æ€ä¸º: ç”¨æˆ·è¿›å…¥çª—å£æ—¶, æ˜¾ç¤ºè¾“å…¥æ³• SOFT_INPUT_STATE_ALWAYS_VISIBLE è¾“å…¥æ³•çš„å¯è§çŠ¶æ€ä¸º: å½“çª—å£è·å–è¾“å…¥ç„¦ç‚¹æ—¶, æ˜¾ç¤ºè¾“å…¥æ³• SOFT_INPUT_MASK_ADJUST æŒ‡å®šçª—å£æ˜¯å¦åº”è¯¥æ ¹æ®è¾“å…¥æ³•è¿›è¡Œè°ƒæ•´çš„ä»£ç  SOFT_INPUT_ADJUST_UNSPECIFIED çª—å£è°ƒæ•´è®¾ç½®ä¸º: æœªæŒ‡å®š, ç³»ç»Ÿä¼šå°è¯•è¿›è¡Œé€‰æ‹© SOFT_INPUT_ADJUST_RESIZE çª—å£è°ƒæ•´è®¾ç½®ä¸º: å½“æ˜¾ç¤ºè¾“å…¥æ³•æ—¶, å…è®¸çª—å£è¢«ç¼©æ”¾, ä½¿å¾—çª—å£çš„å†…å®¹ä¸ä¼šè¢«è¾“å…¥æ³•è¦†ç›–,ä¸èƒ½åŒSOFT_INPUT_ADJUST_PANä¸€èµ·ä½¿ç”¨,å¦‚æœçª—å£å¸ƒå±€å±æ€§åŒ…å«FLAG_FULLSCREEN, è¯¥é€‰é¡¹ä¼šè¢«å¿½ç•¥,çª—å£ä¸ä¼šç¼©æ”¾, è€Œæ˜¯ä¿æŒå…¨å± SOFT_INPUT_ADJUST_PAN çª—å£è°ƒæ•´è®¾ç½®ä¸º: å½“æ˜¾ç¤ºè¾“å…¥æ³•æ—¶,ç§»åŠ¨çª—å£ä½¿å¾—è¾“å…¥ç„¦ç‚¹å¯è§,è€Œä¸ä¼šç¼©æ”¾çª—å£ä¸èƒ½åŒSOFT_INPUT_ADJUST_RESIZEä¸€èµ·ä½¿ç”¨ SOFT_INPUT_ADJUST_NOTHING çª—å£è°ƒæ•´è®¾ç½®ä¸º: å½“æ˜¾ç¤ºè¾“å…¥æ³•æ—¶, æ—¢ä¸ç¼©æ”¾, ä¹Ÿä¸ç§»åŠ¨ SOFT_INPUT_IS_FORWARD_NAVIGATION ç”¨æˆ·å¯¼èˆªåˆ°æ­¤çª—å£æ—¶çš„é…ç½®ä»£ç . é€šå¸¸æœ‰ç³»ç»Ÿé…ç½®, é™¤éä½ éœ€è¦è‡ªå®šä¹‰. å½“çª—å£æ˜¾ç¤ºå,è¯¥é…ç½®ä¼šæ¸…é™¤ ActivityInfo.screenOrientationç”¨äºç¡®å®šçª—å£çš„æ–¹å‘ SCREEN_ORIENTATION_UNSPECIFIED ä¸æŒ‡å®šå±å¹•æ–¹å‘, è·Ÿéšç³»ç»Ÿ SCREEN_ORIENTATION_LANDSCAPE é»˜è®¤çš„æ¨ªå‘(å¬ç­’åœ¨å·¦, æŒ‰é”®åœ¨å³) SCREEN_ORIENTATION_PORTRAIT é»˜è®¤çš„ç«–å‘(å¬ç­’åœ¨ä¸Š, æŒ‰é”®åœ¨ä¸‹, ä¸åŒ…æ‹¬å¬ç­’åœ¨ä¸‹, æŒ‰é”®åœ¨ä¸Š) SCREEN_ORIENTATION_REVERSE_LANDSCAPE ä¸é»˜è®¤ç›¸åçš„æ¨ªå‘(å¬ç­’åœ¨å³, æŒ‰é”®åœ¨å·¦) SCREEN_ORIENTATION_REVERSE_PORTRAIT ä¸é»˜è®¤ç›¸åçš„ç«–å‘(å®é™…å’ŒSCREEN_ORIENTATION_PORTRAITä¸€æ ·) SCREEN_ORIENTATION_SENSOR é‡åŠ›ä¼ æ„Ÿå™¨æ„ŸçŸ¥çš„æ–¹å‘(é™¤å¬ç­’åœ¨ä¸‹, æŒ‰é”®åœ¨ä¸Šçš„3ä¸ªæ–¹å‘) SCREEN_ORIENTATION_NOSENSOR ä¸ä½¿ç”¨ä¼ æ„Ÿå™¨æ–¹å‘ SCREEN_ORIENTATION_SENSOR_LANDSCAPE é‡åŠ›æ–¹å‘çš„æ¨ªå‘(å¬ç­’åœ¨å·¦, æŒ‰é”®åœ¨å³ / å¬ç­’åœ¨å³, æŒ‰é”®åœ¨å·¦) SCREEN_ORIENTATION_SENSOR_PORTRAIT é‡åŠ›æ–¹å‘çš„ç«–å‘(å¬ç­’åœ¨ä¸Š, æŒ‰é”®åœ¨ä¸‹, ä¸åŒ…æ‹¬å¬ç­’åœ¨ä¸‹, æŒ‰é”®åœ¨ä¸Š) SCREEN_ORIENTATION_FULL_SENSOR é‡åŠ›æ–¹å‘(å¬ç­’åœ¨ä¸Š, æŒ‰é”®åœ¨ä¸‹ / å¬ç­’åœ¨ä¸‹, æŒ‰é”®åœ¨ä¸Š / å¬ç­’åœ¨å·¦, æŒ‰é”®åœ¨å³ /å¬ç­’åœ¨å³,æŒ‰é”®åœ¨å·¦) SCREEN_ORIENTATION_USER ç”¨æˆ·è®¾ç½®çš„æ–¹å‘ SCREEN_ORIENTATION_USER_LANDSCAPE ç”¨æˆ·è®¾ç½®çš„æ¨ªå‘ SCREEN_ORIENTATION_USER_PORTRAIT ç”¨æˆ·è®¾ç½®çš„ç«–å‘ SCREEN_ORIENTATION_FULL_USER ç”¨æˆ·è®¾ç½®çš„4ä¸ªæ–¹å‘(å¬ç­’åœ¨ä¸Š, æŒ‰é”®åœ¨ä¸‹ / å¬ç­’åœ¨ä¸‹, æŒ‰é”®åœ¨ä¸Š / å¬ç­’åœ¨å·¦, æŒ‰é”®åœ¨å³ /å¬ç­’åœ¨å³, æŒ‰é”®åœ¨å·¦) SCREEN_ORIENTATION_BEHIND å½“å‰ç•Œé¢ä¸‹çš„Activityçš„æ–¹å‘ SCREEN_ORIENTATION_LOCKED é”å®šå½“å‰æ–¹å‘ è·å–å½“å‰æ–¹å‘ int mCurrentOrientation = getResources().getConfiguration().orientation; WindowManager.LayoutParams.rotationAnimationç”¨äºç¡®å®šå±å¹•æ—‹è½¬æ—¶çš„åŠ¨ç”». æ˜¯å¦æœ‰æ•ˆå–å†³äºæ‰‹æœº ROTATION_ANIMATION_JUMPCUT ç«‹åˆ»åˆ‡æ¢, æ²¡æœ‰åŠ¨ç”» ROTATION_ANIMATION_CROSSFADE æœ‰æ·¡å…¥æ·¡å‡ºæ•ˆæœ ROTATION_ANIMATION_ROTATE æ—‹è½¬åŠ¨ç”» ROTATION_ANIMATION_CHANGED (ä¸çŸ¥é“) params.dimAmountçª—å£ä¸‹å±‚å˜æš—ç¨‹åº¦, é»˜è®¤1.0fä¸å˜æš—0.0f~1.0f buttonBrightnessè®¾ç½®æŒ‰é”®çš„äº®åº¦. æœ‰äº›æ‰‹æœºæ²¡æœ‰é”®ç›˜ç¯çš„æ— æ•ˆ0.0f~1.0f screenBrightnesså±å¹•äº®åº¦,é»˜è®¤æ˜¯è´Ÿæ•°, è¡¨ç¤ºè·Ÿéšç³»ç»Ÿäº®åº¦.0.0f~1.0fè¡¨ç¤ºæœ€æš—åˆ°æœ€äº® systemUiVisibilityè®¾ç½®ç³»ç»Ÿç•Œé¢çš„å¯è§æ€§. æ˜¯å¦æœ‰æ•ˆå’Œæ‰‹æœºç³»ç»Ÿæœ‰å…³ View.INVISIBLE ç³»ç»ŸUIä¸å¯è§ View.SYSTEM_UI_FLAG_LOW_PROFILE ä½è°ƒæ¨¡å¼, çŠ¶æ€æ å’Œå›¾æ ‡ä¼šå˜æš— å¸¸è§åº”ç”¨åœºæ™¯æ‚¬æµ®çª—æ‚¬æµ®çª—ä¸»è¦æ˜¯è®¾ç½®type, æœ‰å¤šç§typeéƒ½å¯ä»¥å®ç°æ‚¬æµ®çª—æ•ˆæœ(PHONE, SYSTEM_ALERTâ€¦) WindowManager mWindowManager = (WindowManager) getApplicationContext().getSystemService(Context.WINDOW_SERVICE); // åˆ›å»ºä¸€ä¸ªæ–°çš„å¸ƒå±€ WindowManager.LayoutParams param = new WindowManager.LayoutParams(); // è®¾ç½®çª—å£å±æ€§ param.type = WindowManager.LayoutParams.TYPE_SYSTEM_ALERT; // è®¾ç½®ä¸ºç³»ç»Ÿè­¦å‘Šçª—, å¯ä»¥æ‚¬æµ®åœ¨å…¶ä»–åº”ç”¨ä¹‹ä¸Š param.format = PixelFormat.TRANSLUCENT; // æ”¯æŒé€æ˜ param.flags = WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN // å¯åœ¨å…¨å±å¹•å¸ƒå±€, ä¸å—çŠ¶æ€æ å½±å“ | WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE; // æœ€åˆä¸å¯è·å–ç„¦ç‚¹, è¿™æ ·ä¸å½±å“åº•å±‚åº”ç”¨æ¥æ”¶è§¦æ‘¸äº‹ä»¶ param.alpha = 0.9f; // æ‚¬æµ®çª—çš„é€æ˜åº¦ param.gravity = Gravity.LEFT | Gravity.TOP; // æ‚¬æµ®çª—çš„é‡åŠ›æ•ˆæœ param.width = dp2px(140); // æ‚¬æµ®çª—å®½åº¦ param.height = WindowManager.LayoutParams.WRAP_CONTENT; // æ‚¬æµ®çª—é«˜åº¦ // ä»¥ä¸‹å°†æ‚¬æµ®ç©¿å®šä½åœ¨å±å¹•ä¸­å¤® int screenWidth = mWindowManager.getDefaultDisplay().getWidth(); int screenHeight = mWindowManager.getDefaultDisplay().getHeight(); param.x = (screenWidth - param.width) / 2; param.y = (screenHeight - param.height) / 2; // åˆ›å»ºæ‚¬æµ®çª—view mFloatView = View.inflate(this, R.layout.view_float_window, null); ButterKnife.bind(this, mFloatView); // æ·»åŠ åˆ°å±å¹• mWindowManager.addView(mFloatView, param); æ‚¬æµ®çª—ä¸­éœ€è¦EditTextè¿›è¡Œè¾“å…¥æ‚¬æµ®çª—å¦‚æœéœ€è¦å¼¹å‡ºè¾“å…¥æ³•è¿›è¡Œè¾“å…¥ï¼Œå°±éœ€è¦è·å–ç„¦ç‚¹ å½“æ‚¬æµ®çª—ä¸­æœ‰EditTextéœ€è¦ä½¿ç”¨è¾“å…¥æ³•æ—¶, ä½¿ç”¨FLAG_NOT_TOUCH_MODAL, è¿™æ ·æ‚¬æµ®çª—ä¸­çš„EditTextå°±å¯ä»¥å¼¹å‡ºè¾“å…¥æ³•. æ­¤æ—¶ä¸‹å±‚åº”ç”¨å¯ä»¥æ“ä½œ, ä½†ä¸èƒ½å¼¹å‡ºè¾“å…¥æ³•, ä¸èƒ½ä½¿ç”¨è¿”å›é”®. å¦‚éœ€è¦æ¢å¤ä¸‹å±‚åº”ç”¨çš„å®Œå…¨æ“ä½œ, å¯ä»¥ç­‰è¾“å…¥å®Œæ¯•å, æ‰¾åˆé€‚æ—¶æœºå†æŠŠæ‚¬æµ®çª—æ”¹å›FLAG_NOT_FOCUSABLE, ä»¥ä¾¿æ¢å¤èƒŒæ™¯windowçš„æ§åˆ¶ æ‚¬æµ®çª—ä¸å½±å“ä¸‹å±‚åº”ç”¨çš„æ“ä½œæ¯”å¦‚åœ¨æ‚¬æµ®çª—ä¸­æ²¡æœ‰EditTextæ—¶, ä½¿ç”¨FLAG_NOT_FOCUSABLEç¦æ­¢è·å–ç„¦ç‚¹, è¿™æ ·èƒŒæ™¯windowå°±å¯ä»¥æ“ä½œ, å¯ä»¥è¾“å…¥, å¯ä»¥ä½¿ç”¨æŒ‰é”® æ‚¬æµ®çª—å’Œè¾“å…¥æ³•ä¹‹é—´çš„å æ”¾æ•ˆæœ å½“è¾“å…¥æ³•å’Œæ‚¬æµ®çª—è¾“å…¥çª—å£é‡å æ—¶, æœ‰ä¸¤ç§å¤„ç†æ–¹å¼, éƒ½æ˜¯é€šè¿‡param.softInputModeæ¥å®ç°:æ•´ä½“ç§»åŠ¨æ‚¬æµ®çª—, ä½¿è¾“å…¥çš„åœ°æ–¹å‡ºç° WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN ç¼©å°æ‚¬æµ®çª—ä¸­å¯ä»¥ç¼©å°çš„éƒ¨åˆ†, ä½¿è¾“å…¥çš„åœ°æ–¹å‡ºç° WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE æ‚¬æµ®çª—çš„æ‹–åŠ¨æ•ˆæœä¸ºæ‚¬æµ®çª—è®¾ç½®onTouchListener, é€šè¿‡äº‹ä»¶åˆ¤æ–­æ˜¯ç‚¹å‡»è¿˜æ˜¯ç§»åŠ¨,ä½¿ç”¨mWindowManager.updateViewLayout(mFloatView, param)æ¥æ›´æ–°çª—å£ä½ç½® floatView.setOnTouchListener(new View.OnTouchListener() { // è®°å½•ä¸Šæ¬¡ç§»åŠ¨çš„ä½ç½® private float lastX = 0; private float lastY = 0; // æ˜¯å¦æ˜¯ç§»åŠ¨äº‹ä»¶ boolean isMoved = false; @Override public boolean onTouch(View v, MotionEvent event) { switch (event.getAction()) { case MotionEvent.ACTION_DOWN: isMoved = false; // è®°å½•æŒ‰ä¸‹ä½ç½® lastX = event.getRawX(); lastY = event.getRawY(); break; case MotionEvent.ACTION_MOVE: isMoved = true; // è®°å½•ç§»åŠ¨åçš„ä½ç½® float moveX = event.getRawX(); float moveY = event.getRawY(); // è·å–å½“å‰çª—å£çš„å¸ƒå±€å±æ€§, æ·»åŠ åç§»é‡, å¹¶æ›´æ–°ç•Œé¢, å®ç°ç§»åŠ¨ WindowManager.LayoutParams param = (WindowManager.LayoutParams) mFloatView.getLayoutParams(); param.x += (int) (moveX - lastX); param.y += (int) (moveY - lastY); mWindowManager.updateViewLayout(mFloatView, param); lastX = moveX; lastY = moveY; case MotionEvent.ACTION_CANCEL: isMoved = true; break; } // å¦‚æœæ˜¯ç§»åŠ¨äº‹ä»¶, åˆ™æ¶ˆè´¹æ‰; å¦‚æœä¸æ˜¯, åˆ™ç”±å…¶ä»–å¤„ç†, æ¯”å¦‚ç‚¹å‡» return isMoved; } }); Activityè®¾ç½®å±å¹•æ—‹è½¬, å…¨å±ç­‰ android:configChanges=&quot;orientation|screenSize&quot; keyboardHidden orientation screenSize orientation|screenSize: æ”¹å˜å±å¹•æ–¹å‘æ—¶å¹¶ä¸é‡å¯Activity setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE) getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN); getWindow().setAttributes(windowParams); å¼¹çª—ä½äºè½¯é”®ç›˜ä¹‹ä¸‹ï¼Œå…¶ä»–è§†å›¾ä¹‹ä¸ŠgetWindow().addFlags( WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM|WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE); FLAG_ALT_FOCUSABLE_IM|FLAG_NOT_FOCUSABLEå¯ä»¥å®ç°UIï¼Œä¸è¿‡å¼¹çª—ä¸Šçš„edittextä¸ä¼šæ¥å—åˆ°è½¯é”®ç›˜ä¸Šçš„è¾“å…¥äº‹ä»¶ï¼ŒFLAG_NOT_FOCUSABLEå·²ç»æ‹’ç»æ¥å—äº†ã€‚é‚£å¯ä»¥åœ¨dialog onCreateçš„æ—¶å€™å®Œæˆä»¥ä¸ŠUI FLAGè®¾ç½®ï¼Œåœ¨showçš„æ—¶å€™æ¸…é™¤flagå³å¯æ¥å—åˆ°è¾“å…¥äº‹ä»¶ getWindow().clearFlags(WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM|WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE); getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE); Dialogå…¨å±æ˜¾ç¤º Phonewindowä¸­å¯¹windowIsFloatingè¿›è¡Œåˆ¤æ–­ï¼Œactivityé»˜è®¤ä¸»é¢˜ä¸ºfalseï¼ŒgenerateLayoutæ–¹æ³•ä¸­å¯¹è¯¥å‚æ•°è¿›è¡Œåˆ¤æ–­è®¾ç½®LayoutParamsä¸ºMATCH_PARENTæˆ–WRAP_CONTENNTã€‚ windowBackgroundä¸»è¦æ˜¯é»˜è®¤èƒŒæ™¯çš„é—®é¢˜ï¼Œé»˜è®¤é‡‡ç”¨äº†æœ‰paddingçš„InsetDrawable,è®¾ç½®äº†ä¸€äº›è¾¹è·ï¼Œå¯¼è‡´ä¸Šé¢çš„çŠ¶æ€æ ï¼Œåº•éƒ¨çš„å¯¼èˆªæ ï¼Œå·¦å³éƒ½æœ‰ä¸€å®šçš„è¾¹è·ã€‚ windowNoTitleå»é™¤toolbarç­‰é¡¶éƒ¨UIã€‚&lt;style name=&quot;Dialog.FullScreen&quot; parent=&quot;Theme.AppCompat.Dialog&quot;&gt; &lt;item name=&quot;android:windowNoTitle&quot;&gt;true&lt;/item&gt; &lt;item name=&quot;android:windowBackground&quot;&gt;@color/transparent&lt;/item&gt; &lt;item name=&quot;android:windowIsFloating&quot;&gt;false&lt;/item&gt; &lt;/style&gt;","link":"/2018/10/23/WindowManager%E7%AA%97%E5%8F%A3%E7%AE%A1%E7%90%86/"},{"title":"ä»è‡ªå·±èº«ä¸Šæ‰¾é—®é¢˜æˆ–è®¸æ˜¯ä¸€ç§å¦¥å","text":"é—®é¢˜ä¸€å®šå­˜åœ¨ï¼Œæ²¡æœ‰å®Œäººï¼Œæˆ‘å¸¸ä»è‡ªå·±èº«ä¸Šæ‰¾é—®é¢˜ã€‚é—®é¢˜å¸¸å¸¸å­˜åœ¨ï¼Œä½†ä¸æ˜¯éé»‘å³ç™½ï¼Œä¸ä»£è¡¨ä¸€æ–¹æœ‰é—®é¢˜. é—®é¢˜æ‰€åœ¨é—®é¢˜ä¸€å®šå­˜åœ¨ï¼Œæ²¡æœ‰å®Œäººï¼Œæˆ‘å¸¸ä»è‡ªå·±èº«ä¸Šæ‰¾é—®é¢˜ã€‚é—®é¢˜å¸¸å¸¸å­˜åœ¨ï¼Œä½†ä¸æ˜¯éé»‘å³ç™½ï¼Œä¸ä»£è¡¨ä¸€æ–¹æœ‰é—®é¢˜ï¼Œå¦ä¸€æ–¹å°±ä¸‡äº‹å¤§å‰ï¼Œå¾€å¾€æ˜¯ä¸€ä¸ªå·´æŒæ‹ä¸å“çš„äº‹å®ã€‚å¯æ˜¯ç»“æœå¾€å¾€æ˜¯ï¼Œæ–¹æ¡Œçš„é‚£ä¸€è¾¹è®©è‡ªå·±é«˜é«˜åœ¨ä¸Šï¼Œæ¯«æ— æ±¡ç‚¹ï¼Œå é¢†é“å¾·çš„è‡³é«˜å³°ï¼Œå¼€å§‹ç‹‚è½°æ»¥ç‚¸ï¼Œæ¯æ¯å–„è‰¯çš„æ‰¿è®¤è¿‡å¤±åï¼Œå¸¦æ¥çš„ç»“æœå¾€å¾€ä¸å ªè®¾æƒ³ã€‚ ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§å±€é¢ï¼Œé—®é¢˜æ‰€åœ¨ä½•å¤„ï¼Ÿ æ¯ä¸ªäººéƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¸ªä½“ï¼Œäººå‡ºç°åœ¨è¿™ä¸ªä¸–ç•Œä¸Šï¼Œå°±å¼€å§‹ä¸ºäº†æ´»å››å¤„å¥”æ³¢ï¼Œä¸ºäº†å–åˆ°ç¬¬ä¸€å£å¥¶æ‹¼å‘½å“­å–Šï¼Œä¸ºäº†æ‘†è„±ç°æœ‰é˜¶çº§åŠªåŠ›è¯»ä¹¦ï¼Œä¸ºäº†ç¹è‚²åä»£ç»“å©šç”Ÿå­ï¼Œä¸ºäº†å…»æ´»å®¶äººåœ¨ä¸–ä¸Šå—å°½å§”å±ˆã€‚å®Œæ•´çš„ä¸ªä½“åº”è¯¥æœ‰ä¸€å¥—ç‹¬ç‰¹çš„è‡ªæˆ‘é˜²å¾¡æœºåˆ¶ï¼Œå…µæ¥å°†æŒ¡æ°´æ¥åœŸæ©ã€‚è‡ªæˆ‘æˆé•¿åº”è¯¥æ˜¯éšè—åœ¨å¤–å£³é‡Œçš„ï¼Œå¤–å£³åº”è¯¥æ˜¯åœ†æ»‘åšç¡¬çš„ï¼Œä¸åº”è¯¥é€æ¼å‡ºä»»ä½•å¼±ç‚¹ã€‚å› ä¸ºä¸€æ—¦å¼±ç‚¹å‡ºç°ï¼Œå°±ä¼šå—åˆ°å¤–éƒ¨çš„çŒ›çƒˆæ”»å‡»ï¼Œè¿™æ˜¯ä¸›æ—æ³•åˆ™ï¼Œä¸å®¹è´¨ç–‘ã€‚ é‚£ç°åœ¨çŸ¥é“é—®é¢˜æ‰€åœ¨äº†ï¼Œè‡ªæˆ‘åçœæ˜¯ä¸å¯æˆ–ç¼ºçš„ï¼Œåçœçš„è¿‡ç¨‹ï¼Œæ”¹æ­£çš„è¿‡ç¨‹æ­£æ˜¯è‡ªæˆ‘æˆé•¿çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯åœ¨å¤–å£³é‡Œçš„è‡ªæˆ‘è„±å˜ã€‚èœ•å˜åªå±äºè‡ªå·±ï¼Œä¸€æ—¦è¢«å¤–ç•Œè·çŸ¥ï¼Œç‰¹åˆ«æ˜¯åˆ©ç›Šç›¸å…³ï¼Œè½»åˆ™äººæ ¼å—åˆ°ä¾®è¾±ï¼Œå¤±å»ä¿¡ä»»ï¼Œä¸¢æ‰å·¥ä½œï¼Œé‡åˆ™è‡ªæˆ‘é˜²å¾¡æœºåˆ¶è¢«æ”»ç ´ï¼Œæ— æ³•è‡ªæˆ‘ä¿®å¤ï¼Œç»ˆç”ŸæŠ‘éƒä¸å¾—å¿—ã€‚ é‚£ä¹ˆå¾—åˆ°çš„æ˜¯ä¸€ä¸ªä¸–ä¿—çš„ç»“æœï¼š æŠ«ç€è™šä¼ªçš„çš®åœ¨è¿™ä¸–é—´è¡Œèµ°ï¼Œä»¥åï¼ŒæŸ”è½¯çš„ä¸€é¢åªå±äºè‡ªå·±ï¼Œç›´åˆ°é¢å…·é•¿è¿›è‚‰é‡Œï¼Œæ·±å…¥çµé­‚ã€‚ä¸å¿…æ²®ä¸§ï¼Œè‡ªå·±æ‰¿å—è¿™ä¸€åˆ‡ï¼Œç…§é¡¾å¥½èº«è¾¹çš„äº²äººï¼Œç¥ä½ æ´»å‡ºè‡ªå·±ã€‚","link":"/2018/02/02/%E4%BB%8E%E8%87%AA%E5%B7%B1%E8%BA%AB%E4%B8%8A%E6%89%BE%E9%97%AE%E9%A2%98%E6%88%96%E8%AE%B8%E6%98%AF%E4%B8%80%E7%A7%8D%E5%A6%A5%E5%8D%8F/"},{"title":"MediaPipeåœ¨Androidå¹³å°ä¸Šæ„å»ºAAR","text":"éœ€è¦åœ¨å®æ—¶éŸ³è§†é¢‘ä¸­å®ç°è™šæ‹ŸèƒŒæ™¯ï¼Œæˆ–è€…åœ¨äººåƒä¸Šè¿›è¡Œè´´çº¸ã€‚å¸Œæœ›åœ¨Googleå¼€æºçš„MediaPipeä¸­æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œæœ¬æ–‡ç« ä»‹ç»MediaPipeåœ¨MacOSä¸­çš„ç¯å¢ƒæ­å»ºï¼Œä»¥åŠç¼–è¯‘AARã€‚åç»­ä¼šè¡¥å……æœºæ¢°å­¦ä¹ ç›¸å…³åœ¨Androidå¹³å°ä¸Šçš„ä½¿ç”¨ ç¯å¢ƒæ­å»º è·å–æºç https://github.com/google/mediapipe.git å®‰è£…bazel brew install bazel ç§‘å­¦ä¸Šç½‘ ç¼–è¯‘è„šæœ¬ åˆ›å»ºç›¸å…³æ–‡ä»¶å¤¹ã€BUILDæ–‡ä»¶ cd mediapipe/examples/android/src/java/com/google/mediapipe/apps/ mkdir buid_aar &amp;&amp; cd buid_aar touch BUILD ç¼–å†™ç¼–è¯‘è„šæœ¬ï¼ŒæŒ‡å®šéœ€è¦ç¼–è¯‘çš„æ¨¡å‹å’Œè®¡ç®—å•å…ƒï¼Œè¾“å‡ºçš„æ–‡ä»¶å load(&quot;//mediapipe/java/com/google/mediapipe:mediapipe_aar.bzl&quot;, &quot;mediapipe_aar&quot;) mediapipe_aar( name = &quot;mediapipe_portrait_segmentation&quot;, calculators = [&quot;//mediapipe/graphs/portrait_segmentation:mobile_calculators&quot;], ) æŒ‡å®šéœ€è¦çš„cpuæ¶æ„ï¼Œæ‰§è¡Œç¼–è¯‘ bazel build --cxxopt='--std=c++14' -c opt --fat_apk_cpu=arm64-v8a,armeabi-v7a examples/android/src/java/com/google/mediapipe/apps/buid_aar:mediapipe_portrait_segmentation --host_crosstool_top=@bazel_tools//tools/cpp:toolchain --verbose_failures ç”Ÿæˆçš„aarè·¯å¾„ï¼š bazel-bin/mediapipe/examples/android/src/java/com/google/mediapipe/apps/buid_aar/mediapipe_portrait_segmentation.aar ç”ŸæˆMediapipeäºŒè¿›åˆ¶å›¾ï¼Œ bazel build -c opt mediapipe/graphs/portrait_segmentation:portrait_segmentation_mobile_gpu_binary_graph","link":"/2021/04/28/MediaPipe%E5%9C%A8Android%E5%B9%B3%E5%8F%B0%E4%B8%8A%E6%9E%84%E5%BB%BAAAR/"},{"title":"å†²çªä¸­å¯¹ä¸­è§„ä¸­çŸ©çš„è®¤è¯†","text":"æ¯ä¸ªä¸ªä½“ä¹‹é—´å¿…ç„¶å­˜åœ¨å†²çªï¼Œå¯¹æ¯ä»¶äº‹ç‰©çš„ç†è§£ï¼Œå¤„ç†æ¯ä»¶äº‹æƒ…çš„æ–¹å¼ï¼Œä¸€ä¸‡ä¸ªäººå¿ƒä¸­æœ‰ä¸€ä¸‡ä¸ªå“ˆå§†é›·ç‰¹ï¼Œè¿™æ‰æ˜¯æœ‰è¶£çš„åœ°æ–¹ï¼Œä¸ä¸€æ ·æ‰æ˜¯æœ‰è¶£çš„éƒ¨åˆ†ï¼Œå¦‚æœéƒ½ä¸€æ ·å²‚ä¸æ˜¯æœºå™¨ã€‚ å†²çªæ¯ä¸ªä¸ªä½“ä¹‹é—´å¿…ç„¶å­˜åœ¨å†²çªï¼Œå¯¹æ¯ä»¶äº‹ç‰©çš„ç†è§£ï¼Œå¤„ç†æ¯ä»¶äº‹æƒ…çš„æ–¹å¼ï¼Œä¸€ä¸‡ä¸ªäººå¿ƒä¸­æœ‰ä¸€ä¸‡ä¸ªå“ˆå§†é›·ç‰¹ï¼Œè¿™æ‰æ˜¯æœ‰è¶£çš„åœ°æ–¹ï¼Œä¸ä¸€æ ·æ‰æ˜¯æœ‰è¶£çš„éƒ¨åˆ†ï¼Œå¦‚æœéƒ½ä¸€æ ·å²‚ä¸æ˜¯æœºå™¨ã€‚ æˆ‘ä»¬æŠŠå…³æ³¨ç‚¹æ”¾åœ¨äº†ä¸ªä½“ä¸åŒé€ æˆçš„å†²çªä¸Šï¼Œç´§æ¥ç€çœ‹åˆ°çš„æ˜¯å†²çªå‡çº§ï¼Œå¦‚æœæˆ‘ä»¬ä¸å¤Ÿå¼ºå¤§ï¼Œå¾€å¾€ä¼šæˆä¸ºåƒå¤«æ‰€æŒ‡ï¼Œå› ä¸ºå…è®¸å†²çªå­˜åœ¨æ‰æ˜¯ç¤¾ä¼šçš„æ¸¸æˆè§„åˆ™ï¼Œæ¯ä¸ªäººéƒ½åœ¨è¯•å›¾éšè—è‡ªå·±çš„ä¸å¹¸ï¼Œå¹¶ç”¨å„ç§æ–¹å¼å»å¼ºè°ƒè‡ªå·±çš„é•¿å¤„ï¼Œä»–ä»¬æ‰€è®¤ä¸ºè‡ªå·±æ‹¥æœ‰çš„é•¿å¤„ï¼Œæ‰€ç”¨çš„æ‰‹æ®µæ›´æ˜¯åƒå¥‡ç™¾æ€ªã€‚åªè¦æ˜¯ä¸æŸå®³ä»–äººåˆ©ç›Šï¼Œæ‰‹æ®µå°±ç®—æ˜¯åˆç†çš„ï¼Œè¢«é»˜è®¸ï¼ŒåŒæ–¹ç›¸å®‰æ— äº‹ï¼Œå„å®‰å…¶ä½ã€‚çªç„¶æœ‰ä¸€å¤©å‡ºç°ä¸€ä¸ªäººï¼ŒæŒ‡å‡ºè¿™äº›æ‰‹æ®µæ˜¯ä¸åˆç†çš„ï¼Œå¹¶å‘Šè¯‰å¤§å®¶è¿™ç®—ä¸ä¸Šæ˜¯é•¿å¤„ã€‚ç„¶åé™é»˜è¢«æ‰“ç ´ï¼Œæ¯ä¸ªäººéƒ½æ‹…å¿ƒè‡ªå·±çš„æ‰‹æ®µè¢«æŒ‘æ˜ï¼Œå¤§å®¶äººå¿ƒæƒ¶æƒ¶â€¦ ä¸ç”¨å¤šä¹…,å¤§å®¶å°±ä¼šæ‰¾åˆ°è‡ªå·±çš„æ–¹å¼å»ä¿æŠ¤è‡ªå·±ï¼Œæ‰€ä»¥åƒå¤«æ‰€æŒ‡æ˜¯å¿…ç„¶ã€‚ è§‚å¯Ÿå¹¶æ€è€ƒï¼Œç„¶åå®è·µã€‚ è¿›å…¥è¿™ä¸ªå›¢ä½“ï¼Œéµå®ˆæ‰€è°“çš„è§„åˆ™ï¼Œä¿æŠ¤å¥½è‡ªå·±çš„ä¸åŒï¼Œä»»é£é›¨è¢­æ¥ï¼Œæˆ‘è‡ªå·ç„¶ä¸åŠ¨ã€‚ ä¸­è§„ä¸­çŸ©&quot;é€‰æ‹©ç”Ÿæ´»ï¼Œé€‰æ‹©å·¥ä½œï¼Œé€‰æ‹©èŒä¸šï¼Œé€‰æ‹©å®¶åº­ã€‚é€‰æ‹©ä»–å¦ˆçš„ä¸€ä¸ªå¤§ç”µè§†ã€‚é€‰æ‹©æ´—è¡£æœºï¼Œæ±½è½¦ï¼Œé›·å°„å”±æœºï¼Œç”µåŠ¨å¼€ç½æœºã€‚é€‰æ‹©å¥åº·ï¼Œä½å¡é‡Œè·¯ï¼Œä½ç³–ã€‚é€‰æ‹©å›ºå®šåˆ©ç‡æˆ¿è´·ã€‚é€‰æ‹©èµ·ç‚¹ï¼Œé€‰æ‹©æœ‹å‹ï¼Œé€‰æ‹©è¿åŠ¨æœå’Œçš®ç®±ã€‚é€‰æ‹©ä¸€å¥—ä»–å¦ˆçš„ä¸‰ä»¶å¥—è¥¿è£…ã€‚â€¦â€¦é€‰æ‹©DIYï¼Œåœ¨ä¸€ä¸ªæ˜ŸæœŸå¤©æ—©ä¸Šï¼Œä»–å¦ˆçš„æä¸æ¸…è‡ªå·±æ˜¯è°ã€‚é€‰æ‹©åœ¨æ²™å‘ä¸Šçœ‹æ— èŠé€é¡¶çš„èŠ‚ç›®ï¼Œå¾€å£é‡Œå¡åƒåœ¾é£Ÿç‰©ã€‚é€‰æ‹©è…æœ½ï¼Œç”±ä½ ç²¾å­é€ å‡ºå–ä»£ä½ çš„è‡ªç§å°é¬¼ï¼Œå¯ä»¥è¯´æ˜¯æœ€æ— è€»çš„äº‹äº†ã€‚é€‰æ‹©ä½ çš„æœªæ¥ï¼Œä½ çš„ç”Ÿæ´»ã€‚ä½†æˆ‘å¹²å˜›è¦åšï¼Ÿæˆ‘é€‰æ‹©ä¸è¦ç”Ÿæ´»ï¼Œæˆ‘é€‰æ‹©å…¶ä»–ã€‚ç†ç”±å‘¢ï¼Ÿæ²¡æœ‰ç†ç”±ã€‚åªè¦æœ‰æµ·æ´›å› ï¼Œè¿˜è¦ä»€ä¹ˆç†ç”±&quot; ---â€œçŒœç«è½¦â€ åˆšæ¯•ä¸šé‚£ä¼šå„¿æˆ‘ä»¥ä¸ºæˆ‘çš„ä¸€ç”Ÿå°±åƒæ˜¯åœ¨å»ºä¸€åº§æ‘©å¤©å¤§å¦ï¼Œç¨æœ‰ä¸€ç‚¹åå·®å°±ä¼šè½°ç„¶å´©å¡Œã€‚æ…¢æ…¢çš„æˆ‘å‘ç°ï¼Œäººä»¬å¹¶ä¸æ˜¯å°å¿ƒç¿¼ç¿¼çš„å»å¯¹å¾…è‡ªå·±ï¼Œâ€œå·®ä¸å¤šå°±è¡Œäº†â€ï¼Œå¥½åƒæˆäº†å¤§å®¶çš„å£å¤´ç¦…ï¼Œå¾—è¿‡ä¸”è¿‡ã€‚æˆ‘å´ä¾ç„¶ä¸è¿™ä¹ˆè®¤ä¸ºï¼Œå´æœ‰ä¸€äº›ç»†å¾®çš„æ”¹å˜ï¼Œæ²¡æœ‰100%æ­£ç¡®çš„å†³å®šï¼Œåªéœ€è¦åœ¨å†³å®šååŠªåŠ›å®Œå–„ï¼Œä¸€æ­¥ä¸€æ­¥è®©å†³å®šå˜å¾—æ›´åŠ æ­£ç¡®ã€‚ â€œå·®ä¸å¤šå°±è¡Œï¼Ÿâ€ â€œå·®ä¸å¤šå°±è¡Œï¼â€ è¿™å¥è¯åº”è¯¥æ˜¯æ­£ç¡®çš„ï¼Œåªæ˜¯ç›®æ ‡å˜æˆäº†åˆ«äººã€‚ä¸¥äºå¾‹å·±ï¼Œå®½ä»¥å¾…äººï¼Œæ‡‚å¾—ä¸ªä½“çš„ä¸åŒï¼Œå­¦ä¼šéµå®ˆè§„åˆ™ï¼Œä¿ç•™ä½å½¼æ­¤é—´çš„å®‰å…¨è·ç¦»ã€‚ä¸€ä¸ªäººçš„ä¸–ç•Œè§‚ï¼Œå–å†³äºè¿™ä¸ªäººçš„å—æ•™è‚²ç¨‹åº¦å’Œä»–çš„æˆé•¿ç¯å¢ƒï¼Œè€ŒäºŒè€…æ˜¯ä¸å—ä»–æ§åˆ¶ã€‚ä»–è‡ªå·±éƒ½æ”¹å˜ä¸äº†çš„ä¸œè¥¿ï¼Œæ—äººæ›´æ— æ³•æŒ‡æ‰‹ç”»è„šã€‚ æƒ³è¦æ‰“ç ´è§„åˆ™å°±åº”è¯¥å­¦ä¼šä¸­è§„ä¸­çŸ©ï¼Œä¸é¸£åˆ™å·²ï¼Œä¸€é¸£æƒŠäººã€‚","link":"/2017/11/25/%E5%86%B2%E7%AA%81%E4%B8%AD%E5%AF%B9%E4%B8%AD%E8%A7%84%E4%B8%AD%E7%9F%A9%E7%9A%84%E8%AE%A4%E8%AF%86/"},{"title":"åˆ©ç”¨é«˜é˜¶å‡½æ•°ç®€åŒ–ç­–ç•¥æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼","text":"ç­–ç•¥æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼è§£å†³çš„é—®é¢˜æ¯”è¾ƒç±»ä¼¼ï¼Œå¹¶ä¸”éƒ½å¯ä»¥ä¾é Kotlinä¸­çš„é«˜é˜¶å‡½æ•°ç‰¹æ€§è¿›è¡Œæ”¹è‰¯ã€‚ éµå¾ªå¼€é—­åŸåˆ™ï¼šç­–ç•¥æ¨¡å¼å‡è®¾æœ‰ä¸€ä¸ªè¡¨ç¤ºæ¸¸æ³³è¿åŠ¨å‘˜çš„æŠ½è±¡ç±»Swimmerï¼Œæœ‰ä¸€ä¸ªæ¸¸æ³³çš„æ–¹æ³•swimï¼š class Swimmer { fun swim() { println(&quot;I am swimming...&quot;) } } //invoke &gt;&gt;&gt; Swimmer().swim() I am swimming... ç”±äºè¿™ä½è¿åŠ¨å‘˜åœ¨æ¸¸æ³³æ–¹é¢å¾ˆæœ‰å¤©èµ‹ï¼Œä»–å¾ˆå¿«æŒæ¡äº†è›™æ³³ã€ä»°æ³³ã€è‡ªç”±æ³³å¤šç§å§¿åŠ¿ã€‚æ‰€ä»¥æˆ‘å°†å¯¹Swimmerè¿›è¡Œæ”¹é€ ï¼š class Swimmer { fun breaststroke() { println(&quot;I am breaststroke...&quot;) } fun backstroke() { println(&quot;I am backstroke...&quot;) } fun freestyle() { println(&quot;I am freestyling...&quot;) } } ç„¶è€Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è®¾è®¡ã€‚é¦–å…ˆï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„æ¸¸æ³³è¿åŠ¨å‘˜éƒ½æŒæ¡äº†è¿™3ç§æ¸¸æ³³å§¿åŠ¿ï¼Œå¦‚æœæ¯ä¸ªSwimmerç±»å¯¹è±¡éƒ½å¯ä»¥è°ƒç”¨æ‰€æœ‰æ–¹æ³•ï¼Œæ˜¾å¾—æ¯”è¾ƒå±é™©ã€‚å…¶æ¬¡ï¼Œåç»­éš¾å…ä¼šæœ‰æ–°çš„è¡Œä¸ºæ–¹æ³•åŠ å…¥ï¼Œé€šè¿‡ä¿®æ”¹Swimmerç±»çš„æ–¹å¼è¿èƒŒäº†å¼€æ”¾å°é—­åŸåˆ™(open for extension,closed for modificationã€‚é¢å‘æ‰©å±•å¼€æ”¾ï¼Œé¢å‘ä¿®æ”¹å…³é—­)ã€‚ æ‰€ä»¥å‘¢ï¼Œæ›´å¥½çš„åšæ³•æ˜¯å°†æ¸¸æ³³è¿™ä¸ªè¡Œä¸ºå°è£…æˆæ¥å£ï¼Œæ ¹æ®ä¸åŒçš„åœºæ™¯æˆ‘ä»¬å¯ä»¥è°ƒç”¨ä¸åŒçš„æ¸¸æ³³æ–¹æ³•ã€‚æ¯”å¦‚è¿™ä½æ¸¸æ³³è¿åŠ¨å‘˜è®¡åˆ’å‘¨æœ«æ¸¸è‡ªç”±æ³³ï¼Œå…¶ä»–æ—¶é—´åˆ™æ¸¸è›™æ³³ã€‚ç­–ç•¥æ¨¡å¼å°±æ˜¯ä¸€ç§è§£å†³è¿™ç§åœºæ™¯å¾ˆå¥½çš„æ€è·¯ã€‚ ç­–ç•¥æ¨¡å¼å®šä¹‰äº†ç®—æ³•æ—ï¼Œåˆ†åˆ«å°è£…èµ·æ¥ï¼Œè®©ä»–ä»¬ä¹‹é—´å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œæ­¤æ¨¡å¼è®©ç®—æ³•çš„å˜åŒ–ç‹¬ç«‹äºä½¿ç”¨ç®—æ³•çš„ç”¨æˆ· æœ¬è´¨ä¸Šï¼Œç­–ç•¥æ¨¡å¼åšçš„äº‹æƒ…å°±æ˜¯å°†ä¸åŒçš„è¡Œä¸ºç­–ç•¥ï¼ˆStrategyï¼‰è¿›è¡Œç‹¬ç«‹å°è£…ï¼Œä¸ç±»çš„é€»è¾‘ä¸Šè§£è€¦ã€‚ç„¶åæ ¹æ®ä¸åŒçš„ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰åˆ‡æ¢é€‰æ‹©ä¸åŒçš„ç­–ç•¥ï¼Œç„¶åç”¨ç±»å¯¹è±¡è¿›è¡Œè°ƒç”¨ï¼š interface SwimStrategy { fun swim() } class Breaststroke: SwimStrategy { override fun swim() { println(&quot;I am breaststroking...&quot;) } } class Backstroke: SwimStrategy { override fun swim() { println(&quot;I am Backstroke...&quot;) } } class Freestyle: SwimStrategy { override fun swim() { println(&quot;I am freestyling...&quot;) } } class Swimmer(val strategy: SwimStrategy) { fun swim() { strategy.swim() } } //invoke Swimmer(Freestyle()).swim() Swimmer(Breaststroke()).swim() è¿™ä¸ªæ–¹æ¡ˆå®ç°äº†è§£è€¦å’Œå¤ç”¨çš„ç›®çš„ï¼Œä¸”å¾ˆå¥½å®ç°äº†åœ¨ä¸åŒåœºæ™¯åˆ‡æ¢é‡‡ç”¨ä¸åŒçš„ç­–ç•¥ã€‚ç„¶è€Œï¼Œè¯¥ç‰ˆæœ¬çš„ä»£ç é‡ä¹Ÿæ¯”ä¹‹å‰å¤šäº†å¾ˆå¤šã€‚ é«˜é˜¶å‡½æ•°æŠ½è±¡ç®—æ³•å¦‚æœç”¨é«˜é˜¶å‡½æ•°çš„æ€è·¯æ¥é‡æ–°æ€è€ƒä¸‹ç­–ç•¥ç±»ï¼Œæ˜¾ç„¶å°†ç­–ç•¥å°è£…æˆä¸€ä¸ªå‡½æ•°ç„¶åä½œä¸ºå‚æ•°ä¼ é€’ç»™Swimmerç±»ä¼šæ›´åŠ çš„ç®€æ´ã€‚ç”±äºç­–ç•¥ç±»çš„ç›®çš„éå¸¸æ˜ç¡®ï¼Œä»…ä»…æ˜¯é’ˆå¯¹è¡Œä¸ºç®—æ³•çš„ä¸€ç§æŠ½è±¡ï¼Œæ‰€ä»¥é«˜é˜¶å‡½æ•°å¼æ˜¯ä¸€ç§å¾ˆå¥½çš„æ›¿ä»£æ€è·¯ã€‚ fun breaststroke() { ...} fun Backstroke() { ...} fun freestyle(){ ...} class Swimmer(val swimming: () -&gt; Unit) { fun swim() { swimming() } } //invoke Swimmer(::freestyle).swim ä»£ç é‡ä¸€ä¸‹å­å˜å°‘ï¼Œè€Œä¸”ç»“æ„ä¸Šä¹Ÿæ›´åŠ å®¹æ˜“é˜…è¯»ã€‚ç”±äºç­–ç•¥ç®—æ³•éƒ½å°è£…æˆäº†ä¸€ä¸ªä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬åœ¨åˆå§‹åŒ–Swimmerç±»å¯¹è±¡æ—¶ï¼Œå¯ä»¥ç”¨å‡½æ•°å¼•ç”¨çš„è¯­æ³•ä¼ é€’æ„é€ å‚æ•°ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå‡½æ•°ç”¨valå£°æ˜æˆLambdaè¡¨è¾¾å¼ï¼Œé‚£ä¹ˆåœ¨ä¼ é€’å‚æ•°æ—¶ä¼šå˜å¾—æ›´åŠ ç®€æ´ç›´è§‚ã€‚ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼šé«˜é˜¶å‡½æ•°ä»£æ›¿ç»§æ‰¿å¦ä¸€ä¸ªå¯ç”¨é«˜é˜¶å‡½æ•°æ”¹è‰¯çš„è®¾è®¡æ¨¡å¼ï¼Œå°±æ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚æŸç§ç¨‹åº¦ä¸Šï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼å’Œç­–ç•¥æ¨¡å¼è¦è§£å†³çš„é—®é¢˜æ˜¯ç›¸ä¼¼çš„ï¼Œå®ƒä»¬éƒ½å¯ä»¥åˆ†ç¦»é€šç”¨çš„ç®—æ³•å’Œå…·ä½“çš„ä¸Šä¸‹æ–‡ã€‚ç„¶è€Œï¼Œå¦‚æœè¯´ç­–ç•¥æ¨¡å¼é‡‡ç”¨çš„æ€è·¯æ˜¯å°†é…¸å¥¶æ³•è¿›è¡Œå§”æ‰˜ï¼Œé‚£ä¹ˆä¼ ç»Ÿçš„æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ›´å¤šæ˜¯åŸºäºç»§æ‰¿çš„æ–¹æ³•å®ç°çš„ã€‚ç°åœ¨æ¥çœ‹çœ‹æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„å®šä¹‰ï¼š å®šä¹‰ä¸€ä¸ªç®—æ³•ä¸­çš„æ“ä½œæ¡†æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ï¼Œä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ç®—æ³•çš„ç»“æ„å³å¯å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚ ä¸ç­–ç•¥æ¨¡å¼ä¸åŒï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„è¡Œä¸ºç®—æ³•å…·æœ‰æ›´æ˜æ™°çš„å¤§çº²ç»“æ„ï¼Œå…¶ä¸­å®Œå…¨ç›¸åŒçš„æ­¥éª¤ä¼šåœ¨æŠ½è±¡ç±»ä¸­å®ç°ï¼Œå¯ä¸ªæ€§åŒ–çš„æŸäº›æ­¥éª¤åˆ™åœ¨æŸå­ç±»ä¸­è¿›è¡Œå®šä¹‰ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬å»å¸‚æ°‘äº‹åŠ¡ä¸­å¿ƒåŠäº‹æ—¶ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰ä»¥ä¸‹å‡ ä¸ªå…·ä½“çš„æ­¥éª¤ï¼š 1ï¼‰ æ’é˜ŸåŒºå·ç­‰å¾… 2ï¼‰æ ¹æ®è‡ªå·±çš„éœ€æ±‚åŠç†ä¸ªæ€§åŒ–çš„ä¸šåŠ¡ï¼Œå¦‚è·å–ç¤¾ä¿æ¸…å•ã€ç”³è¯·å¸‚æ°‘å¡ã€åŠç†æˆ¿äº§è¯ 3ï¼‰å¯¹æœåŠ¡äººå‘˜çš„æ€åº¦è¿›è¡Œè¯„ä»· è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„é€‚ç”¨æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„åœºæ™¯ï¼ŒåŠäº‹æ­¥éª¤æ•´ä½“æ˜¯ä¸€ä¸ªç®—æ³•å¤§çº²ï¼Œå…¶ä¸­æ­¥éª¤1ï¼‰å’Œ3ï¼‰éƒ½æ˜¯ç›¸åŒçš„ç®—æ³•ï¼Œè€Œæ­¥éª¤2ï¼‰åˆ™å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚ä¸ªæ€§åŒ–é€‰æ‹©ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±ç”¨ä»£ç å®ç°ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒå®šä¹‰äº†è¿™ä¸ªä¾‹å­çš„æ“ä½œæ¡†æ¶ï¼š abstract class CivicCenterTask { fun execute() { this.lineup() this.askForHelp() this.evaluate() } private fun lineup() { println(&quot;line up to take a number&quot;) } private fun evaluate() { println(&quot;evaluaten service attitude&quot;) } abstract fun askForHelp() } å…¶ä¸­askForHelpæ–¹æ³•æ˜¯ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å†å®šä¹‰å…·ä½“çš„å­ç±»æ¥ç»§æ‰¿CivicCenter-Taskç±»ï¼Œç„¶åå¯¹æŠ½è±¡çš„æ­¥éª¤è¿›è¡Œå®ç°ã€‚ class PullSocialSecurity: CivicCenterTask { override fun askForHelp() { println(&quot;ask for pulling teh social security&quot;) } } class ApplyForCitizenCard: CiviCenterTask { override fun askForHelp() { println(&quot;apply for a citizen card&quot;) } } //invoke &gt;&gt;&gt; PullSocialSecurity().execute() line up to take a number ask for pulling the social security evaluation service attitude &gt;&gt;&gt; ApplyForCitizenCard().execute() line up to take a number apply for a citizen card evaluaten service attitude ä¸å‡ºæ„æ–™ï¼Œä¸¤è€…çš„æ­¥éª¤2ï¼‰çš„æ‰§è¡Œç»“æœæ˜¯ä¸ä¸€æ ·çš„ã€‚ ä¸å¾—ä¸è¯´ï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ä»£ç å¤ç”¨æ€§å·²ç»éå¸¸é«˜äº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯å¾—æ ¹æ®ä¸åŒçš„ä¸šåŠ¡åœºæ™¯éƒ½å®šä¹‰ä¸€ä¸ªå…·ä½“çš„å­ç±»ã€‚å¹¸è¿çš„æ˜¯ï¼Œåœ¨Kotlinä¸­æˆ‘ä»¬åŒæ ·å¯ä»¥ç”¨æ”¹é€ ç­–ç•¥æ¨¡å¼çš„ç±»ä¼¼æ€æƒ³ï¼Œæ¥ç®€åŒ–æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚ä¾é é«˜é˜¶å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åªéœ€ä¸€ä¸ªCivicCenterTaskç±»çš„æƒ…å†µä¸‹ï¼Œä»£æ›¿ç»§æ‰¿å®ç°ç›¸åŒçš„æ•ˆæœã€‚ class CivicCenterTask { fun execute(askForHelp: ()-&gt;Unit) { this.lineUp() askForHelp() this.evaluate() } private fun lineup(){ ... } private fun evaluate(){ ... } fun pullSocialSecurity() { ... } fun applyForCitizenCard() { ... } } //invoke &gt;&gt;&gt; CivicCenterTask().execute(::pullSocialSecurity) live up to take a number ask for pulling the social security evaluaten service attitude &gt;&gt;&gt; CivicCenterTask().excute(::applyForCitizenCard) line up to take number apply for a citizen card evaluaten service attitude å¦‚ä½ æ‰€è§ï¼Œåœ¨é«˜é˜¶å‡½æ•°çš„å¸®åŠ©ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ è½»æ¾åœ°å®ç°æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚","link":"/2020/01/17/%E5%88%A9%E7%94%A8%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0%E7%AE%80%E5%8C%96%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%E3%80%81%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/"},{"title":"åˆä¸€æ¬¡æœ‰æ„æ€çš„ç»å†","text":"åˆæ˜¯ä¸€æ¬¡æœ‰æ„æ€çš„ç»å†ï¼Œè¸‰è¸‰è·„è·„çš„æ¥ï¼Œå¿ƒæ— æ—éª›çš„èµ°ï¼Œæˆ‘æ„Ÿåˆ°äº†å‰æ‰€æœªæœ‰çš„é‡Šç„¶ï¼Œä»æ¥éƒ½æ²¡æœ‰è¿‡çš„æˆé•¿ï¼Œè¿™ç§æˆé•¿å¹¶éèŒä¸šæŠ€èƒ½ä¸Šçš„æˆé•¿ï¼Œæ—¢æ˜¯ä¸ªäººæ€æƒ³ä¸Šçš„æˆé•¿ï¼Œå¦‚æœå¯¹å¾…æ— æ‰€ä¸åœ¨çš„å†²çªå‘¢ï¼Ÿ åˆæ˜¯ä¸€æ¬¡æœ‰æ„æ€çš„ç»å†ï¼Œè¸‰è¸‰è·„è·„çš„æ¥ï¼Œå¿ƒæ— æ—éª›çš„èµ°ï¼Œæˆ‘æ„Ÿåˆ°äº†å‰æ‰€æœªæœ‰çš„é‡Šç„¶ï¼Œä»æ¥éƒ½æ²¡æœ‰è¿‡çš„æˆé•¿ï¼Œè¿™ç§æˆé•¿å¹¶éèŒä¸šæŠ€èƒ½ä¸Šçš„æˆé•¿ï¼Œæ—¢æ˜¯ä¸ªäººæ€æƒ³ä¸Šçš„æˆé•¿ï¼Œå¦‚æœå¯¹å¾…æ— æ‰€ä¸åœ¨çš„å†²çªå‘¢ï¼Ÿå¦‚ä½•åœ¨å†²çªä¸­æ‰¾åˆ°å±äºè‡ªå·±çš„ä½ç½®å‘¢ï¼Ÿè¦æ˜¯è‡ªæˆ‘èŒä¸šæŠ€èƒ½æˆé•¿è¿…é€Ÿçš„è¯ï¼Œå¦‚ä½•åœ¨ç‹‚å¦„è‡ªå¤§ä¸­å¹³æ¯å“ªä¸€ç‚¹è™šæ— å‘¢ï¼Ÿè¦æ˜¯èº«å¤„æ··ä¹±ä¹‹ä¸­å¦‚ä½•ä¸å»éšæ³¢é€æµè¿›è¡Œè‡ªæˆ‘æ•‘èµå‘¢ï¼Ÿ å†²çªçœŸçš„å­˜åœ¨å—åº”è¯¥ä¸å­˜åœ¨å§ï¼Œæœ‰æ—¢æ˜¯æœ‰ï¼Œæ²¡æœ‰æ—¢æ˜¯æ²¡æœ‰ï¼Œæ²¡æœ‰çš„ä½ æƒ³æœ‰ä¹Ÿå°±æœ‰äº†ï¼Œæœ‰çš„ä¸œè¥¿ä½ æƒ³æ²¡æœ‰ä¹Ÿå°±æ²¡æœ‰äº†ã€‚å¯¹å¾…å„ç§æ¬²æœ›çš„çˆ†å‘ï¼Œå°±åº”è¯¥ç†æ€§çš„æ€è€ƒï¼Œè®©æ€è€ƒè¶…è¿‡éç†æ€§çš„æƒ…ç»ªçˆ†å‘ï¼Œæƒ…ç»ªåŒ–å…¶å®å°±æ˜¯æœ€å¤§çš„å¼±ç‚¹ã€‚å†²çªæœ¬ä¸æ˜¯é—®é¢˜çš„æ ¹æœ¬ï¼Œå†²çªæ˜¯äººä¸ºçš„å¼ºåˆ¶æ€§æ·»åŠ çš„ç”¨æ¥è§£å†³è‡ªå·±å¯¹å½“å‰äº‹ç‰©æ— èƒ½å¤„ç†çš„ç»“æœï¼Œåº”è¯¥åœ¨å¤šæ¬¡æ·±å…¥æ€è€ƒåå»è§£å†³è¿™ç§æ— èƒ½ã€‚ è¦æ˜¯é™·å…¥äº†è™šæ— çš„è‡ªå¤§ä¸­ï¼Œå¦‚ä½•å¹³æ¯å‘¢é‚£å…¶å®åº”è¯¥æ˜¯æ³¨ç„‰è€Œä¸æ»¡é…Œç„‰è€Œä¸ç«­å‘¢ï¼Œè€ç¥–å®—çš„è¿™å¥å¯¹æ¸¸åˆƒæœ‰ä½™çš„è§£é‡Šå®Œç¾çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œè‡ªå¤§æºè‡ªè‡ªæ»¡ï¼Œæ­§è§†æ¥è‡ªæ— çŸ¥ã€‚è¦æ˜¯èƒ½æœ‰æ›´å¤§çš„çœ¼ç•Œï¼Œç«™åˆ°æ›´é«˜çš„ä½ç½®ï¼Œåº”è¯¥åªä¼šæ„Ÿå—åˆ°è‡ªå·±çš„æ¸ºå°å§ã€‚å…¶å®å¦‚æœå¯¹è¿™ä¸ªä¸–ç•Œæ°¸è¿œå……æ»¡æ•¬ç•çš„è¯ï¼Œé‚£ä¸€å®šä¼šä¸€ç›´å¤„äºè‡ªæˆ‘åçœçš„çŠ¶æ€å§ï¼Œæ€ä¹ˆä¼šè‡ªå¤§å‘¢ã€‚å…¶å®èƒ½æ‰¿è®¤è‡ªå·±è‡ªå¤§ä¹Ÿå·²ç»æ˜¯å¾ˆå¤§çš„è¿›æ­¥äº†ï¼Œæ‰¿è®¤è‡ªå·±å¹¶éä½ æ‰€ä»¥ä¸ºçš„é‚£ç§äººï¼Œç§°å¾—ä¸Šæ˜¯ä¸€ç§ç›¸å½“å¯æ€•çš„ç»å†ã€‚æ²¡é‚£ä¹ˆå¯æ€•å‘€ã€‚ æ··ä¹±ä¹‹ä¸­å¦‚ä½•è‡ªå·±æ•‘èµå‘¢è¿™é‡Œçš„æ··ä¹±å¹¶éå°ä¸‘å˜´é‡Œçš„æ··ä¹±ï¼Œä¹Ÿä¸æ˜¯ä»€ä¹ˆåè¯ï¼Œæˆ‘è§‰å¾—åœ¨æˆ‘çœ¼é‡Œåº”è¯¥æ˜¯å½¢å®¹è¯å§ï¼Œå°±æ˜¯ä¸€å †ä¹±éº»è€Œå·²ï¼Œä¹±éº»ç”¨æ¥æè¿°è‡ªå·±çœ‹åˆ°çš„æ–¹æ–¹é¢é¢ï¼Œå¤ªè¿‡æ•æ„Ÿï¼Œæ•æ„Ÿå¹¶éè´¬ä¹‰è¯ï¼Œæ”¶åˆ°å¤–ç•Œçš„ä¿¡æ¯ä»¥åï¼Œå¦‚ä½•å¤„ç†æ‰æ˜¯å…³é”®ã€‚ä½ çœ‹å§ï¼Œç°åœ¨ä½ å¯ä»¥æ”¶åˆ°å¥½å¤šåˆ«äººæ¥æ”¶ä¸åˆ°çš„ä¿¡æ¯å‘¢ï¼Œå¯æ˜¯ä½ ä»ä¸åŠ å·¥ï¼Œä»ä¸è¿‡æ»¤ï¼Œå°±è®©å®ƒä»¬æ‘‡æ‘‡æ™ƒæ™ƒçš„è¿›æ¥äº†ï¼Œç»“æœå¤–é¢ä¸€ç‰‡å¤ªå¹³ï¼Œè€Œä½ è‡ªå·±ç—›ä¸æ¬²ç”Ÿã€‚é‚£ä¸æ˜¯åº”è¯¥åè¿‡æ¥å—ï¼Œå†ä¸æµä¹Ÿåº”è¯¥æ˜¯åŒæ ·å¤ªå¹³æ‰å¯¹å‘€ï¼Ÿ endå‰æ®µæ—¶é—´ç»ˆäºçœ‹å®Œäº†ã€Šå°˜åŸƒè½å®šã€‹ã€‚å°±åƒå‚»å­æœ€åè¯´çš„ï¼Œâ€œæ˜¯çš„ï¼Œä¸Šå¤©å«æˆ‘çœ‹è§ï¼Œå«æˆ‘å¬è§ï¼Œå«æˆ‘ç½®èº«å…¶ä¸­ï¼Œåˆå«æˆ‘è¶…ç„¶ç‰©å¤–ã€‚ä¸Šå¤©æ˜¯ä¸ºäº†è¿™ä¸ªç›®çš„ï¼Œæ‰è®©æˆ‘çœ‹èµ·æ¥åƒä¸ªå‚»å­çš„ã€‚â€å¯¹å•Šï¼Œä½ ä¹Ÿå¯ä»¥çœ‹è§ï¼Œä½ ä¹Ÿå¯ä»¥å¬è§ï¼Œä½ ä¹Ÿç½®èº«äºè¿™å¤§åƒä¸–ç•Œé‡Œï¼Œä¸€å®šä¸èƒ½è¾œè´Ÿä¸Šå¤©å¯¹ä½ çš„æ©æƒ ã€‚ä½ ä¸€å®šè¦å­¦ä¼šè¶…ç„¶ç‰©å¤–ï¼Œè¦æ˜¯åˆ°ä¸äº†è¿™ä¸ªå¢ƒç•Œï¼Œä¹Ÿåº”è¯¥ç»™ä¸æœ‰åŠ›çš„å›å‡»ï¼Œä¸ç®¡æ˜¯å–„æ„çš„å›å‡»è¿˜æ˜¯æ¶æ„çš„ï¼Œç¥ç¦ä½ å§ã€‚","link":"/2019/03/22/%E5%8F%88%E4%B8%80%E6%AC%A1%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E7%BB%8F%E5%8E%86/"},{"title":"æ•™è¯²","text":"æ¼”å‘˜è¿™ä¸ªèŒä¸šç‰¹åˆ«æ®‹å¿ï¼Œå› ä¸ºä½ æ˜¯è¢«æŒ‘é€‰çš„ï¼Œäººå®¶æ²¡äººæ¥æ‰¾ä½ ï¼Œä½ å°±æ²¡æ´»å¹²ã€‚å› ä¸ºæˆ‘åšäº†37å¹´çš„æ¼”å‘˜ï¼Œå¤§æ¦‚ä»ä¸‰åå››äº”å²å¼€å§‹ï¼Œå°±æ²¡æœ‰äººæ‰¾æˆ‘æ¼”æˆäº†ï¼Œç„¶åä½ çœ¼çœ‹ç€ä½ å‘¨å›´çš„æœ‹å‹ï¼Œè¿™ä¸ªçº¢äº†ï¼Œé‚£ä¸ªçº¢äº†ã€‚ä¸€ç‚¹ä¸é‡è¦ï¼Œå› ä¸ºä½ è¦ä»äº‹çš„è¡Œä¸šä¸æ˜¯ä¸€å¹´ä¸¤å¹´ï¼Œä½ è¦ä»äº‹ä¸€ç”Ÿã€‚ &emsp;&emsp;æ¼”å‘˜è¿™ä¸ªèŒä¸šç‰¹åˆ«æ®‹å¿ï¼Œå› ä¸ºä½ æ˜¯è¢«æŒ‘é€‰çš„ï¼Œäººå®¶æ²¡äººæ¥æ‰¾ä½ ï¼Œä½ å°±æ²¡æ´»å¹²ã€‚å› ä¸ºæˆ‘åšäº†37å¹´çš„æ¼”å‘˜ï¼Œå¤§æ¦‚ä»ä¸‰åå››äº”å²å¼€å§‹ï¼Œå°±æ²¡æœ‰äººæ‰¾æˆ‘æ¼”æˆäº†ï¼Œç„¶åä½ çœ¼çœ‹ç€ä½ å‘¨å›´çš„æœ‹å‹ï¼Œè¿™ä¸ªçº¢äº†ï¼Œé‚£ä¸ªçº¢äº†ã€‚ä¸€ç‚¹ä¸é‡è¦ï¼Œå› ä¸ºä½ è¦ä»äº‹çš„è¡Œä¸šä¸æ˜¯ä¸€å¹´ä¸¤å¹´ï¼Œä½ è¦ä»äº‹ä¸€ç”Ÿã€‚&emsp;&emsp;æ‰€ä»¥ï¼Œèƒ½å¤Ÿåšä¸€ä¸ªä¸æ€¥ä¸èºçš„æ¼”å‘˜ï¼Œæ°¸è¿œè°¦é€Šï¼Œçœ‹å¾—è§çœŸæ­£æ£’çš„äººï¼Œæ¬£èµå¾—äº†çœŸæ­£å¥½çš„è¡¨æ¼”ï¼Œæ°¸è¿œä¸å»æ¯”æ‹¼ç²‰ä¸ï¼Œä½ ä¸€å®šä¼šæˆä¸ºä¸€ä¸ªå¤§æ¼”å‘˜çš„ï¼Œä½ å¾ˆæ£’!","link":"/2017/11/26/%E6%95%99%E8%AF%B2/"},{"title":"å°†Flutteræ·»åŠ åˆ°å·²æœ‰çš„é¡¹ç›®ä¸­","text":"æŸ¥çœ‹äº†ç½‘ä¸Šå„ç§æ–¹æ¡ˆä¹ŸåŒ…æ‹¬é—²é±¼å›¢é˜Ÿçš„å¼€æºflutter_bootï¼Œéƒ½å„æœ‰ç¼ºç‚¹ã€‚é‰´äºå„ç§æ–¹æ¡ˆéƒ½éœ€è¦åˆ¶å®šç›¸åº”çš„Flutterç‰ˆæœ¬ï¼Œè€ƒè™‘åˆ°Flutteræ›´æ–°é€Ÿåº¦ï¼Œäºæ˜¯å†³å®šä¾é å®˜æ–¹çš„äº§ç‰©é›†æˆæ–¹å¼è§£å†³æ··åˆå¼€å‘çš„é—®é¢˜ï¼Œå¹¶è¿›è¡Œè¿œç¨‹SDKç®¡ç†ã€‚ Flutteræ„å»ºæ¨¡å¼ä½ å¯ä»¥åœ¨å®˜æ–¹DOCSä¸­çœ‹åˆ°è¯¦ç»†ä»‹ç»ï¼Œä¸‹æ–‡æ‰“åŒ…å‘½ä»¤éƒ½ä¼šäº§å‡ºå¯¹åº”ä¸‰ç§æ¨¡å¼çš„åŒ…ä»¥ä¾¿æ»¡è¶³å„åœºæ™¯éœ€è¦ï¼Œæˆ‘ä»¬ç®€å•è®°å½•ä¸‹æ¥ï¼š DebugDebugæ¨¡å¼ä¸‹ï¼Œappå¯ä»¥è¢«å®‰è£…åœ¨ç‰©ç†è®¾å¤‡ã€ä»¿çœŸå™¨æˆ–è€…æ¨¡æ‹Ÿå™¨ä¸Šè¿›è¡Œè°ƒè¯•ã€‚ çƒ­é‡è½½ä»…èƒ½åœ¨Debugæ¨¡å¼ä¸‹è¿è¡Œ ä»¿çœŸå™¨ã€æ¨¡æ‹Ÿå™¨ä»…èƒ½åœ¨Debugæ¨¡å¼ä¸‹è¿è¡Œ Debugæ¨¡å¼ä¸‹ï¼ŒAPPæ€§èƒ½å¯èƒ½ä¼šæ‰å¸§æˆ–è€…å¡é¡¿ ProfileProfileæ¨¡å¼ä¸‹ï¼Œä¸€äº›è°ƒè¯•èƒ½åŠ›æ˜¯è¢«ä¿ç•™çš„â€”â€”è¶³å¤Ÿåˆ†æä½ çš„appæ€§èƒ½ã€‚åœ¨ä»¿çœŸå™¨å’Œæ¨¡æ‹Ÿå™¨ä¸Šï¼ŒProfileæ¨¡å¼æ˜¯ä¸å¯ç”¨çš„ã€‚ ReleaseReleaseæ¨¡å¼å¯¹å¿«é€Ÿå¯åŠ¨ã€å¿«é€Ÿæ‰§è¡Œå’Œpackageçš„å¤§å°è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå¹¶ç¦ç”¨äº†è°ƒè¯•ã€æœåŠ¡æ‰©å±•ç­‰åŠŸèƒ½ï¼ŒReleaseæ¨¡å¼åšåˆ°äº†æœ€å¤§çš„ä¼˜åŒ–ä»¥åŠæœ€å°çš„å ç”¨ç©ºé—´ã€‚ å¦‚ä¸Šä¸‰ç§æ¨¡å¼å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿è¡Œåˆ°è®¾å¤‡ä¸Šï¼š flutter run --release flutter run --profile flutter run --debug ##iOS - ä»¥frameworkçš„å½¢å¼æ·»åŠ åˆ°ä½ çš„æ—¢æœ‰iOSåº”ç”¨ä¸­ï¼Œå¹¶ä¸Šä¼ CocoaPods åˆ›å»ºFlutter moduleä½ å¯ä»¥åœ¨Android Studioä¸­åˆ›å»º ä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œ flutter create --template module my_flutter æ­¤moduleå¹¶ä¸æ˜¯Androidé‡Œçš„æ¨¡å—æˆ–è€…iOSé‡Œçš„ç»„ä»¶ï¼Œè€Œæ˜¯Googleæä¾›çš„ä¸€ç§åˆ›å»ºæ¨¡å¼ï¼Œå¯ä»¥ç‹¬ç«‹è¿è¡Œã€‚ äº§ç‰©é›†æˆflutter build ios-framework --output=somePath/ äº§ç‰©ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š somePath/ â””â”€â”€ Flutter/ â”œâ”€â”€ Debug/ â”‚ â”œâ”€â”€ Flutter.framework â”‚ â”œâ”€â”€ App.framework â”‚ â”œâ”€â”€ FlutterPluginRegistrant.framework (only if you have plugins with iOS platform code) â”‚ â””â”€â”€ example_plugin.framework (each plugin is a separate framework) â”œâ”€â”€ Profile/ â”‚ â”œâ”€â”€ Flutter.framework â”‚ â”œâ”€â”€ App.framework â”‚ â”œâ”€â”€ FlutterPluginRegistrant.framework â”‚ â””â”€â”€ example_plugin.framework â””â”€â”€ Release/ â”œâ”€â”€ Flutter.framework â”œâ”€â”€ App.framework â”œâ”€â”€ FlutterPluginRegistrant.framework â””â”€â”€ example_plugin.framework Flutter.frameworkæœ‰400M-500Mï¼Œå¹¶ä¸”ä¸ä¼šç»å¸¸å˜åŠ¨ï¼Œä¸‹æ–‡çš„pod libå¤„ç†ä¸­æˆ‘ä»¬éœ€è¦ä¸ºå®ƒå•ç‹¬åˆ›å»ºä¸€ä¸ªpodï¼Œå‰©ä¸‹çš„framworkæ¯æ¬¡æ–°å¢æ’ä»¶æˆ–å˜æ›´ä»£ç éƒ½ä¼šè·Ÿç€å˜åŠ¨ï¼Œæ”¾åœ¨ä¸€ä¸ªpodã€‚ cocoapods+gitç®¡ç†podfileæ— æ³•ç›´æ¥å¼•ç”¨frameworkï¼Œéœ€è¦ä¸€ä¸ªpodä½œä¸ºä¸­è½¬ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¾æ¬¡è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š åˆ›å»ºä¸€ä¸ªåä¸ºflutter-plugin-libç§æœ‰åº“ pod lib create flutter-plugin-lib æ‰“å¼€flutter-plugin-lib.podspecï¼Œåœ¨endå‰åŠ å…¥ï¼š s.ios.vendored_frameworks = 'flutter_frameworks/App.framework', 'flutter_frameworks/FlutterPluginRegistrant.framework', 'flutter_frameworks/shared_preferences.framework' åœ¨æ ¹ç›®å½•åˆ›å»ºflutter_frameworksæ–‡ä»¶å¤¹ï¼ŒæŠŠåˆšç”ŸæˆReleaseçš„frameworké™¤å»Flutter.framework cvè¿‡æ¥ã€‚ åˆ›å»ºgitä»“åº“å¹¶ä¸Šä¼ åˆ°äº‘ç«¯ã€‚ git init git remote add origin http://xxx/flutter-plugin-lib.git git add . git commit -m &quot;xxx&quot; git push -u origin master åœ¨éœ€è¦æ··ç¼–Flutterçš„nativeé¡¹ç›®çš„podfileä¸­æ·»åŠ ï¼š pod 'flutter-plugin-lib', :git =&gt; 'http://xxx/flutter-plugin-lib' :tag =&gt; 'v1.0.0' åŒæ­¥cocoapods pod install Flutter.frameworkå¤„ç†æ–¹æ¡ˆå¦‚ä¸Šã€‚ è‡³æ­¤ï¼Œå®Œæˆäº†å¼•å…¥æ‰€æœ‰çš„frameworksï¼Œå¹¶ä¸”ä¸éœ€è¦ç»„å†…å…¶ä»–æˆå‘˜åœ¨æœ¬åœ°å®‰è£…Flutter SDKå’ŒCocoapodsã€‚ éªŒè¯AppDelegate.swift import UIKit import Flutter import FlutterPluginRegistrant @UIApplicationMain class AppDelegate: FlutterAppDelegate { lazy var flutterEngine = FlutterEngine(name: &quot;sup flutter engine&quot;) override func application(_ application: UIApplication,didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool { flutterEngine.run() GeneratedPluginRegistrant.register(with: self.flutterEngine) return super.application(application, didFinishLaunchingWithOptions: launchOptions) } } ViewController.swift import UIKit import Flutter class ViewController: UIViewController { override func viewDidLoad() { super.viewDidLoad() let button = UIButton(type: UIButton.ButtonType.custom) button.addTarget(self, action: #selector(showFlutter), for: .touchUpInside) button.setTitle(&quot;Show Flutter!&quot;, for: UIControl.State.normal) button.frame = CGRect(x: 80.0, y: 200.0, width: 160.0, height: 40.0) button.backgroundColor = UIColor.blue self.view.addSubview(button) self.view.backgroundColor = UIColor.white } @objc func showFlutter() { present(FlutterViewController(engine: (UIApplication.shared.delegate as! AppDelegate).flutterEngine, nibName: nil, bundle: nil),animated: true,completion: nil) } } Android-ä»¥aarçš„å½¢å¼ä¸Šä¼ åˆ°ç§æœ‰maven/æœ¬åœ°ä¾èµ–åˆ›å»ºFlutter moduleä½ å¯ä»¥åœ¨ä¸Šè¿°iOSæ‰€åˆ›å»ºçš„moduleä¸­ç»§ç»­å¼€å‘ã€‚ äº§ç‰©é›†æˆflutter build aar äº§ç‰©ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š build/host/outputs/repo â””â”€â”€ com â””â”€â”€ example â””â”€â”€ my_flutter â”œâ”€â”€ flutter_release â”‚ â”œâ”€â”€ 1.0 â”‚ â”‚ â”œâ”€â”€ flutter_release-1.0.aar â”‚ â”‚ â”œâ”€â”€ flutter_release-1.0.aar.md5 â”‚ â”‚ â”œâ”€â”€ flutter_release-1.0.aar.sha1 â”‚ â”‚ â”œâ”€â”€ flutter_release-1.0.pom â”‚ â”‚ â”œâ”€â”€ flutter_release-1.0.pom.md5 â”‚ â”‚ â””â”€â”€ flutter_release-1.0.pom.sha1 â”‚ â”œâ”€â”€ maven-metadata.xml â”‚ â”œâ”€â”€ maven-metadata.xml.md5 â”‚ â””â”€â”€ maven-metadata.xml.sha1 â”œâ”€â”€ flutter_profile â”‚ â”œâ”€â”€ ... â””â”€â”€ flutter_debug â””â”€â”€ ... mavenç®¡ç†ä½ å¯ä»¥æŒ‰ç…§google DOCS ä¸­æè¿°çš„æ–¹å¼åœ¨æœ¬åœ°ä¾èµ–aarã€‚ android { // ... } repositories { maven { url 'somepath/my_flutter/build/host/outputs/repo' // This is relative to the location of the build.gradle file // if using a relative path. } maven { url 'https://storage.googleapis.com/download.flutter.io' } } dependencies { // ... debugImplementation 'com.example.flutter_module:flutter_debug:1.0' profileImplementation 'com.example.flutter_module:flutter_profile:1.0' releaseImplementation 'com.example.flutter_module:flutter_release:1.0' } ä½†æ˜¯è¿™æ ·å¯¹nativeå¼€å‘ç»„å‘˜æ¥è¯´æ¥å…¥æˆæœ¬è¿˜æ˜¯è¿‡é«˜ï¼Œäºæ˜¯æˆ‘è€ƒè™‘åˆ°ç”¨mavenç§æœç®¡ç†çš„æ–¹å¼å¤„ç†ä¾èµ–ï¼Œå½“ç„¶é¦–å…ˆå…¬å¸åº”è¯¥æœ‰æœåŠ¡å™¨ï¼Œä»¥ä¸‹åŸºäºmacæ­å»ºmavenä»“åº“ï¼š brew install nexus nexus start &gt;&gt;http://localhost:8081/nexus/ nexus stop åœ¨flutter moduleä¸­ç¼–å†™shè„šæœ¬å¤„ç†ä¸Šä¼ åŠ¨ä½œï¼š #!/bin/bash flutter clean flutter build aar # å®šä¹‰ç”¨äºaarã€pomæ–‡ä»¶ç›®å½•å­˜æ”¾çš„æ•°ç»„ aars=() poms=() # æŒ‡å®šæ‰“åŒ…åæœ¬åœ°ä»“åº“çš„ç›®å½•ï¼Œç”±äºè¿™é‡Œå°†æ­¤è„šæœ¬æ”¾åœ¨flutter moduleæ ¹ç›®å½•ï¼Œå› æ­¤ç›´æ¥é…ç½®äº†flutter moduleæ ¹ç›®å½•ä¸‹ç›¸å¯¹ç›®å½• targetPath=&quot;build/host/outputs/repo&quot; # å®šä¹‰éå†æ‰¾åˆ°æ‰€æœ‰pomæ–‡ä»¶å’Œaaræ–‡ä»¶çš„å‡½æ•° # å‚æ•°$1ï¼šå½“å‰æŸ¥æ‰¾çš„ç›®å½•å function findAarPom(){ echo &quot;æŸ¥æ‰¾æ­¤ç›®å½•æ˜¯å¦æœ‰aaråŠpomï¼š$1&quot; targetDir=`ls $1` for fileName in $targetDir do if [[ -d $1&quot;/&quot;$fileName ]]; then # è¿˜æ˜¯ç›®å½•ï¼Œåˆ™é€’å½’æ‰¾ä¸‹ä¸€çº§ findAarPom $1&quot;/&quot;$fileName else # å¦‚æœæ˜¯æ–‡ä»¶ï¼Œåˆ¤æ–­åç¼€ï¼Œå¦‚æœç¬¦åˆæœŸæœ›ï¼Œåˆ™å°†æ–‡ä»¶è·¯å¾„æ‹¼æ¥å¥½æ”¾äºå¯¹åº”æ•°ç»„æœ€åä¸€ä½ if [[ ${fileName:0-4} == '.aar' ]]; then aars[${#aars[@]}]=$1&quot;/&quot;$fileName elif [[ ${fileName:0-4} == '.pom' ]]; then poms[${#poms[@]}]=$1&quot;/&quot;$fileName fi fi done } findAarPom $targetPath echo &quot;============&quot; echo &quot;aaræœ‰ï¼šã€Šå…±${#aars[@]}ä¸ªã€‹&quot; echo &quot;${aars[@]}&quot; echo &quot;pomæœ‰ï¼šã€Šå…±${#poms[@]}ä¸ªã€‹&quot; echo &quot;${poms[@]}&quot; echo &quot;============&quot; # ä¸€ä¸ªaaræ–‡ä»¶å¿…ç„¶å¯¹åº”ä¼šæœ‰ä¸€ä¸ªpomæ–‡ä»¶ï¼Œå¦‚æœæ•°é‡ä¸å¯¹ï¼Œä¸€å®šæ˜¯æ‰“åŒ…å‡ºé”™ if [[ ${#aars[@]} -ne ${#poms[@]} ]]; then echo &quot;-- !!! pomæ–‡ä»¶ä¸aarä¸å¯¹ç§°ï¼Œè¯·æ£€æŸ¥aaræ‰“åŒ…é…ç½®ï¼Œä¸Šä¼ ä»»åŠ¡ é€€å‡º !!! --&quot; exit 1 fi if [[ ${#aars[@]} == 0 ]]; then echo &quot;-- !!! æœªæ‰¾åˆ°aaræ–‡ä»¶ï¼Œè¯·æ£€æŸ¥aaræ‰“åŒ…é…ç½®ï¼Œä¸Šä¼ ä»»åŠ¡ é€€å‡º !!! --&quot; exit 1 fi # å®šä¹‰å°†ç›®æ ‡pomåŠaarä¸Šä¼ åˆ°mavenæŒ‡å®šä»“åº“çš„å‡½æ•° # å‚æ•°$1ï¼šä¸ºpomæ–‡ä»¶ # å‚æ•°$2ï¼šä¸ºaaræ–‡ä»¶ function upload(){ echo &quot;å¼€å§‹ä¸Šä¼ ï¼š&quot; echo $1 echo $2 # mvnä¸Šä¼ å‘½ä»¤ï¼Œè¿™é‡Œç”±äºå°†ä¸Šä¼ ç”¨æˆ·åå¯†ç é…ç½®äºå…¨å±€maven settings.xmlï¼Œåˆ™æ— éœ€å†æŒ‡å®šç”¨æˆ·åå¯†ç  mvn deploy:deploy-file \\ -DpomFile=&quot;$1&quot; \\ -DgeneratePom=false \\ -Dfile=&quot;$2&quot; \\ -Durl=&quot;http://localhost:8081/nexus/content/repositories/releases&quot; \\ -DrepositoryId=&quot;nexus&quot; \\ -Dpackaging=aar \\ -s=&quot;mvn-settings.xml&quot; } # å¾ªç¯ä¸Šä¼  for (( i=0;i&lt;${#aars[@]};i++ )); do echo &quot;æ­£åœ¨å¤„ç†ç¬¬$[$i+1]ä¸ªï¼Œå…±${#aars[@]}ä¸ª&quot; upload &quot;${poms[$i]}&quot; &quot;${aars[$i]}&quot; done å…¶ä¸­mvn-settings.xmlæ˜¯å•ç‹¬å¯¹å½“å‰é¡¹ç›®é…ç½®mvnï¼Œä¿®æ”¹admin passwordä¸ºmavençš„è´¦å·å¯†ç ï¼Œé»˜è®¤ä¸ºadmin/admin123 åœ¨Androidé¡¹ç›®appæ¨¡å—ä¸­çš„build.gradle android { // ... buildTypes { ... profile { initWith debug } } compileOptions { sourceCompatibility JavaVersion.VERSION_1_8 targetCompatibility JavaVersion.VERSION_1_8 } } repositories { maven { url 'http://localhost:8081/nexus/content/repositories/releases' // This is relative to the location of the build.gradle file // if using a relative path. } maven { url 'https://storage.googleapis.com/download.flutter.io' } } dependencies { // ... debugImplementation 'com.example.flutter_module:flutter_debug:1.0' profileImplementation 'com.example.flutter_module:flutter_profile:1.0' releaseImplementation 'com.example.flutter_module:flutter_release:1.0' } å¦‚æ­¤å³å¯å®Œæˆmavenç§æœä¸Šä¼ ï¼Œå¦‚æœä½ æœ‰æœåŠ¡å™¨å¯ä»¥ä¿®æ”¹ipåœ°å€å®Œæˆä¸Šä¼ ã€ä¾èµ–ã€‚ç”±äºæˆ‘å¸æ²¡æœ‰ç§æœï¼Œäºæ˜¯å†³å®šæŠŠhost/æ–‡ä»¶å¤¹æ‹–å…¥é¡¹ç›®çš„æ–¹å¼å®ç°ä¾èµ–ï¼š æ ¹ç›®å½•build.gradle: buildscript { ... repositories { ... maven { url '../host/outputs/repo' } maven { url 'https://storage.flutter-io.cn/download.flutter.io' } } } allprojects { repositories { ... maven { url '../host/outputs/repo' } maven { url 'https://storage.flutter-io.cn/download.flutter.io' } } } è‡³æ­¤ï¼Œå®Œæˆäº†å¼•å…¥æ‰€æœ‰çš„aarï¼Œå¹¶ä¸”ä¸éœ€è¦ç»„å†…å…¶ä»–æˆå‘˜åœ¨æœ¬åœ°å®‰è£…Flutter SDKã€‚ç½‘ä¸Šä¹Ÿæœ‰é€šè¿‡fat-aaræ¥åˆå¹¶aaråŒ…è¿›è¡Œä¾èµ–å¤„ç†çš„æ–¹æ³•ï¼Œæˆ‘è®¤ä¸ºå¯¹äºè¿­ä»£é¢‘ç¹çš„æ–°æŠ€æœ¯åº”è¯¥å°½é‡ç”¨å®˜æ–¹æ¨èçš„æ–¹å¼å»å®ç°ï¼Œä»¥å…ä¹‹åçš„è¿­ä»£ã€ç‰ˆæœ¬å‡çº§å¸¦æ¥ä¸å¿…è¦çš„å¼€å‘æˆæœ¬ã€‚ éªŒè¯App.kt class App : Application() { override fun onCreate() { super.onCreate() FlutterMain.startInitialization(this) } } FlutterActivity.kt class FlutterActivity : FlutterFragmentActivity() { var engine:FlutterEngine? = null override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) engine = FlutterEngine(this) engine?.dartExecutor?.executeDartEntrypoint(DartExecutor.DartEntrypoint.createDefault()) setContentView(R.layout.activity_flutter) fv_container.attachToFlutterEngine(engine!!) } override fun onResume() { super.onResume() engine?.lifecycleChannel?.appIsResumed() } override fun onPause() { super.onPause() engine?.lifecycleChannel?.appIsInactive() } override fun onStop() { super.onStop() engine?.lifecycleChannel?.appIsPaused() } override fun onDestroy() { fv_container.detachFromFlutterEngine() super.onDestroy() } } End","link":"/2020/09/19/%E5%B0%86Flutter%E6%B7%BB%E5%8A%A0%E5%88%B0%E5%B7%B2%E6%9C%89%E7%9A%84%E9%A1%B9%E7%9B%AE%E4%B8%AD/"},{"title":"å·¥å‚æ–¹æ³•æ¨¡å¼","text":"åˆ©ç”¨Kotlinä¸­çš„ä¼´ç”Ÿå¯¹è±¡å¢å¼ºå·¥å‚æ¨¡å¼ ä¸€äº›åœ°æ–¹ä¼šæŠŠå·¥å‚æ¨¡å¼ç»†åˆ†ä¸ºç®€å•å·¥å‚ã€å·¥å‚æ–¹æ³•æ¨¡å¼ä»¥åŠæŠ½è±¡å·¥å‚,ä¸€ä¸‹åˆ†ç±»è¯´æ˜ï¼š ç®€å•å·¥å‚ç®€å•å·¥å‚çš„æ ¸å¿ƒä½œç”¨å°±æ˜¯é€šè¿‡ä¸€ä¸ªå·¥å‚ç±»éšè—å¯¹è±¡å®ä¾‹çš„åˆ›å»ºé€»è¾‘ï¼Œè€Œä¸æ˜¯æš´éœ²ç»™å®¢æˆ·ç«¯ã€‚å…¸å‹çš„ä½¿ç”¨åœºæ™¯å°±æ˜¯å½“æ‹¥æœ‰ä¸€ä¸ªçˆ¶ç±»ä¸å¤šä¸ªå­ç±»çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ç§æ¨¡å¼æ¥åˆ›å»ºå­ç±»å¯¹è±¡ã€‚ ä¾‹å¦‚ç°åœ¨æœ‰ä¸€ä¸ªç”µè„‘åŠ å·¥å‚ï¼ŒåŒæ—¶ç”Ÿäº§ä¸ªäººç”µè„‘å’ŒæœåŠ¡å™¨ä¸»æœºã€‚ç”¨javaä¸­çš„æ€ç»´é€»è¾‘æ¥å®ç°å·¥å‚æ¨¡å¼ interface Computer { val cpu: String } class PC(override val cpu: String = &quot;Core&quot;): Computer class Server(override val cpu: String = &quot;Xeon&quot;): Computer enum class ComputerType { PC,Server } class ComputerFactory { fun produce(type: ComputerType): Computer { return when(type) { ComputerType.PC -&gt; PC() ComputerType.Server -&gt; Server() } } } ä»¥ä¸Šä»£ç é€šè¿‡è°ƒç”¨ComputerFactoryç±»çš„produceæ–¹æ³•æ¥åˆ›å»ºä¸åŒçš„Computerå­ç±»å¯¹è±¡ï¼Œè¿™æ ·æˆ‘ä»¬å°±æŠŠåˆ›å»ºå®ä¾‹çš„é€»è¾‘ä¸å®¢æˆ·ç«¯ä¹‹é—´å®ç°è§£è€¦ï¼Œå½“å¯¹è±¡åˆ›å»ºçš„é€»è¾‘å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¯¥æ¨¡å¼åªéœ€è¦ä¿®æ”¹produceå‡½æ•°å†…éƒ¨çš„ä»£ç å³å¯ï¼Œç›¸æ¯”ç›´æ¥åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•æ›´åŠ åˆ©äºç»´æŠ¤ã€‚ è™½ç„¶å®ƒæ”¹å–„äº†ç¨‹åºçš„å¯ç»´æŠ¤æ€§ï¼Œä½†åˆ›å»ºå¯¹è±¡çš„çš„è¡¨è¾¾ä¸Šå´æ˜¾å¾—ä¸å¤Ÿç®€æ´ã€‚å½“æˆ‘ä»¬åœ¨ä¸åŒçš„åœ°æ–¹åˆ›å»ºComputerçš„å­ç±»å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªComputerFactoryç±»å¯¹è±¡ï¼Œè€ŒKotlinå¤©ç”Ÿæ”¯æŒäº†å•ä¾‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±ç”¨objectå…³é”®å­—ä»¥åŠç›¸å…³çš„ç‰¹æ€§æ¥è¿›ä¸€æ­¥ç®€åŒ–ä»¥ä¸Šçš„ä»£ç è®¾è®¡ã€‚ ç”¨å•ä¾‹ä»£æ›¿å·¥å‚ç±»Kotlinæ”¯æŒç”¨objectæ¥å®ç°Javaä¸­çš„å•ä¾‹æ¨¡å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªComputerFactoryå•ä¾‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå·¥å‚ç±»ã€‚ object ComputerFatory { fun produce(type: ComputerType): Computer { return when(type) { ComputerType.PC -&gt; PC() ComputerType.Server -&gt; Server() } } } //è°ƒç”¨ ComputerFactory.produce(ComputerType.PC) æ­¤å¤–ï¼Œç”±äºæˆ‘ä»¬é€šè¿‡ä¼ å…¥Computerç±»å‹æ¥åˆ›å»ºä¸åŒçš„å¯¹è±¡ï¼Œæ‰€ä»¥è¿™é‡Œçš„produceåˆæ˜¾å¾—å¤šä½™ï¼Œè€ŒKotlinæ”¯æŒè¿ç®—ç¬¦é‡è½½ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡operatoræ“ä½œç¬¦é‡è½½invokeæ–¹æ³•æ¥ä»£æ›¿produceï¼Œä»è€Œè¿›ä¸€æ­¥ç®€åŒ–è¡¨è¾¾ï¼š object ComputerFactory { operator fun invoke(type: ComputerType): Computer { return when(type) { ComputerType.PC -&gt; PC() ComputerType.Server -&gt; Server() } } } //è°ƒç”¨ ComputerFactory(ComputerType.PC) ä¾é Kotlinè¿™ä¸€ç‰¹æ€§ï¼Œæˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªComputerå¯¹è±¡å°±æ˜¾å¾—éå¸¸ç®€æ´ï¼Œä¸ç›´æ¥åˆ›å»ºä¸€ä¸ªå…·ä½“ç±»å®ä¾‹æ˜¾å¾—æ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚ ä¼´ç”Ÿå¯¹è±¡åˆ›å»ºé™æ€å·¥å‚æ–¹æ³•å½“å‰çš„å·¥å‚æ¨¡å¼å®ç°å·²ç»è¶³å¤Ÿä¼˜é›…ï¼Œè€Œä½ ä¾æ—§è§‰å¾—ä¸å¤Ÿå®Œç¾ï¼šæˆ‘ä»¬æ˜¯å¦å¯ä»¥ç›´æ¥é€šè¿‡Computer()è€Œä¸æ˜¯ComputerFactory()æ¥åˆ›å»ºä¸€ä¸ªå®ä¾‹å‘¢ï¼Ÿ ã€ŠEffective Javaã€‹ä¸€ä¹¦çš„ç¬¬ä¸€æ¡æŒ‡å¯¼åŸåˆ™ï¼šè€ƒè™‘ç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å™¨ã€‚ Kotlinä¸­çš„ä¼´ç”Ÿå¯¹è±¡ï¼Œä»£æ›¿äº†Javaä¸­çš„staticï¼ŒåŒæ—¶åœ¨åŠŸèƒ½å’Œè¡¨è¾¾ä¸Šæ‹¥æœ‰æ›´å¼ºçš„èƒ½åŠ›ã€‚é€šè¿‡åœ¨Computeræ¥å£ä¸­å®šä¹‰ä¸€ä¸ªä¼´ç”Ÿå¯¹è±¡ï¼Œæˆ‘ä»¬å°±èƒ½å®ç°ä»¥ä¸Šçš„éœ€æ±‚ï¼š interface Computer { val cpu: String companion object Factory { operator fun invoke(type: ComputerType): Computer { return when(type) { ComputerType.PC -&gt; PC() ComputerType.Server -&gt; Server() } } } } //è°ƒç”¨ Computer.Factory(ComputerType.PC) æ‰©å±•ä¼´ç”Ÿå¯¹è±¡æ–¹æ³•ä¾èµ–ä¼´ç”Ÿå¯¹è±¡çš„ç‰¹æ€§ï¼Œå·²ç»å®ç°äº†ç»å…¸çš„å·¥å‚æ¨¡å¼ã€‚åŒæ—¶è¿™ç§æ–¹å¼è¿˜æœ‰ä¸€ä¸ªä¼˜åŠ¿ï¼Œå®ƒæ¯”åŸæœ‰Javaä¸­çš„è®¾è®¡æ›´åŠ å¼ºå¤§ã€‚å‡å¦‚å®é™…ä¸šåŠ¡ä¸­æˆ‘ä»¬æ˜¯Computerå€Ÿå£çš„ä½¿ç”¨è€…ï¼Œæ¯”å¦‚å®ƒæ˜¯å·¥ç¨‹å¼•å…¥çš„ç¬¬ä¸‰æ–¹ç±»åº“ï¼Œæ‰€æœ‰ç±»çš„å®ç°ç»†èŠ‚éƒ½å¾—åˆ°äº†å¾ˆå¥½åœ°éšè—ã€‚é‚£ä¹ˆï¼Œå¦‚æœå¸Œæœ›è¿›ä¸€æ­¥æ”¹é€ å…¶ä¸­çš„é€»è¾‘ï¼ŒKotlinä¸­ä¼´ç”Ÿå¯¹è±¡çš„æ–¹å¼åŒæ ·å¯ä»¥ä¾é å…¶æ‰©å±•å‡½æ•°çš„ç‰¹æ€§ï¼Œå¾ˆå¥½åœ°å®ç°è¿™ä¸€éœ€æ±‚ã€‚ æ¯”å¦‚æˆ‘ä»¬éœ€è¦ç»™Computeræ·»åŠ ä¸€ç§åŠŸèƒ½ï¼Œé€šè¿‡CPUå‹å·æ¥åˆ¤æ–­ç”µè„‘ç±»å‹ï¼Œé‚£ä¹ˆä¹…å¯ä»¥å¦‚ä¸‹å®ç°ï¼š fun Computer.Companion.fromCPU(cpu: String): ComputerType? { return when (cpu) { &quot;Core&quot; -&gt; ComputerType.PC &quot;Xeon&quot; -&gt; ComputerType.Server else -&gt; null } } å¦‚æœæŒ‡å®šäº†ä¼´ç”Ÿå¯¹è±¡çš„åå­—ä¸ºFactory,é‚£ä¹ˆå°±å¯ä»¥å¦‚ä¸‹å®ç°ï¼š fun Computer.Factory.fromCPU(cpu: String): ComputerType? = ... å†…è”å‡½æ•°ç®€åŒ–æŠ½è±¡å·¥å‚å·¥å‚æ¨¡å¼å·²ç»èƒ½å¤Ÿå¾ˆå¥½åœ°å¤„ç†ä¸€ä¸ªäº§å“ç­‰çº§ç»“æ„çš„é—®é¢˜ï¼Œä¸Šè¿°ç®€å•å·¥å‚å·²ç»è§£å†³äº†ç”µè„‘å‚å•†ç”Ÿäº§æœåŠ¡å™¨ã€PCæœºçš„é—®é¢˜ã€‚è¿›ä¸€æ­¥æ€è€ƒï¼Œå½“é—®é¢˜ä¸Šå‡åˆ°å¤šä¸ªäº§å“ç­‰çº§ç»“æ„çš„æ—¶å€™ï¼Œæ¯”å¦‚ç°åœ¨å¼•å…¥äº†å“ç‰Œå•†çš„æ¦‚å¿µï¼Œæˆ‘ä»¬æœ‰å¥½å‡ ä¸ªä¸åŒçš„ç”µè„‘å“ç‰Œï¼Œæ¯”å¦‚Dell,Asus,Acerï¼Œé‚£ä¹ˆå°±æœ‰å¿…è¦å†å¢åŠ ä¸€ä¸ªå·¥å‚ç±»ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¹¶ä¸å¸Œæœ›å¯¹æ¯ä¸ªæ¨¡å‹éƒ½å»ºç«‹ä¸€ä¸ªå·¥å‚ï¼Œè¿™ä¼šè®©ä»£ç å˜å¾—éš¾ä»¥ç»´æŠ¤ï¼Œæ‰€ä»¥è¿™æ—¶å€™éœ€è¦å¼•å…¥æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚ æŠ½è±¡å·¥å‚æ¨¡å¼ä¸ºåˆ›å»ºä¸€ç»„ç›¸å…³æˆ–ç›¸äº’ä¾èµ–çš„å¯¹è±¡æä¾›ä¸€ä¸ªæ¥å£ï¼Œè€Œä¸”æ— é¡»æŒ‡å®šå®ƒä»¬çš„å…·ä½“ç±»ã€‚ åœ¨æŠ½è±¡å·¥å‚çš„å®šä¹‰ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠâ€œä¸€ç»„ç›¸å…³æˆ–ç›¸äº’ä¾èµ–çš„å¯¹è±¡â€ç§°ä½œâ€œäº§å“æ—â€ï¼Œåœ¨ä¸Šè¿°çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°±æåˆ°äº†3ä¸ªä»£è¡¨ä¸åŒç”µè„‘å“ç‰Œçš„äº§å“æ—ã€‚ä¸‹é¢æˆ‘ä»¬å°±åˆ©ç”¨æŠ½è±¡å·¥å‚ï¼Œæ¥å®ç°å…·ä½“éœ€æ±‚ï¼š interface Computer class Dell: Computer class Asus: Computer class Acer: Computer class DellFactory: AbstractFactory() { override fun produce() = Dell() } class AsusFactory: AbstractFactory() { override fun produce() = Asus() } class AcerFactory: AbstractFactory() { override fun produce() = Acer() } abstract class AbstractFactory { abstract fun produce(): Computer companion object { operator fun invoke(factory: AbstractFactory) = factory } } //è°ƒç”¨ AbstractFactory(DellFactory()).produce() æ¯ä¸ªç”µè„‘å“ç‰Œæ‹¥æœ‰ä¸€ä¸ªä»£è¡¨ç”µè„‘äº§å“çš„ç±»ï¼Œå®ƒä»¬éƒ½å®ç°äº†Computeræ¥å£ã€‚æ­¤å¤–æ¯ä¸ªå“ç‰Œä¹Ÿè¿˜æœ‰ä¸€ä¸ªç”¨äºç”Ÿäº§ç”µè„‘çš„AbstractFactoryå­ç±»ï¼Œå¯é€šè¿‡AbstractFactoryç±»çš„ä¼´ç”Ÿå¯¹è±¡ä¸­çš„invokeæ–¹æ³•ï¼Œæ¥æ„é€ å…·ä½“å“ç‰Œçš„å·¥å‚ç±»å¯¹è±¡ã€‚ ç”±äºKotlinè¯­æ³•çš„ç®€æ´ï¼Œä»¥ä¸Šä¾‹å­çš„æŠ½è±¡å·¥å‚ç±»çš„è®¾è®¡ä¹Ÿæ¯”è¾ƒç›´è§‚ã€‚ç„¶è€Œï¼Œå½“ä½ æ¯æ¬¡åˆ›å»ºå…·ä½“çš„å·¥å‚ç±»æ—¶ï¼Œéƒ½éœ€è¦ä¼ å…¥ä¸€ä¸ªå…·ä½“çš„å·¥å‚ç±»å¯¹è±¡ä½œä¸ºå‚æ•°è¿›è¡Œæ„é€ ï¼Œè¿™ä¸ªåœ¨è¯­æ³•ä¸Šæ˜¾ç„¶ä¸æ˜¯å¾ˆä¼˜é›…ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å†…è”å‡½æ•°æ¥æ”¹å–„è¿™ä¸€æƒ…å†µï¼š abstract class AbstractFactory { abstract fun produce(): Computer companion object { inline operator fun &lt;reified T : Computer&gt; invoke() = when(T::class) { Dell::class -&gt; DellFactory() Asus::class -&gt; AsusFactory() Acer::class -&gt; AcerFactory() else -&gt; throw IllegalArgumentException() } } } //è°ƒç”¨ AbstractFactory&lt;Dell&gt;().produce() é€šè¿‡å°†invokeæ–¹æ³•å®šä¹‰ä¸ºå†…è”å‡½æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼•å…¥reifiedå…³é”®å­—ï¼Œä½¿ç”¨å…·ä½“åŒ–å‚æ•°ç±»å‹çš„è¯­æ³•ç‰¹æ€§ è¦å…·ä½“åŒ–çš„å‚æ•°ç±»å‹ä¸ºComputer,åœ¨invokeæ–¹æ³•ä¸­æˆ‘ä»¬é€šè¿‡åˆ¤æ–­å®ƒçš„å…·ä½“ç±»å‹ï¼Œæ¥è¿”å›å¯¹äºçš„å·¥å‚ç±»å¯¹è±¡ å‚è€ƒ: Dive in Kotlin","link":"/2020/01/17/%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/"},{"title":"æ— é¢˜","text":"è‡ªæˆ‘ç¾è€»æ„Ÿåœ¨ä½ å¿ƒåº•é—ªé—ªå‘å…‰çŸ¥é“æ¯”å­¤ç‹¬å¯æ€•åƒä¸‡å€æˆ‘å¯¹æ¯ä¸ªäººéƒ½å‹å–„ï¼Œå´ä»æœªåˆ‡å®æ„Ÿå—è¿‡â€œå‹æƒ…â€å·®è‡ªå·±çš„ä¸€å¥æŠ±æ­‰ï¼Œè¯´ç»™äº†ä¸–ç•Œ â€”â€”â€”â€”ã€Šäººé—´å¤±æ ¼ã€‹å¤ªå®°æ²»","link":"/2020/02/25/%E6%97%A0%E9%A2%98/"},{"title":"ç¬¬ä¸€ç¯‡","text":"æˆ‘è¿™ç§åº”è¯¥æ˜¯ä¸ä¼šå»å†™åšå®¢çš„ï¼Œè‡ªå·±çš„å°è±¡ç¬”è®°ä¹Ÿæ˜¯ä¿¡æ‰‹ææ¥ï¼Œæƒ³åˆ°æ‹¿å°±å†™åˆ°æ‹¿ï¼Œå‡Œä¹±çš„å¾ˆã€‚æ°å¥½çœ‹åˆ°æœ‰äººç”¨Hexoï¼Œå°±å¼„ä¸€ä¸ªç©ç©ã€‚ä¸è¿‡åªæ”¯æŒmdï¼Œæ­£å¥½Bearä¸‹ä¸‹æ¥ä»æ¥æ²¡æœ‰ç”¨è¿‡ï¼Œå€Ÿæ­¤æ‹¿å‡ºæ¥ç”¨ä¸€ä¸‹ã€‚å¸Œæœ›åšæŒä¸‹å»å¤šæ€»ç»“ï¼Œå¤šåˆ†äº«ã€‚","link":"/2017/11/23/%E7%AC%AC%E4%B8%80%E7%AF%87/"},{"title":"ç”Ÿè€Œä¸ºäººï¼Œå¯¹ä¸èµ·","text":"ä¸è¦å¸é£Ÿé¦™çƒŸï¼Œè‹¥éèŠ‚æ—¥ï¼Œä¹Ÿåˆ«é¥®é…’ï¼Œé•¿å¤§åï¼Œè¯·å¤šåŠ çˆ±æƒœé‚£æ€§æ ¼å†…å‘ï¼Œä¸çˆ±æµ“å¦†çš„å§‘å¨˜ã€‚ &emsp;&emsp;â€œä»å°äº†è§£äº†äººç±»çš„ç§ç§å‘åŠ£ä¹‹å¤„ï¼Œå¯¹è¿™ç§å‘åŠ£æ·±æ·±åŒæ¶ï¼Œä½†ä»–éšåå‘ç°è‡ªå·±èº«ä¸Šä¹Ÿæœ‰è¿™ç§å‘åŠ£ï¼Œè¿›è€Œå¯¹è‡ªå·±ä¹Ÿäº§ç”Ÿäº†è¿™ç§åŒæ¶ã€‚ä½†æ˜¯ï¼Œå¶è—å¹¶æ²¡æœ‰åŠ›é‡å»é˜»æ­¢ï¼Œç”šè‡³æ²¡æœ‰åŠ›é‡å»åŠªåŠ›ï¼Œåªå¥½éšæ³¢é€æµï¼Œåšä¸€ä¸ªè¢«åŠ¨çš„äººã€‚ä¸ºäº†è„±ç¦»è¿™ç§ç½ªæ¶æ„Ÿï¼Œä»–çš„ç²¾ç¥é¢†åŸŸé‡Œäº§ç”Ÿäº†ä¸€ç§è‡ªæˆ‘åˆ‡å‰²ç°è±¡ï¼ŒæŠŠè¿™äº›å‘åŠ£ï¼Œå…·ç°åŒ–æˆäº†é‚£ä¸ªé»‘è‰²çš„å°äººã€‚é‚£ä¸ªå°äººï¼Œå¯ä»¥è¯´æ˜¯å¶è—è‡ªå·±çš„ç½ªï¼Œä½†ä¹Ÿå¯ä»¥è¯´æ˜¯å¶è—è‡ªå·±ã€‚ä¸€èˆ¬äººï¼Œå…¶å®æ˜¯ç»ˆç”Ÿå’Œå°äººå…±ç”Ÿä¸‹å»çš„ï¼Œä½†å¶è—å¯¹äºå†…å¿ƒä¸–ç•Œæœ‰å¾ˆé«˜çš„è¿½æ±‚ï¼Œå¸Œæœ›æŠŠè¿™ä»¶äº‹æƒ…æ€è€ƒé€å½»ï¼Œæ‰€ä»¥æœ€ååªå¥½é™·å…¥äº†æç«¯ï¼Œé€‰æ‹©æ”¾å¼ƒè‡ªå·±çš„ç”Ÿå‘½ã€‚å…¶å®ï¼Œäº†è§£åˆ°äººæ€§æœ¬æ¶è¿™ä¸€ç‚¹ï¼Œå…¶å®ä¸ä¸€å®šè¦èµ°å‘è¿™æ ·çš„æç«¯ï¼Œä¸å¦‚æ”¾å¼ƒæ‰å¯¹äººæ€§çš„è™šå‡é¢„æœŸï¼Œæƒ³ç€æ€æ ·åœ¨æ¯ä»¶äº‹æƒ…ä¸ŠåŠªåŠ›å˜å¥½ï¼Œå¯èƒ½æ˜¯æ›´ç§¯æçš„åšæ³•ã€‚ä¸è¿‡ï¼Œäººå¹¶ä¸èƒ½æ€»æ˜¯è¿™ä¹ˆåšå¼ºä¸é˜³å…‰ï¼Œæ‰€ä»¥å¶è—å¹¶ä¸éš¾å–å¾—è¯»è€…æŸç§ç¨‹åº¦ä¸Šçš„å…±æƒ…ï¼Œå› ä¸ºå®é™…ä¸Šå¾ˆå¤šäººéƒ½æ›¾ç»å°è¯•è¿‡åƒå¶è—è¿™æ ·æ€è€ƒã€‚åªæ˜¯ï¼Œæœ€åä¸ä¸€å®šä¼šé€‰æ‹©è¿™ä¹ˆæç«¯çš„æ–¹å¼ã€‚ä¸€éƒ¨æ–‡å­¦ä½œå“å¦‚æœèƒ½å¤Ÿå¼•èµ·å¹¿æ³›çš„äººçš„å…±æƒ…ï¼Œé‚£ä¹ˆå°±æ˜¯æœ‰ä»·å€¼çš„ã€‚åªæ˜¯ï¼Œæˆ‘è¿™è¾¹ä»»ç„¶å¸Œæœ›è¯»è€…çœ‹åˆ°è¿™éƒ¨ä½œå“ä»¥åï¼Œæ˜¯æœ‰â€œåˆ«äººä¹Ÿæœ‰åŒæ ·ç»å†ï¼Œèƒ½å¤Ÿç†è§£è‡ªå·±â€çš„æ²»æ„ˆï¼Œè€Œä¸è¦åœ¨è¿™ç§åŒæ¶çš„æƒ…ç»ªä¸­ç»§ç»­å‘å±•ã€‚å¶è—çº¤ç»†è€Œç½ªæ¶çš„çµé­‚ï¼Œå› ä¸ºä»–æœ¬èº«çš„è‡ªæˆ‘åçœå’Œç½ªæ¶æ„Ÿï¼Œè¿åŒä»–çš„è¯šå®å’Œä¸æ„¿æ„ä¼¤å®³ä»»ä½•äººçš„å‡ºå‘ç‚¹ï¼Œå…·æœ‰ä¸€ç§å€¼å¾—ç§°é¢‚çš„ä»·å€¼ï¼Œè¿™ä¹Ÿæ˜¯æœ€åè¯´â€œå¦‚åŒç¥ä¸€æ ·çš„å¥½å­©å­â€çš„åŸå› ã€‚æ— è®ºå¦‚ä½•ï¼Œäººçš„ç”Ÿå‘½å®è´µï¼Œåƒä¸‡è¦çæƒœã€‚äººæ€§ä¸ç¾å¥½ï¼Œå´æ­£æ˜¯æˆ‘ä»¬æ¯å¤©åŠªåŠ›çš„ä»·å€¼ï¼Œé»‘å¤œç»™äº†æˆ‘é»‘è‰²çš„çœ¼ç›ï¼Œæˆ‘å´ç”¨ä»–å»å¯»æ‰¾å…‰æ˜ã€‚â€ &emsp;&emsp;å¤§å¤šæ•°äººè¿é€‰æ‹©æç«¯æ–¹å¼çš„æƒåˆ©éƒ½æ²¡æœ‰ï¼Œç¢Œç¢Œç»ˆç”Ÿï¼Œæµ‘æµ‘å™©å™©ã€‚æˆ‘æœ‰æ•æ„Ÿçš„å†…å¿ƒï¼Œèƒ½å¤Ÿçœ‹åˆ°ç§ç§å‘åŠ£ï¼Œå´ä»¥â€œtoo lowâ€çš„æ–¹å¼åœ¨æ€ç»´å±‚é¢è—è§†ä¸€åˆ‡ï¼Œä»¿ä½›è‡ªå·±çœ‹é€ä¸–äº‹ï¼Œä¸äº‰ä¸æŠ¢ã€‚å´æ˜¯ä¸€ç§å¦¥åï¼Œæ›´å¦‚åŒé˜¿Qä¸€èˆ¬çš„æ‡¦å¼±ï¼ŒçœŸæ­£çš„å¦ç„¶åº”è¯¥å¦‚åŒé’»çŸ³ä¸€èˆ¬ç’€ç’¨ï¼Œè‡ªé¡¾ç‹¬è‡ªæ•£å‘å…‰è¾‰ï¼Œæ™¶è¹å‰”é€ï¼Œå´åšéŸ§ä¸æ‘§ã€‚ &emsp;&emsp;è¦æ˜¯æœ‰ä¸€é¢—ç¾å¥½çš„ç§å­è¢«é£å¹èµ·ï¼Œåº”è¯¥æ”¾ä»»ä»–éšé£é£˜è½ï¼Œé£å„¿åœä¸‹æ¥çš„åœ°æ–¹ä¾¿æ˜¯ä»–çš„å®¶ï¼Œä¸€å®šè¦é¥±å—é£å¹é›¨æ‰“ï¼Œé£è¶Šç‹‚ï¼Œæ ¹èŒè¶Šæ˜¯æ·±å…¥åœŸå£¤ï¼Œé›¨è¶Šå¤§ï¼Œæ ‘ææ›´åŠ è‹åŠ²æœ‰åŠ›ã€‚ å“ï¼ŒçœŸæ˜¯æ ‘æ¬²æ­¢è€Œé£ä¸å‡€é™ï¼ &emsp;&emsp;è¦æ˜¯ä¸€åªé¸Ÿï¼Œå«å¾—åƒé¸­å­ï¼Œæ¸¸å¾—åƒé¸­å­ï¼Œèµ°å¾—ä¹Ÿåƒé¸­å­ï¼Œé•¿ç€ç¾½æ¯›ä¹Ÿæœ‰è„šè¹¼ï¼Œè¿˜å’Œé¸­å­ä¸€èµ·ï¼Œé‚£å½“ç„¶ä¼šåˆ¤æ–­è¿™åªé¸Ÿå°±æ˜¯ä¸€åªé¸­å­ï¼Œå¯¹å—ï¼Ÿ &emsp;&emsp;äººæ€§ä¸ç¾å¥½ï¼Œå´æ­£æ˜¯æˆ‘ä»¬æ¯å¤©åŠªåŠ›çš„ä»·å€¼ï¼Œé»‘å¤œç»™äº†æˆ‘é»‘è‰²çš„çœ¼ç›ï¼Œæˆ‘å´ç”¨ä»–å»å¯»æ‰¾å…‰æ˜ã€‚","link":"/2019/01/27/%E7%94%9F%E8%80%8C%E4%B8%BA%E4%BA%BA%EF%BC%8C%E5%AF%B9%E4%B8%8D%E8%B5%B7/"},{"title":"ç”¨åå‡½æ•°å®ç°è´£ä»»é“¾æ¨¡å¼","text":"è´£ä»»é“¾æ¨¡å¼çš„ç›®çš„å°±æ˜¯é¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼Œå°†è¿™ä¸ªå¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚ å‡å¦‚ä½ é‡åˆ°è¿™æ ·çš„ä¸šåŠ¡éœ€æ±‚åœºæ™¯ï¼šå¸Œæœ›ä½¿å¾—å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†æŸç§ç±»å‹çš„è¯·æ±‚ï¼Œé‚£ä¹ˆå¯èƒ½å°±éœ€è¦è€ƒè™‘æ˜¯å¦å¯ä»¥é‡‡ç”¨è´£ä»»é“¾æ¨¡å¼ã€‚ å…¸å‹çš„ä¾‹å­å°±æ˜¯Servletä¸­çš„Filterå’ŒFilterChainæ¥å£ï¼Œå®ƒä»¬å°±é‡‡ç”¨äº†è´£ä»»é“¾æ¨¡å¼ã€‚åˆ©ç”¨è´£ä»»é“¾æ¨¡å¼æˆ‘ä»¬å¯ä»¥åœ¨æ¥æ”¶åˆ°ä¸€ä¸ªWebè¯·æ±‚æ—¶ï¼Œå…ˆè¿›è¡Œå„ç§filteré€»è¾‘çš„æ“ä½œï¼Œfilteréƒ½å¤„ç†å®Œä¹‹åæ‰æ‰§è¡Œservletã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸åŒçš„filterä»£è¡¨äº†ä¸åŒçš„èŒè´£ï¼Œæœ€ç»ˆå®ƒä»¬å½¢æˆäº†ä¸€ä¸ªè´£ä»»é“¾ã€‚ ç®€å•æ¥è¯´ï¼Œè´£ä»»é“¾æ¨¡å¼çš„ç›®çš„å°±æ˜¯é¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼Œå°†è¿™ä¸ªå¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚ ç°åœ¨ä¸¾ä¸€ä¸ªæ›´å…·ä½“çš„ğŸŒ°ã€‚è®¡ç®—æœºå­¦é™¢çš„å­¦ç”Ÿä¼šç®¡ç†äº†ä¸€ä¸ªå­¦ç”Ÿä¼šåŸºé‡‘ï¼Œç”¨äºå„ç§æ´»åŠ¨å’Œç»„ç»‡äººå‘˜å·¥ä½œçš„å¼€æ”¯ã€‚å½“è¦å‘ç”Ÿä¸€ç¬”æ”¯å‡ºæ—¶ï¼Œå¦‚æœé‡‘é¢åœ¨100å…ƒä¹‹å†…ï¼Œå¯ç”±å„ä¸ªåˆ†éƒ¨é•¿å®¡æ‰¹ï¼›å¦‚æœé‡‘é¢è¶…è¿‡äº†100å…ƒï¼Œé‚£ä¹ˆå°±éœ€è¦ä¼šé•¿åŒæ„ï¼›ä½†å‡ä½¿é‡‘é¢è¾ƒå¤§ï¼Œè¾¾åˆ°äº†500å…ƒä»¥ä¸Šï¼Œé‚£ä¹ˆå°±éœ€è¦å­¦é™¢çš„è¾…å¯¼å‘˜é™ˆè€å¸ˆæ‰¹å‡†ã€‚æ­¤å¤–ï¼Œå­¦é™¢é‡Œè¿˜æœ‰ä¸€ä¸ªä¸å®£çš„è§„å®šï¼Œç»è´¹çš„ä¸Šé™ä¸º1000å…ƒï¼Œå¦‚æœè¶…å‡ºåˆ™é»˜è®¤æ‰“å›ç”³è¯·ã€‚ å½“ç„¶æˆ‘ä»¬å¯ä»¥ç”¨æœ€ç®€å•çš„if-elseæ¥å®ç°ç»è´¹å®¡æ‰¹çš„éœ€æ±‚ã€‚ç„¶è€Œæ ¹æ®å¼€é—­åŸåˆ™ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶ä¸­çš„é€»è¾‘è¿›è¡Œè§£è€¦ã€‚ä¸‹é¢æˆ‘ä»¬å°±ç”¨é¢å‘å¯¹è±¡çš„æ€è·¯ç»“åˆè´£ä»»é“¾æ¨¡å¼ï¼Œæ¥è®¾è®¡ä¸€ä¸ªç¨‹åºã€‚ data class ApplyEvent(val monkey: Int, val title: String) interface ApplyHandler { val successor: ApplyHandler? fun handleEvent(event: ApplyEvent) } class GroupLeader(override val successor: ApplyHandler?): ApplyHandler { override fun handleEvent(event: ApplyEvent) { when { event.monkey &lt;= 100 -&gt; print(&quot;Group Leader handled application: ${event.title}&quot;) else -&gt; when(successor) { is ApplyHandler -&gt; successor.handleEvent(event) else -&gt; print(&quot;Group Leader: This application cannot be handdle&quot;) } } } } class President(override val successor: ApplyHandler?) :ApplyHandler { override fun handleEvent(event: ApplyEvent) { when { event.monkey &lt;= 500 -&gt; print(&quot;President handled application: ${event.title}&quot;) else -&gt; when(successor) { is ApplyHandler -&gt; successor.handleEvent(event) else -&gt; print(&quot;President: This application cannot be handdle.&quot;) } } } } class College(override val successor: ApplyHandler?) :ApplyHandler { override fun handleEvent(event: ApplyEvent) { when { event.monkey &gt; 1000 -&gt; print(&quot;College: This application is refused.&quot;) else -&gt; print(&quot;College handled application: ${event.title}.&quot;) } } } æˆ‘ä»¬å£°æ˜äº†GroupLeader,President,Collegeä¸‰ä¸ªç±»æ¥ä»£è¡¨å­¦ç”Ÿä¼šéƒ¨é•¿ï¼Œåˆ†ä¼šé•¿ï¼Œä¼šé•¿åŠå­¦é™¢ï¼Œå®ƒä»¬éƒ½å®ç°äº†ApplyHandleræ¥å£ã€‚æ¥å£åŒ…å«äº†ä¸€ä¸ªå¯ç©ºçš„åç»§è€…å¯¹è±¡successorï¼Œä»¥åŠå¯¹ç”³è¯·äº‹ä»¶çš„å¤„ç†æ–¹æ³•handleEventã€‚ å½“æˆ‘ä»¬æŠŠä¸€ä¸ªç”³è¯·ç»è´¹çš„äº‹ä»¶ä¼ é€’ç»™GroupLeaderå¯¹è±¡è¿›è¡Œå¤„ç†æ—¶ï¼Œå®ƒä¼šæ ¹æ®å…·ä½“çš„ç»è´¹é‡‘é¢æ¥åˆ¤æ–­é‡‘é¢æ¥åˆ¤æ–­æ˜¯å¦å°†ç”³è¯·è½¬äº¤ç»™successorå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯Presidentç±»æ¥å¤„ç†ã€‚ä»¥æ­¤ç±»æ¨ï¼Œæœ€ç»ˆå½¢æˆäº†ä¸€ä¸ªè´£ä»»é“¾æœºåˆ¶ï¼š st=&gt;start: ç»è´¹ç”³è¯· op1=&gt;operation: å­¦ç”Ÿéƒ¨é•¿ op2=&gt;operation: åˆ†ä¼šé•¿ op3=&gt;operation: ä¼šé•¿ op4=&gt;operation: å­¦é™¢ cond1=&gt;condition: æ˜¯å¦å°äº100å…ƒ cond2=&gt;condition: æ˜¯å¦å°äº500å…ƒ cond3=&gt;condition: æ˜¯å¦å°äº1000å…ƒ e1=&gt;end: ç”³è¯·æˆåŠŸ e2=&gt;end: ç”³è¯·å¤±è´¥ st-&gt;cond1 cond1(yes)-&gt;op1-&gt;e1 cond1(no)-&gt;cond2 cond2(yes)-&gt;op2-&gt;e1 cond2(no)-&gt;cond3 cond3(yes)-&gt;op3-&gt;e1 cond3(no)-&gt;e2 fun main(args: Array&lt;String&gt;) { val College = College(null) val president = President(college) val groupLeader = GroupLeader(president) groupLeader.handleEvent(ApplyEvent(10,&quot;buy a pen&quot;)) groupLeader.handleEvent(ApplyEvent(200,&quot;team building&quot;)) groupLeader.handleEvent(ApplyEvent(600,&quot;hold a debate match&quot;)) groupLeader.handleEvent(ApplyEvent(1200,&quot;annual meeting of the college&quot;)) } //result Group Leader handled application: buy a pen. President handled application: team building. College handled applicatioon: hold a debate match. College: This application is refused. æ¢³ç†ä¸€ä¸‹è´£ä»»é“¾çš„æœºåˆ¶ï¼Œæ•´ä¸ªé“¾æ¡çš„æ¯ä¸ªå¤„ç†ç¯èŠ‚éƒ½æœ‰å¯¹å…¶è¾“å…¥å‚æ•°çš„æ•ˆéªŒæ ‡å‡†ï¼Œå½“è¾“å…¥å‚æ•°å¤„äºæŸä¸ªè´£ä»»é“¾ç¯èŠ‚çš„æœ‰æ•ˆæ¥æ”¶èŒƒå›´ä¹‹å†…ï¼Œè¯¥ç¯èŠ‚æ‰èƒ½å¯¹å…¶ä½œå‡ºæ­£å¸¸çš„å¤„ç†æ“ä½œã€‚åœ¨ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªä¸“é—¨çš„æœ¯è¯­æ¥æè¿°è¿™ç§æƒ…å†µï¼Œè¿™å°±æ˜¯â€œåå‡½æ•°â€ã€‚ å®ç°åå‡½æ•°ç±»å‹ï¼šPartialFunctioné‚£ï¼Œä»€ä¹ˆæ˜¯åå‡½æ•°å‘¢ï¼Ÿ åå‡½æ•°æ˜¯æ•°å­¦ä¸­çš„æ¦‚å¿µï¼ŒæŒ‡çš„æ˜¯å®šä¹‰åŸŸXä¸­å¯èƒ½å­˜åœ¨æŸäº›å€¼åœ¨å€¼åŸŸYä¸­æ²¡æœ‰å¯¹åº”çš„å€¼ã€‚ ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠåå‡½æ•°ä¸æ™®é€šå‡½æ•°è¿›è¡Œæ¯”è¾ƒã€‚åœ¨ä¸€ä¸ªæ™®é€šå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç»™æŒ‡å®šç±»å‹çš„å‚æ•°ä¼ å…¥ä»»æ„è¯¥ç±»å‹çš„å€¼ï¼Œæ¯”å¦‚(Int)-&gt;Unitï¼Œå¯ä»¥æ¥æ”¶ä»»ä½•Intå€¼ã€‚è€Œåœ¨ä¸€ä¸ªåå‡½æ•°ä¸­ï¼ŒæŒ‡å®šç±»å‹çš„å‚æ•°å¹¶ä¸æ¥æ”¶ä»»æ„è¯¥ç±»å‹çš„å€¼ï¼Œæ¯”å¦‚ï¼š fun mustGreaterThan5(x: Int): Boolean { if (x &gt; 5) { return true } throw Exception(&quot;x must be greator than 5&quot;) } &gt;&gt;&gt; mustGreatorThan5(6) true &gt;&gt;&gt; mustGreatorThan5(1) java.lang.Exception: x must be greatoor than 5 at Line17.mustGreatorThan5(Unknow Source) ä¹‹æ‰€ä»¥æé«˜åå‡½æ•°æ˜¯å› ä¸ºåœ¨ä¸€äº›å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå¦‚Scalaï¼Œæœ‰ä¸€ç§PartialFunctionç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥ç®€åŒ–è´£ä»»é“¾æ¨¡å¼çš„å®ç°ã€‚ç”±äºKotlinçš„è¯­è¨€ç‰¹æ€§è¶³å¤Ÿçµæ´»å¼ºå¤§ï¼Œè™½ç„¶å®ƒçš„æ ‡å‡†åº“æ²¡æœ‰æ”¯æŒPartialFunctionï¼Œç„¶è€Œä¸€äº›å¼€æºåº“ï¼ˆå¦‚Arrowï¼‰å·²ç»å®ç°äº†è¿™ä¸ªåŠŸèƒ½ã€‚æˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªPartialFunctionç±»å‹ï¼š class PartialFunction&lt;in P1, out R&gt; ( private val definetAt: (P1) -&gt; Boolean, private val f: (P1) -&gt; R ) : (P1) -&gt; R { override fun invoke(p1: P1): R { if (definetAt(p1)) { return f(p1) } throw IllegalArgumentException(&quot;Value: ($p1) isn't supported by this function&quot;) } fun isDefinetAt(p1: P1) = definetAt(p1) } ç°åœ¨æ¥åˆ†æä¸‹PartialFunctionç±»çš„å…·ä½“ä½œç”¨ï¼š å£°æ˜ç±»å¯¹è±¡æ—¶éœ€è¦æ¥æ”¶ä¸¤ä¸ªæ„é€ å‚æ•°ï¼ŒdefinetAtä¸ºæ•ˆéªŒå‡½æ•°ï¼Œfä¸ºå¤„ç†å‡½æ•° å½“PartialFunctionç±»å¯¹è±¡æ‰§è¡Œinvokeæ–¹æ³•æ—¶ï¼ŒdefinetAtä¼šå¯¹è¾“å‡ºå‚æ•°p1è¿›è¡Œæœ‰æ•ˆæ€§æ•ˆéªŒ å¦‚æœæ•ˆéªŒç»“æœé€šè¿‡ï¼Œåˆ™æ‰§è¡Œfå‡½æ•°ï¼ŒåŒæ—¶å°†p1ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒï¼Œåä¹‹æŠ›å‡ºå¼‚å¸¸ å¦‚ä¸ŠPartialFunctionç±»å·²ç»å¯ä»¥å¤„ç†è´£ä»»é“¾æ¨¡å¼ä¸­å„ä¸ªç¯èŠ‚å¯¹äºè¾“å…¥çš„æ•ˆéªŒåŠå¤„ç†é€»è¾‘çš„é—®é¢˜ï¼Œä½†æ˜¯ä¾æ—§æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¦‚ä½•å°†è¯·æ±‚åœ¨æ•´ä¸ªé“¾æ¡ä¸­è¿›è¡Œä¼ é€’ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬åˆ©ç”¨Kotlinçš„æ‰©å±•å‡½æ•°ç»™PartialFunctionç±»å¢åŠ ä¸€ä¸ªorElseæ–¹æ³•ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ³¨æ„ä¸‹è¿™ä¸ªç±»ä¸­çš„isDefinedAtæ–¹æ³•ï¼Œå®ƒå…¶å®å¹¶æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šä¹‹å¤„ï¼Œä»…ä»…åªæ˜¯ä½œä¸ºæ‹·è´definetAtçš„ä¸€ä¸ªå†…éƒ¨æ–¹æ³•ï¼Œä¸ºäº†åœ¨orElseæ–¹æ³•ä¸­èƒ½å¤Ÿè¢«è°ƒç”¨ã€‚ infix fun &lt;P1, R&gt; PartialFunction&lt;P1, R&gt;.orElse(that: PartialFunction&lt;P1, R&gt;): PartialFunction&lt;P1, R&gt; { return PartialFunction({ this.isDefinedAt(it) || that.isDefinedAt(it) }) { when { this.isDefinedAt(it) -&gt; this(it) else -&gt; that(it) } } } åœ¨orElseæ–¹æ³•ä¸­å¯ä»¥ä¼ å…¥å¦ä¸€ä¸ªPartialFunctionç±»å¯¹è±¡thatï¼Œå®ƒä¹Ÿå°±æ˜¯è´£ä»»é“¾æ¨¡å¼ä¸­çš„åç»§è€…ã€‚å½“isDefinedAtæ–¹æ³•æ‰§è¡Œç»“æœä¸ºfalseçš„æ—¶å€™ï¼Œé‚£ä¹ˆå°±è°ƒç”¨thatå¯¹è±¡æ¥å¤„ç†ç”³è¯·ã€‚ è¿™é‡Œç”¨infixå…³é”®å­—æ¥è®©orElseæˆä¸ºä¸€ä¸ªä¸­è¾å‡½æ•°ï¼Œä»è€Œè®©é“¾å¼è°ƒç”¨å˜å¾—æ›´åŠ ç›´è§‚ã€‚ ç”¨orElseæ„å»ºè´£ä»»é“¾æ¥ä¸‹æ¥æˆ‘ä»¬å°±ç”¨è®¾è®¡å¥½çš„PartialFunctionç±»åŠæ‰©å±•çš„orElseæ–¹æ³•ï¼Œæ¥é‡æ–°å®ç°ä»¥ä¸‹æœ€å¼€å§‹çš„ä¾‹å­ã€‚é¦–å…ˆæ¥çœ‹çœ‹å¦‚ä½•ç”¨PartialFunctionå®šä¹‰groupLeaderå¯¹è±¡ï¼š data class ApplyEvent(val money: Int, val title: String) val groupLeader = { val definetAt: (ApplyEvent) -&gt; Boolean = { it.money &lt;= 200 } val handler: (ApplyEvent) -&gt; Unit = { println(&quot;Group Leader handled application: ${it.title}.&quot;) } PartialFunction(definetAt, handler) }() è¿™é‡Œæˆ‘ä»¬å€ŸåŠ©äº†è‡ªè¿è¡ŒLambdaçš„è¯­æ³•æ¥æ„å»ºä¸€ä¸ªPartialFunctionçš„å¯¹è±¡groupLeaderã€‚definetAtç”¨äºæ•ˆéªŒç”³è¯·çš„ç»è´¹é‡‘é¢æ˜¯å¦åœ¨å­¦ç”Ÿä¼šéƒ¨é•¿å¯å®¡æ‰¹çš„èŒƒå›´ä¹‹å†…ï¼Œhandlerå‡½æ•°ç”¨æ¥å¤„ç†ç«¥å¹´å„å›½é‡‘é¢æ•ˆéªŒåçš„å®¡æ‰¹æ“ä½œã€‚ åŒç†ï¼Œæˆ‘ä»¬ç”¨ç±»ä¼¼çš„æ–¹æ³•å†å®šä¹‰å‰©ä¸‹çš„presidentå’Œcollegeå¯¹è±¡ï¼š val president = { val definetAt: (ApplyEvent) -&gt; Boolean = { it.money &lt;= 500 } val handler: (ApplyEvent) -&gt; Unit = { println(&quot;President handled application: ${it.title}.&quot;) } PartialFunction(definetAt, handler) }() val college = { val definetAt: (ApplyEvent) -&gt; Boolean = { true } val handler: (ApplyEvent) -&gt; Unit = { when { it.money &gt; 1000 -&gt; println(&quot;College: This application is refused.&quot;) else -&gt; println(&quot;College handled application: ${it.title}.&quot;) } } PartialFunction(definetAt,handler) } æœ€åæˆ‘ä»¬ç”¨orElseæ¥æ„å»ºä¸€ä¸ªåŸºäºè´£ä»»é“¾æ¨¡å¼å’ŒPartialFunctionç±»å‹çš„ä¸­è¾è¡¨è¾¾å¼applyChain: val applyChain = groupLeader orElse president orElse college &gt;&gt;&gt; applyChain(ApplyEvent(600,&quot;hold a debate match&quot;)) College handled application: hold a debate match å€ŸåŠ©PartialFunctionç±»çš„å°è£…ï¼Œæˆ‘ä»¬ä¸ä»…å¤§å¹…åº¦å‡å°‘äº†ç¨‹åºçš„ä»£ç é‡ï¼Œè€Œä¸”åœ¨æ„å»ºè´£ä»»é“¾æ—¶ï¼Œå¯ä»¥ç”¨orElseè·å¾—æ›´å¥½çš„è¯­æ³•è¡¨è¾¾ã€‚","link":"/2020/01/19/%E7%94%A8%E5%81%8F%E5%87%BD%E6%95%B0%E5%AE%9E%E7%8E%B0%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/"},{"title":"è½¯é”®ç›˜ç›¸å…³","text":"Androidè½¯é”®ç›˜ç›¸å…³å¤„ç† é¡¹ç›®ä¸­æœ‰ç±»ä¼¼é™Œé™Œè¾“å…¥æ¡†çš„UIï¼Œå› ä¸ºEdittextä¸åœ¨è¾“å…¥æ¡†åº•éƒ¨ï¼Œå¯¼è‡´è½¯é”®ç›˜å¼¹å‡ºæ—¶æ˜¾ç¤ºåœ¨Edittextåº•éƒ¨è€Œé®æŒ¡æ‰è¾“å…¥æ¡†éƒ¨åˆ†UIï¼Œç›®å‰é‡‡ç”¨çš„æ–¹æ³•æ˜¯å¯¹Viewtreeè¿›è¡Œç›‘å¬ï¼Œè½¯é”®ç›˜å¼¹èµ·æ¥æ—¶ï¼Œè¿›è¡ŒscrollToç§»åŠ¨è¾“å…¥æ¡† private void configureViewTreeObserver(View root, View scrollToView) { root.getViewTreeObserver().addOnGlobalLayoutListener(() -&gt; { Rect rect = new Rect(); //è·å–åˆ°ç•Œé¢å¯è§åŒºåŸŸçš„çŸ©å½¢ root.getWindowVisibleDisplayFrame(rect); //æ ¹å¸ƒå±€é«˜åº¦ - å¯è§åŒºåŸŸé«˜åº¦ = è½¯é”®ç›˜é«˜åº¦ int keyboardHeight = root.getRootView().getHeight() - rect.bottom; if (keyboardHeight &gt; 100) { //å¦‚æœåƒç´ æ•°å¤§äº100æå¤§å¯èƒ½æ˜¯è½¯é”®ç›˜å¼¹å‡º mIsKeyboardOpened = true; //å¤„ç†Edittextä¸åœ¨è¾“å…¥æ¡†åº•éƒ¨çš„æƒ…å†µ int[] location = new int[2]; scrollToView.getLocationInWindow(location); //è¾“å…¥æ¡†åœ¨ç•Œé¢ä¸ŠYè½´åæ ‡ + è¾“å…¥æ¡†é«˜åº¦ - å¯è§åŒºåŸŸåº•éƒ¨ root.scrollTo(0, location[1] + scrollToView.getHeight() - rect.bottom); } else { //è½¯é”®ç›˜æ”¶èµ· root.scrollTo(0, 0); if (mIsKeyboardOpened) { mIsKeyboardOpened = false; DanmakuInputDialog.this.dismiss(); } } }); } ##android:windowSoftInputModeå±æ€§è¾“å…¥æ¡†ä»¥DialogFragmentçš„æ–¹å¼è¿›è¡Œè§†å›¾å åŠ å®ç°ï¼Œæ²¡æœ‰ç”¨åˆ°windowSoftInputModeå±æ€§ï¼Œä¸è¿‡è¿™é‡Œä¹Ÿæ€»ç»“ä¸€ä¸‹ &lt;activity android:windowSoftInputMode=&quot;stateVisible|adjustResize&quot;. . . &gt; activityä¸»çª—å£ä¸è½¯é”®ç›˜çš„äº¤äº’æ¨¡å¼ï¼Œå¯ä»¥ç”¨æ¥é¿å…è¾“å…¥æ³•é¢æ¿é®æŒ¡é—®é¢˜ï¼ŒAndroid1.5åçš„ä¸€ä¸ªæ–°ç‰¹æ€§ã€‚è¿™ä¸ªå±æ€§èƒ½å½±å“ä¸¤ä»¶äº‹æƒ…ï¼š å½“æœ‰ç„¦ç‚¹äº§ç”Ÿæ—¶ï¼Œè½¯é”®ç›˜æ˜¯éšè—è¿˜æ˜¯æ˜¾ç¤º æ˜¯å¦å‡å°‘æ´»åŠ¨ä¸»çª—å£å¤§å°ä»¥ä¾¿è…¾å‡ºç©ºé—´æ”¾è½¯é”®ç›˜ å„å€¼å¦‚ä¸‹ï¼š stateUnspecifiedï¼šè½¯é”®ç›˜çš„çŠ¶æ€å¹¶æ²¡æœ‰æŒ‡å®šï¼Œç³»ç»Ÿå°†é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„çŠ¶æ€æˆ–ä¾èµ–äºä¸»é¢˜çš„è®¾ç½® stateUnchangedï¼šå½“è¿™ä¸ªactivityå‡ºç°æ—¶ï¼Œè½¯é”®ç›˜å°†ä¸€ç›´ä¿æŒåœ¨ä¸Šä¸€ä¸ªactivityé‡Œçš„çŠ¶æ€ï¼Œæ— è®ºæ˜¯éšè—è¿˜æ˜¯æ˜¾ç¤º stateHiddenï¼šç”¨æˆ·é€‰æ‹©activityæ—¶ï¼Œè½¯é”®ç›˜æ€»æ˜¯è¢«éšè— stateAlwaysHiddenï¼šå½“è¯¥Activityä¸»çª—å£è·å–ç„¦ç‚¹æ—¶ï¼Œè½¯é”®ç›˜ä¹Ÿæ€»æ˜¯è¢«éšè—çš„ stateVisibleï¼šè½¯é”®ç›˜é€šå¸¸æ˜¯å¯è§çš„ stateAlwaysVisibleï¼šç”¨æˆ·é€‰æ‹©activityæ—¶ï¼Œè½¯é”®ç›˜æ€»æ˜¯æ˜¾ç¤ºçš„çŠ¶æ€ adjustUnspecifiedï¼šé»˜è®¤è®¾ç½®ï¼Œé€šå¸¸ç”±ç³»ç»Ÿè‡ªè¡Œå†³å®šæ˜¯éšè—è¿˜æ˜¯æ˜¾ç¤º adjustResizeï¼šè¯¥Activityæ€»æ˜¯è°ƒæ•´å±å¹•çš„å¤§å°ä»¥ä¾¿ç•™å‡ºè½¯é”®ç›˜çš„ç©ºé—´ adjustPanï¼šå½“å‰çª—å£çš„å†…å®¹å°†è‡ªåŠ¨ç§»åŠ¨ä»¥ä¾¿å½“å‰ç„¦ç‚¹ä»ä¸è¢«é”®ç›˜è¦†ç›–å’Œç”¨æˆ·èƒ½æ€»æ˜¯çœ‹åˆ°è¾“å…¥å†…å®¹çš„éƒ¨åˆ† ##android:imeOptinoså±æ€§Androidåœ¨æ¨ªå±æ—¶å”¤èµ·è½¯é”®ç›˜ä¼šé»˜è®¤å…¨å±å±•ç¤ºï¼Œå½“ä½¿ç”¨imeOptionsæ—¶å¯ä»¥è§£å†³é—®é¢˜ã€‚ &lt;Edittext android:imeOptions=&quot;flagNoExtractUi&quot;&gt; android:imeOptions=â€flagNoExtractUiâ€ //ä½¿è½¯é”®ç›˜ä¸å…¨å±æ˜¾ç¤ºï¼Œåªå ç”¨ä¸€éƒ¨åˆ†å±å¹• åŒæ—¶,è¿™ä¸ªå±æ€§è¿˜èƒ½æ§ä»¶è½¯é”®ç›˜å³ä¸‹è§’æŒ‰é”®çš„æ˜¾ç¤ºå†…å®¹,é»˜è®¤æƒ…å†µä¸‹ä¸ºå›è½¦é”® android:imeOptions=â€actionNoneâ€ //è¾“å…¥æ¡†å³ä¾§ä¸å¸¦ä»»ä½•æç¤º android:imeOptions=â€actionGoâ€ //å³ä¸‹è§’æŒ‰é”®å†…å®¹ä¸ºâ€™å¼€å§‹â€™ android:imeOptions=â€actionSearchâ€ //å³ä¸‹è§’æŒ‰é”®ä¸ºæ”¾å¤§é•œå›¾ç‰‡ï¼Œæœç´¢ android:imeOptions=â€actionSendâ€ //å³ä¸‹è§’æŒ‰é”®å†…å®¹ä¸ºâ€™å‘é€â€™ android:imeOptions=â€actionNextâ€ //å³ä¸‹è§’æŒ‰é”®å†…å®¹ä¸ºâ€™ä¸‹ä¸€æ­¥â€™ android:imeOptions=â€actionDoneâ€ //å³ä¸‹è§’æŒ‰é”®å†…å®¹ä¸ºâ€™å®Œæˆâ€™","link":"/2018/12/03/%E8%BD%AF%E9%94%AE%E7%9B%98%E7%9B%B8%E5%85%B3/"},{"title":"è¿ç®—ç¬¦é‡è½½å’Œè¿­ä»£å™¨æ¨¡å¼","text":"æ‰€è°“è¿­ä»£å™¨ï¼Œå®ƒçš„æ ¸å¿ƒä½œç”¨å°±æ˜¯å°†éå†å’Œå®ç°åˆ†ç¦»å¼€æ¥ï¼Œåœ¨éå†çš„åŒæ—¶ä¸éœ€è¦æš´éœ²å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚ è¿­ä»£å™¨ï¼ˆiteratorï¼‰æ˜¯Javaä¸­æˆ‘ä»¬éå¸¸ç†Ÿæ‚‰çš„ä¸œè¥¿äº†ï¼Œæ•°æ®ç»“æ„å¦‚Listå’ŒSetéƒ½å†…ç½®äº†è¿­ä»£å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæä¾›çš„æ–¹æ³•æ¥é¡ºåºåœ°è®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­æ¯ä¸ªå…ƒç´ ã€‚ æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå®šä¹‰æŸäº›å®¹å™¨ç±»ï¼Œè¿™äº›ç±»ä¸­åŒ…å«äº†å¤§é‡ç›¸åŒç±»å‹çš„å¯¹è±¡ã€‚å¦‚æœä½ æƒ³ç»™è¿™ä¸ªå®¹å™¨ç±»çš„å¯¹è±¡ç›´æ¥æä¾›è¿­ä»£çš„æ–¹æ³•ï¼Œå¦‚hasNext,next,firstç­‰ï¼Œé‚£ä¹ˆå°±å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªè¿­ä»£å™¨ã€‚ç„¶è€Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦è‡ªå·±å†å®ç°ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå› ä¸ºJavaæ ‡å‡†åº“æä¾›äº†java.util.Iteratoræ¥å£ï¼Œä½ å¯ä»¥ç”¨å®¹å™¨ç±»å®ç°è¯¥æ¥å£ï¼Œç„¶åå†å®ç°éœ€è¦çš„è¿­ä»£å™¨æ–¹æ³•ã€‚ è¿™ç§è®¾è®¡æ¨¡å¼å°±æ˜¯è¿­ä»£å™¨æ¨¡å¼ï¼Œå®ƒçš„æ ¸å¿ƒä½œç”¨å°±æ˜¯å°†éå†å’Œå®ç°åˆ†ç¦»å¼€æ¥ï¼Œåœ¨éå†çš„åŒæ—¶ä¸éœ€è¦æš´éœ²å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚è¿­ä»£å™¨æ¨¡å¼éå¸¸å®¹æ˜“ç†è§£ï¼Œä½ å¯èƒ½å·²ç»éå¸¸ç†Ÿæ‚‰ã€‚ä½†æˆ‘ä»¬è¿˜æ˜¯ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­æ¥ä»‹ç»ä¸‹è¿™ç§æ¨¡å¼ï¼Œæ¥ç€å¼•å‡ºKotlinä¸­ç›¸å…³çš„è¯­æ³•ç‰¹æ€§ï¼Œç»§è€Œè¿›è¡Œæ”¹è‰¯ã€‚ æ–¹æ¡ˆ1ï¼šå®ç°Iteratoræ¥å£data class Book(val name: String) class Bookcase(val books: list&lt;Book&gt;): Iterator&lt;Book&gt; { private val iterator: Iterator&lt;Book&gt; init { this.iterator = books.iterator() } override fun hasNext() = this.iterator.hasNext() override fun next() = this.iterator.next() } //invoke val bookcase = Bookcase(listOf(Book(&quot;Dive into Kotlin&quot;),Book(&quot;Thinking in Java&quot;))) while(bookcase.hasNext()) { println(&quot;The book is ${bookcase.next().name}&quot;) } The book name is Dive into Kotlin The book name is Thinking in Java ç”±äºBookcaseå¯¹è±¡æ‹¥æœ‰ä¸Listå®ä¾‹ç›¸åŒçš„è¿­ä»£å™¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è°ƒç”¨åè€…è¿­ä»£å™¨æ‰€æœ‰çš„æ–¹æ³•ã€‚ä¸€ç§æ›´ç®€æ´çš„éå†æ‰“å°æ–¹å¼å¦‚ä¸‹ï¼š for(book in bookcase) { println(&quot;The book name is ${book.name}&quot;) } æ–¹æ¡ˆ2ï¼šé‡è½½iteratoræ–¹æ³•Kotlinå´æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚Kotlinæœ‰ä¸€ä¸ªéå¸¸å¼ºå¤§çš„è¯­è¨€ç‰¹æ€§ï¼Œé‚£å°±æ˜¯åˆ©ç”¨operatorå…³é”®å­—å†…ç½®äº†å¾ˆå¤šè¿ç®—ç¬¦é‡è½½åŠŸèƒ½ã€‚æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡é‡è½½Bookcaseç±»çš„iteratoræ–¹æ³•ï¼Œå®ç°ä¸€ç§è¯­æ³•ä¸Šæ›´åŠ ç²¾ç®€çš„ç‰ˆæœ¬ï¼š data class Book(val name: String) class Bookcase(val books:List&lt;Book&gt;) { operator fun iterator(): Iterator&lt;Book&gt; = this.books.iterator() } è¿™æ ·æˆ‘ä»¬ç”¨ä¸€è¡Œä»£ç å°±å®ç°äº†ä»¥ä¸Šæ‰€æœ‰æ•ˆæœã€‚ç”±äºKotlinæ”¯æŒæ‰©å±•å‡½æ•°ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ç»™æ‰€æœ‰çš„å¯¹è±¡éƒ½å†…ç½®ä¸€ä¸ªè¿­ä»£å™¨ã€‚ æ–¹æ¡ˆ3ï¼šé€šè¿‡æ‰©å±•å‡½æ•°å‡è®¾ç°åœ¨çš„Bookæ˜¯å¼•å…¥çš„ä¸€ä¸ªç±»ï¼Œä½ å¹¶ä¸èƒ½ä¿®æ”¹å®ƒçš„æºç ï¼Œé‚£ä¹ˆå¦‚ä½•ç”¨æ‰©å±•çš„è¯­æ³•æ¥ç»™Bookcaseç±»å¯¹è±¡å¢åŠ è¿­ä»£çš„åŠŸèƒ½ï¼š data class Book(val name: String) {} class Bookcase(val Books: list&lt;Book&gt;) {} operator fun Bookcase.iterator(): Iterator&lt;Book&gt; = books.iterator() ä»£ç ä¾æ—§éå¸¸ç®€æ´ï¼Œå‡å¦‚æƒ³å¯¹è¿­ä»£å™¨çš„é€»è¾‘æœ‰æ›´å¤šçš„æ§åˆ¶æƒï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥é€šè¿‡objectè¡¨è¾¾å¼æ¥å®ç°ï¼š operator fun Bookcase.iterator():Iterator&lt;Book&gt; = object: Iterator&lt;Book&gt; { val iterator = books.iterator() override fun hasNext() = iterator.hasNext() override fun next() = iterator.next() } æ€»çš„æ¥è¯´ï¼Œè¿­ä»£å™¨æ¨¡å¼å¹¶ä¸æ˜¯ä¸€ç§å¾ˆå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œä½†é€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥äº†è§£Kotlinä¸­çš„æ‰©å±•å‡½æ•°çš„åº”ç”¨ï¼Œä»¥åŠè¿ç®—ç¬¦é‡è½½åŠŸèƒ½çš„å¼ºå¤§ä¹‹å¤„ã€‚","link":"/2020/01/19/%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD%E5%92%8C%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/"},{"title":"githubè®¿é—®åŠcloneè¿‡æ…¢é—®é¢˜","text":"å¢™ç›¸å…³ å‰è¨€Githubæ˜¯å¼€æºä¸–ç•Œçš„ä¸€æ‰‡å¤§é—¨ï¼Œä¼Ÿå¤§çš„å¢™å¯¹GitHubç½‘å¼€ä¸€é¢ï¼Œæ²¡æœ‰åƒå¯¹Googleé‚£æ ·ç›´æ¥æ–©å°½æ€ç»ï¼Œä½†æ˜¯å¯¹å®ƒåšäº†ä¸¥æ ¼çš„é™é€Ÿã€‚git cloneï¼ˆæœ‰äº›åœ°åŒºè¾ƒå¿«ï¼Œæœ‰äº›åœ°åŒºè¾ƒæ…¢ï¼‰ï¼›ä½†æ€»ä½“æ¥è¯´,åŸºæœ¬éƒ½åœ¨10KiB/s-40KiB/sä¹‹é—´ã€‚åœ¨æ‹‰å–Flutteræºç æ—¶å‡ºç°5-9KiB/sçš„æƒ…å†µï¼Œæ‰€ä»¥æœ‰äº†è¿™ç¯‡æ–‡ç«  ä¿®æ”¹ç«¯å£ é¦–å…ˆéœ€è¦æ‰“å¼€ShadowSocksï¼Œæˆ‘ä¸ä¼šé…ç½®å…¨å±€æ¨¡å¼ï¼Œä¸€æ˜¯æ¯æœˆæµé‡é—®é¢˜ï¼ŒäºŒæ˜¯è®¿é—®ä¸€äº›å›½å†…ç½‘ç«™åè€Œä¼šæ…¢ï¼Œæ‰€ä»¥å¯¹äºPACè‡ªåŠ¨æ¨¡å¼æ¥è¯´å¯ä»¥å¦‚ä¸‹é…ç½® git config --global http.https://github.com.proxy https://127.0.0.1:xxxx git config --global https.https://github.com.proxy https://127.0.0.1:xxxx å…¶ä¸­ç«¯å£å·ï¼Œå¯ä»¥åœ¨ShadowSocksä¸ŠæŸ¥æ‰¾socks5ç«¯å£ï¼Œç„¶åå°±äº«å—40M/sçš„ç•…å¿«å§ã€‚ æŒ‡å®šIPå¦‚æœä¿®æ”¹ç«¯å£çš„æ–¹æ³•ä¹Ÿæ— æµäºäº‹ï¼Œè¿˜å¯ä»¥é€šè¿‡æŒ‡å®šhostçš„æ–¹å¼ï¼ŒæŒ‡å®šæœ€è¿‘dnsæœåŠ¡å•†ä»¥è¾¾åˆ°å¿«é€Ÿçš„æ•ˆæœã€‚ DNSå·¥ä½œæ–¹å¼å½“æˆ‘ä»¬è®¿é—®github.comæ—¶ï¼Œæµè§ˆå™¨å¹¶ä¸çŸ¥é“è¿™ä¸ªåŸŸåå¯¹åº”çš„çœŸå®ipåœ°å€ï¼Œæœ€å…ˆå›å»è¯¢é—®æœ¬åœ°dnsç¼“å­˜ï¼Œæ˜¯å¦è®¤è¯†è¿™ä¸ªåŸŸåçš„é—¨ç‰Œå·ï¼Œå¦‚æœä¸è®¤è¯†æ¥ç€å¾€ä¸Šé—®ï¼Œå½“åœ°è¿è¡Œå•†ä¹Ÿä¸è®¤è¯†è¿™ä¸ªåŸŸåçš„è¯ï¼Œç»§ç»­é—®ä¸Šçº§ï¼ŒçŸ¥é“é—®å‡ºæ¥github.comçš„é—¨ç‰Œå·ä¸ºæ­¢ï¼è¿™ä¸ªé—®è·¯è¿‡ç¨‹ç§°ä¸ºDNSå¯»å€ï¼Œå¦‚æœé—®è·¯çš„æ—¶é—´è¿‡é•¿ï¼Œé‚£ä¹ˆè¿”å›é€Ÿåº¦è‡ªç„¶å¾ˆæ…¢ã€‚é‚£ä¹ˆå¦‚æœæˆ‘ä»¬ç›´æ¥å‘Šè¯‰æµè§ˆå™¨ç›®çš„åœ°ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¹Ÿå°±ä¸ä¼šä¸€æ­¥æ­¥å»é—®è·¯äº†ï¼Œæ‰€ä»¥ä¹Ÿå°±èƒ½è¾¾åˆ°åŠ å¿«è®¿é—®é€Ÿåº¦çš„è¦æ±‚ã€‚ æ­£å¸¸æ¥è¯´ï¼Œç½‘ç«™çš„ä¸»åŸŸåä¸‹ä¼šå­˜åœ¨å¤šä¸ªå­åŸŸåï¼Œç”±è¿™äº›åŸŸåç»„åˆåœ¨ä¸€èµ·æä¾›å®Œæ•´çš„æœåŠ¡ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸ä»…è¦å‘Šè¯‰æœ¬æœºgithub.comçš„ä¸»åŸŸåï¼Œè¿˜è¦æŠŠç›¸å…³çš„å­åŸŸåä¹Ÿå‘Šè¯‰æœ¬æœºã€‚å°±åƒç°å®ä¸­ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„å®¶ï¼Œè€Œè¿™ä¸ªå®¶æœ‰å…·ä½“çš„åœ°å€ï¼Œä¸€äº›æœ‰é’±äººå¯èƒ½æœ‰å‡ ä¸ªå®¶ã€‚ å¯¹åº”åˆ°è®¡ç®—æœºä¸–ç•Œä¸­ï¼Œå¦‚æœåŸŸåæ˜¯ç”¨æˆ·ï¼Œé‚£ä¹ˆipåœ°å€å°±æ˜¯ç”¨æˆ·çš„å®¶ï¼ŒåŒä¸€ä¸ªåŸŸåå¯ä»¥å¯¹åº”å¤šä¸ªipåœ°å€ï¼ŒåŒä¸€ä¸ªipåœ°å€ä¹Ÿå¯ä»¥æœ‰å¤šå¤šä¸ªåŸŸåã€‚åŸŸååˆ°ipåœ°å€çš„è¿‡ç¨‹åŒæ ·éœ€è¦æ‰¾äººè¯¢é—®ï¼Œè¿™ä¸ªä¿¡æ¯ä¸€èˆ¬ä¼šå­˜åœ¨dnsæœåŠ¡å•†é‚£é‡Œï¼Œå°±åƒæˆ‘ä»¬çš„åœ°å€ç™»è®°åˆ°ç›¸å…³æœºæ„ä¸€æ ·. å­åŸŸåä¿¡æ¯ipaddress.com ç½‘ç«™ä¸ºä¾‹ï¼ŒæŸ¥è¯¢ä¸‹ github.com ç½‘ç«™çš„ç›¸å…³ä¿¡æ¯ã€‚å¾—åˆ°å¦‚ä¸‹åŸŸåä¿¡æ¯ã€‚ å°±è¿‘cdnåŠ é€Ÿå¤§å‹ç½‘ç«™æœåŠ¡å™¨éƒ½ä¸ä¼šåªæœ‰ä¸€å°æœåŠ¡å™¨ï¼Œè€Œæ˜¯å¤šå°æœåŠ¡å™¨ç»„æˆé›†ç¾¤ä¸€èµ·å¯¹å¤–æä¾›æœåŠ¡ã€‚å…¨ä¸–ç•Œéƒ½åœ¨ä½¿ç”¨ ** githubï¼Œå¦‚æœæ¯æ¬¡éƒ½è®¿é—®ç¾å›½æœåŠ¡å™¨ï¼Œå³ä½¿æµè§ˆå™¨çŸ¥é“ç›®çš„åœ°ï¼Œä½†æ˜¯è·ç¦»å¤ªè¿œè¿˜æ˜¯ä¼šå¾ˆæ…¢ï¼Œæ‰€ä»¥èƒ½å¤Ÿå°±è¿‘è®¿é—®github.com**å°±èƒ½å¤§å¹…æé«˜è®¿é—®é€Ÿåº¦äº†ã€‚tool.chinaz.com ç½‘ç«™ä¸ºä¾‹ï¼ŒæŸ¥è¯¢ä¸‹ github.com å„å­åŸŸåçš„å°±è¿‘åœ°å€ã€‚ æ‰€ä»¥åªéœ€è¦é€‰æ‹©TTLå€¼æœ€å°çš„ä½œä¸ºä¼˜åŒ–æ ‡å‡†ï¼Œå¹¶å†™å…¥/etc/hosts(macOS)æ–‡ä»¶ä¸­ # github related website 13.250.177.223 github.com 31.13.83.8 github.global.ssl.fastly.net 203.98.7.65 gist.github.com 13.229.189.0 codeload.github.com 185.199.109.153 desktop.github.com 185.199.108.153 guides.github.com 185.199.108.153 blog.github.com 18.204.240.114 status.github.com 185.199.108.153 developer.github.com 185.199.108.153 services.github.com 140.82.113.22 enterprise.github.com 34.195.49.195 education.github.com 185.199.108.153 pages.github.com 34.196.237.103 classroom.github.com æœ€åè¿›è¡Œdnsåˆ·æ–° sudo dscacheutil -flushcache","link":"/2019/07/16/%E9%83%A8%E5%88%86%E5%9C%B0%E5%8C%BAgithub%E6%8B%89%E5%8F%96%E4%BB%A3%E7%A0%81%E5%A5%87%E6%85%A2%E9%97%AE%E9%A2%98/"},{"title":"é™é»˜å®‰è£…ã€è‡ªå¯åŠ¨å®è·µ","text":"é™é»˜å®‰è£…ä»¥åŠè‡ªå¯åŠ¨ ç­–ç•¥æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼è§£å†³çš„é—®é¢˜æ¯”è¾ƒç±»ä¼¼ï¼Œå¹¶ä¸”éƒ½å¯ä»¥ä¾é Kotlinä¸­çš„é«˜é˜¶å‡½æ•°ç‰¹æ€§è¿›è¡Œæ”¹è‰¯ æœ€è¿‘åœ¨åšé—¨ç¦æœºå†…åµŒappï¼Œé—¨ç¦æœºåŸºäºapi22åŸç”Ÿç³»ç»Ÿï¼Œæ¶‰åŠåˆ°çš„æŠ€æœ¯ç‚¹åŒ…æ‹¬é™é»˜å®‰è£…ã€è‡ªå¯åŠ¨ã€‚ç¿»é˜…å¤§é‡æºç ã€blogä»¥åå¾—åˆ°è§£å†³æ–¹æ¡ˆï¼Œå› æ­¤è®°å½•ä¸‹æ¥ã€‚ é™é»˜å®‰è£… é™é»˜å®‰è£…ï¼Œå³ä¸å¼¹çª—ç³»ç»Ÿå®‰è£…ç•Œé¢çš„æƒ…å†µä¸‹ï¼Œå®Œæˆå®‰è£…åŠ¨ä½œï¼Œåœ¨ç”¨æˆ·ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹å®Œæˆå®‰è£…åŠ¨ä½œæ˜¾ç„¶æ˜¯éå¸¸å±é™©çš„è¡Œä¸º ï¼Œå› æ­¤é™é»˜å®‰è£…ä¸ä¼šå¼€å‘ç»™å¼€å‘è€…ï¼Œä¸è¿‡åœ¨Google Playå•†åº—å·²ç»è‡ªå®šä¹‰Romä¸Šéƒ½æœ‰å¼€å‘æ­¤æƒé™ï¼Œå……åˆ†è¯´æ˜æ‹¥æœ‰æƒé™çš„é‡è¦ æ€§ï¼Œè‡ªå®¶çš„ç³»ç»Ÿæƒ³å’‹æ ·å°±å’‹æ ·ã€‚ æƒé™ &lt;uses-permission android:name=&quot;android.permission.INSTALL_PACKAGES&quot; /&gt; å®‰è£…ä»£ç æœ‰ç”¨pushåˆ°system/appå»è°ƒç”¨@hideå®ç°çš„ï¼Œæœ‰ç”¨docå‘½ä»¤å®ç°çš„ï¼Œå¯¹é¡¹ç›®éœ€æ±‚è€Œè¨€äºŒè€…çš†å¯ï¼Œè€ƒè™‘åˆ°é¡¹ç›®åŒ…å«è¿‡å¤š.soæ–‡ä»¶ï¼Œè€Œ.soæ–‡ä»¶éœ€è¦pushåˆ°/system/libèµ‹äºˆæƒé™ï¼Œæ•…ç›´æ¥é‡‡ç”¨äº†ç¬¬äºŒç§ç­–ç•¥ä½¿ç”¨docå‘½ä»¤æå®šï¼Œå³ï¼ˆåœ¨å­çº¿ç¨‹å®‰è£…ï¼Œé¿å…ANRï¼Œéœ€è¦rootæƒé™ï¼‰ï¼š pm install -r å®ç°ä»£ç  /** * install slient * * @param context * @param filePath * @return 0 means normal, 1 means file not exist, 2 means other exception error */ public static int installSlient(Context context, String filePath) { File file = new File(filePath); if (filePath == null || filePath.length() == 0 || (file = new File(filePath)) == null || file.length() &lt;= 0 || !file.exists() || !file.isFile()) { return 1; } String[] args = { &quot;pm&quot;, &quot;install&quot;, &quot;-r&quot;, filePath }; ProcessBuilder processBuilder = new ProcessBuilder(args); Process process = null; BufferedReader successResult = null; BufferedReader errorResult = null; StringBuilder successMsg = new StringBuilder(); StringBuilder errorMsg = new StringBuilder(); int result; try { process = processBuilder.start(); successResult = new BufferedReader(new InputStreamReader(process.getInputStream())); errorResult = new BufferedReader(new InputStreamReader(process.getErrorStream())); String s; while ((s = successResult.readLine()) != null) { successMsg.append(s); } while ((s = errorResult.readLine()) != null) { errorMsg.append(s); } } catch (IOException e) { e.printStackTrace(); result = 2; } catch (Exception e) { e.printStackTrace(); result = 2; } finally { try { if (successResult != null) { successResult.close(); } if (errorResult != null) { errorResult.close(); } } catch (IOException e) { e.printStackTrace(); } if (process != null) { process.destroy(); } } // TODO should add memory is not enough here if (successMsg.toString().contains(&quot;Success&quot;) || successMsg.toString().contains(&quot;success&quot;)) { result = 0; } else { result = 2; } Log.d(&quot;installSlient&quot;, &quot;successMsg:&quot; + successMsg + &quot;, ErrorMsg:&quot; + errorMsg); return result; } è‡ªå¯åŠ¨æ— éå°±æ˜¯é™æ€å¹¿æ’­æ‹‰èµ·laucherActivity,ä¸è¿‡è¿™é‡Œéœ€è¦æ³¨æ„çš„é—®é¢˜æ˜¯ï¼Œä½†é™é»˜å®‰è£…æˆåŠŸåï¼Œappè¿›ç¨‹ä¼šè¢«æ€æ­»ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­è‡ªèº«æ— æ³•æ¥æ”¶åˆ°å¹¿æ’­,è¿™æ—¶å€™å°±éœ€è¦è¾…åŠ©appäº†ï¼Œè¿™ä¸ªappç”¨æ¥å¤„ç†æ¥æ”¶android.intent.action.PACKAGE_ADDEDå¹¿æ’­ï¼Œå¹¶å‘é€å¹¿æ’­ç»™å®¿ä¸»appä»è€Œå®ç°è‡ªå¯åŠ¨ï¼Œè¿™ä¸ªè¿‡ç¨‹ä»£ç æ˜¯å¾ˆç®€å•çš„ã€‚å¦‚æœæƒ³è¦ä¼˜åŒ–çš„è¯å¯ä»¥å»åšå®šæ—¶è½®è¯¢ç›¸äº’æ£€æŸ¥è¿›ç¨‹æ˜¯å¦å­˜æ´»ï¼Œå¹¶ç›¸äº’æ‹‰èµ·ã€‚å¦‚ä½•å®šæ—¶è½®è¯¢ï¼Œå¦‚ä½•æ£€æŸ¥ï¼Œæ•´ä¸ªç­–ç•¥ï¼Œä¼šåœ¨åç»­ä¸­ç¼–å†™â€¦ å‚è€ƒ:Trinea-Androidå¸¸ç”¨ä»£ç ä¹‹æ™®é€šåŠç³»ç»Ÿæƒé™é™é»˜å®‰è£…APKpm.java","link":"/2018/05/26/%E9%9D%99%E9%BB%98%E5%AE%89%E8%A3%85%E3%80%81%E8%87%AA%E5%90%AF%E5%8A%A8%E5%AE%9E%E8%B7%B5/"}],"tags":[{"name":"Test automation","slug":"Test-automation","link":"/tags/Test-automation/"},{"name":"Kotlin","slug":"Kotlin","link":"/tags/Kotlin/"},{"name":"Android","slug":"Android","link":"/tags/Android/"},{"name":"Flutter","slug":"Flutter","link":"/tags/Flutter/"},{"name":"adb","slug":"adb","link":"/tags/adb/"},{"name":"Android Studio","slug":"Android-Studio","link":"/tags/Android-Studio/"},{"name":"gradle","slug":"gradle","link":"/tags/gradle/"},{"name":"dart","slug":"dart","link":"/tags/dart/"},{"name":"cocoaPods","slug":"cocoaPods","link":"/tags/cocoaPods/"},{"name":"system","slug":"system","link":"/tags/system/"},{"name":"life","slug":"life","link":"/tags/life/"},{"name":"syntactic sugar","slug":"syntactic-sugar","link":"/tags/syntactic-sugar/"},{"name":"View","slug":"View","link":"/tags/View/"},{"name":"Tensorflow","slug":"Tensorflow","link":"/tags/Tensorflow/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","link":"/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"éšæ„","slug":"éšæ„","link":"/tags/%E9%9A%8F%E6%84%8F/"},{"name":"git","slug":"git","link":"/tags/git/"}],"categories":[{"name":"Android","slug":"Android","link":"/categories/Android/"},{"name":"openGL","slug":"openGL","link":"/categories/openGL/"},{"name":"Flutter","slug":"Flutter","link":"/categories/Flutter/"},{"name":"Tools","slug":"Tools","link":"/categories/Tools/"},{"name":"iOS","slug":"iOS","link":"/categories/iOS/"},{"name":"éšç¬”","slug":"éšç¬”","link":"/categories/%E9%9A%8F%E7%AC%94/"},{"name":"Kotlin","slug":"Kotlin","link":"/categories/Kotlin/"},{"name":"MediaPipe","slug":"MediaPipe","link":"/categories/MediaPipe/"},{"name":"life","slug":"life","link":"/categories/life/"}]}